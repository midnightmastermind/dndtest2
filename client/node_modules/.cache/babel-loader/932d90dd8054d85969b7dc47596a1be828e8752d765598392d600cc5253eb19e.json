{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/src/App.js\",\n  _s = $RefreshSig$();\n// App.js\nimport React, { useMemo, useRef, useState } from \"react\";\nimport Grid from \"./Grid\";\nimport { GridDndContext } from \"./GridDndContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction uid() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2, 10);\n}\nfunction arrayMove(arr, from, to) {\n  const copy = [...arr];\n  const [item] = copy.splice(from, 1);\n  copy.splice(to, 0, item);\n  return copy;\n}\nfunction deepCloneContainers(containers) {\n  // simple + safe for this shape\n  return containers.map(c => ({\n    ...c,\n    items: [...c.items]\n  }));\n}\nexport default function App() {\n  _s();\n  // drag state\n  const [activeId, setActiveId] = useState(null);\n  const [activeSize, setActiveSize] = useState(null);\n\n  // data state\n  const [containers, setContainers] = useState([]); // {id,label,items:[]}\n  const [instances, setInstances] = useState([]); // {id,label}\n\n  // ✅ soft-sort draft\n  const containersDraftRef = useRef(null);\n  const [softTick, setSoftTick] = useState(0); // forces rerender while ref changes\n\n  // creators\n  const addContainer = () => {\n    const id = uid();\n    setContainers(prev => [...prev, {\n      id,\n      label: `List ${prev.length + 1}`,\n      items: []\n    }]);\n  };\n  const addInstanceToContainer = containerId => {\n    const instanceId = uid();\n    setInstances(prev => [...prev, {\n      id: instanceId,\n      label: `Item ${prev.length + 1}`\n    }]);\n    setContainers(prev => prev.map(c => c.id === containerId ? {\n      ...c,\n      items: [...c.items, instanceId]\n    } : c));\n  };\n\n  // helpers (operate on a given list)\n  const findContainerIndexById = (id, list) => list.findIndex(c => c.id === id);\n  const findContainerByInstanceId = (instanceId, list) => list.find(c => c.items.includes(instanceId));\n  const getWorkingContainers = () => {\n    var _containersDraftRef$c;\n    return (_containersDraftRef$c = containersDraftRef.current) !== null && _containersDraftRef$c !== void 0 ? _containersDraftRef$c : containers;\n  };\n\n  // -------------------------\n  // Drag Handlers (App-owned)\n  // -------------------------\n  const handleDragStart = event => {\n    var _event$active$rect, _event$active$rect$cu;\n    setActiveId(event.active.id);\n    const rect = (_event$active$rect = event.active.rect) === null || _event$active$rect === void 0 ? void 0 : (_event$active$rect$cu = _event$active$rect.current) === null || _event$active$rect$cu === void 0 ? void 0 : _event$active$rect$cu.initial;\n    if (rect) setActiveSize({\n      width: rect.width,\n      height: rect.height\n    });\n\n    // ✅ create soft draft snapshot\n    containersDraftRef.current = deepCloneContainers(containers);\n  };\n  const handleDragCancel = () => {\n    setActiveId(null);\n    setActiveSize(null);\n    containersDraftRef.current = null;\n    setSoftTick(t => t + 1);\n  };\n\n  // ✅ soft-sort onDragOver (mutate ref only)\n  const handleDragOver = event => {\n    var _active$data$current, _over$data$current;\n    const {\n      active,\n      over\n    } = event;\n    if (!over) return;\n    const draft = containersDraftRef.current;\n    if (!draft) return;\n    const activeRole = (_active$data$current = active.data.current) === null || _active$data$current === void 0 ? void 0 : _active$data$current.role;\n    const overRole = (_over$data$current = over.data.current) === null || _over$data$current === void 0 ? void 0 : _over$data$current.role;\n\n    // -------------------------\n    // A) Dragging a CONTAINER\n    // -------------------------\n    if (activeRole === \"container\") {\n      var _over$data$current$co, _over$data$current2;\n      const fromIndex = findContainerIndexById(active.id, draft);\n      const targetContainerId = (_over$data$current$co = (_over$data$current2 = over.data.current) === null || _over$data$current2 === void 0 ? void 0 : _over$data$current2.containerId) !== null && _over$data$current$co !== void 0 ? _over$data$current$co : over.id;\n      const targetIndex = findContainerIndexById(targetContainerId, draft);\n      if (fromIndex === -1 || targetIndex === -1) return;\n      if (fromIndex === targetIndex) return;\n      let toIndex = targetIndex;\n\n      // 3-zone behavior\n      if (overRole === \"container:top\") toIndex = targetIndex;else if (overRole === \"container:bottom\") toIndex = targetIndex + 1;else toIndex = targetIndex; // container:list\n\n      const movingForward = fromIndex < toIndex;\n      const adjustedTo = movingForward ? toIndex - 1 : toIndex;\n      const clamped = Math.max(0, Math.min(draft.length - 1, adjustedTo));\n      containersDraftRef.current = arrayMove(draft, fromIndex, clamped);\n      setSoftTick(t => t + 1);\n      return;\n    }\n\n    // -------------------------\n    // B) Dragging an INSTANCE (sortable + cross-container)\n    // -------------------------\n    if (activeRole === \"instance\") {\n      var _over$data$current3;\n      const instanceId = active.id;\n      const fromContainer = findContainerByInstanceId(instanceId, draft);\n      if (!fromContainer) return;\n\n      // where is it going?\n      const toContainerId = (_over$data$current3 = over.data.current) === null || _over$data$current3 === void 0 ? void 0 : _over$data$current3.containerId;\n      if (!toContainerId) return;\n      const toContainer = draft.find(c => c.id === toContainerId);\n      if (!toContainer) return;\n\n      // compute insertion index\n      const overInstanceId = overRole === \"instance\" ? over.id : null;\n\n      // remove from source\n      fromContainer.items = fromContainer.items.filter(id => id !== instanceId);\n\n      // insert into destination\n      if (!overInstanceId) {\n        // dropped on list area -> append\n        toContainer.items.push(instanceId);\n      } else {\n        const idx = toContainer.items.indexOf(overInstanceId);\n        const insertAt = idx >= 0 ? idx : toContainer.items.length;\n        toContainer.items.splice(insertAt, 0, instanceId);\n      }\n      setSoftTick(t => t + 1);\n      return;\n    }\n  };\n\n  // ✅ commit onDragEnd\n  const handleDragEnd = event => {\n    const {\n      over\n    } = event;\n    setActiveId(null);\n    setActiveSize(null);\n\n    // if no drop target, revert\n    if (!over) {\n      containersDraftRef.current = null;\n      setSoftTick(t => t + 1);\n      return;\n    }\n\n    // commit draft if present\n    if (containersDraftRef.current) {\n      setContainers(containersDraftRef.current);\n      containersDraftRef.current = null;\n      setSoftTick(t => t + 1);\n    }\n  };\n\n  // render list = draft if dragging, else real state\n  const containersRender = getWorkingContainers();\n  const ctxValue = useMemo(() => ({\n    activeId,\n    activeSize,\n    setActiveId,\n    setActiveSize,\n    containers,\n    containersRender,\n    // ✅\n    setContainers,\n    instances,\n    setInstances,\n    addContainer,\n    addInstanceToContainer,\n    handleDragStart,\n    handleDragOver,\n    // ✅\n    handleDragEnd,\n    handleDragCancel,\n    // include softTick so memo updates while draft mutates\n    softTick\n  }), [activeId, activeSize, containers, containersRender, instances, softTick]);\n  return /*#__PURE__*/_jsxDEV(GridDndContext.Provider, {\n    value: ctxValue,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-root\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dnd-page\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 12,\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: 0\n            },\n            children: \"Sortable Containers + Instances\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addContainer,\n            children: \"+ Container\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), containers.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12,\n            opacity: 0.7,\n            fontSize: 13\n          },\n          children: \"Create a container to start.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"mvLcxKO1AsUHxK9aqw0kTTIuz4U=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useMemo","useRef","useState","Grid","GridDndContext","jsxDEV","_jsxDEV","uid","Date","now","toString","Math","random","slice","arrayMove","arr","from","to","copy","item","splice","deepCloneContainers","containers","map","c","items","App","_s","activeId","setActiveId","activeSize","setActiveSize","setContainers","instances","setInstances","containersDraftRef","softTick","setSoftTick","addContainer","id","prev","label","length","addInstanceToContainer","containerId","instanceId","findContainerIndexById","list","findIndex","findContainerByInstanceId","find","includes","getWorkingContainers","_containersDraftRef$c","current","handleDragStart","event","_event$active$rect","_event$active$rect$cu","active","rect","initial","width","height","handleDragCancel","t","handleDragOver","_active$data$current","_over$data$current","over","draft","activeRole","data","role","overRole","_over$data$current$co","_over$data$current2","fromIndex","targetContainerId","targetIndex","toIndex","movingForward","adjustedTo","clamped","max","min","_over$data$current3","fromContainer","toContainerId","toContainer","overInstanceId","filter","push","idx","indexOf","insertAt","handleDragEnd","containersRender","ctxValue","Provider","value","children","className","style","display","gap","alignItems","margin","fileName","_jsxFileName","lineNumber","columnNumber","onClick","marginTop","opacity","fontSize","_c","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/src/App.js"],"sourcesContent":["// App.js\nimport React, { useMemo, useRef, useState } from \"react\";\nimport Grid from \"./Grid\";\nimport { GridDndContext } from \"./GridDndContext\";\n\nfunction uid() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2, 10);\n}\n\nfunction arrayMove(arr, from, to) {\n  const copy = [...arr];\n  const [item] = copy.splice(from, 1);\n  copy.splice(to, 0, item);\n  return copy;\n}\n\nfunction deepCloneContainers(containers) {\n  // simple + safe for this shape\n  return containers.map((c) => ({ ...c, items: [...c.items] }));\n}\n\nexport default function App() {\n  // drag state\n  const [activeId, setActiveId] = useState(null);\n  const [activeSize, setActiveSize] = useState(null);\n\n  // data state\n  const [containers, setContainers] = useState([]); // {id,label,items:[]}\n  const [instances, setInstances] = useState([]);   // {id,label}\n\n  // ✅ soft-sort draft\n  const containersDraftRef = useRef(null);\n  const [softTick, setSoftTick] = useState(0); // forces rerender while ref changes\n\n  // creators\n  const addContainer = () => {\n    const id = uid();\n    setContainers((prev) => [...prev, { id, label: `List ${prev.length + 1}`, items: [] }]);\n  };\n\n  const addInstanceToContainer = (containerId) => {\n    const instanceId = uid();\n    setInstances((prev) => [...prev, { id: instanceId, label: `Item ${prev.length + 1}` }]);\n\n    setContainers((prev) =>\n      prev.map((c) => (c.id === containerId ? { ...c, items: [...c.items, instanceId] } : c))\n    );\n  };\n\n  // helpers (operate on a given list)\n  const findContainerIndexById = (id, list) => list.findIndex((c) => c.id === id);\n  const findContainerByInstanceId = (instanceId, list) => list.find((c) => c.items.includes(instanceId));\n\n  const getWorkingContainers = () => containersDraftRef.current ?? containers;\n\n  // -------------------------\n  // Drag Handlers (App-owned)\n  // -------------------------\n  const handleDragStart = (event) => {\n    setActiveId(event.active.id);\n\n    const rect = event.active.rect?.current?.initial;\n    if (rect) setActiveSize({ width: rect.width, height: rect.height });\n\n    // ✅ create soft draft snapshot\n    containersDraftRef.current = deepCloneContainers(containers);\n  };\n\n  const handleDragCancel = () => {\n    setActiveId(null);\n    setActiveSize(null);\n    containersDraftRef.current = null;\n    setSoftTick((t) => t + 1);\n  };\n\n  // ✅ soft-sort onDragOver (mutate ref only)\n  const handleDragOver = (event) => {\n    const { active, over } = event;\n    if (!over) return;\n\n    const draft = containersDraftRef.current;\n    if (!draft) return;\n\n    const activeRole = active.data.current?.role;\n    const overRole = over.data.current?.role;\n\n    // -------------------------\n    // A) Dragging a CONTAINER\n    // -------------------------\n    if (activeRole === \"container\") {\n      const fromIndex = findContainerIndexById(active.id, draft);\n      const targetContainerId = over.data.current?.containerId ?? over.id;\n      const targetIndex = findContainerIndexById(targetContainerId, draft);\n\n      if (fromIndex === -1 || targetIndex === -1) return;\n      if (fromIndex === targetIndex) return;\n\n      let toIndex = targetIndex;\n\n      // 3-zone behavior\n      if (overRole === \"container:top\") toIndex = targetIndex;\n      else if (overRole === \"container:bottom\") toIndex = targetIndex + 1;\n      else toIndex = targetIndex; // container:list\n\n      const movingForward = fromIndex < toIndex;\n      const adjustedTo = movingForward ? toIndex - 1 : toIndex;\n\n      const clamped = Math.max(0, Math.min(draft.length - 1, adjustedTo));\n\n      containersDraftRef.current = arrayMove(draft, fromIndex, clamped);\n      setSoftTick((t) => t + 1);\n      return;\n    }\n\n    // -------------------------\n    // B) Dragging an INSTANCE (sortable + cross-container)\n    // -------------------------\n    if (activeRole === \"instance\") {\n      const instanceId = active.id;\n\n      const fromContainer = findContainerByInstanceId(instanceId, draft);\n      if (!fromContainer) return;\n\n      // where is it going?\n      const toContainerId = over.data.current?.containerId;\n      if (!toContainerId) return;\n\n      const toContainer = draft.find((c) => c.id === toContainerId);\n      if (!toContainer) return;\n\n      // compute insertion index\n      const overInstanceId = overRole === \"instance\" ? over.id : null;\n\n      // remove from source\n      fromContainer.items = fromContainer.items.filter((id) => id !== instanceId);\n\n      // insert into destination\n      if (!overInstanceId) {\n        // dropped on list area -> append\n        toContainer.items.push(instanceId);\n      } else {\n        const idx = toContainer.items.indexOf(overInstanceId);\n        const insertAt = idx >= 0 ? idx : toContainer.items.length;\n        toContainer.items.splice(insertAt, 0, instanceId);\n      }\n\n      setSoftTick((t) => t + 1);\n      return;\n    }\n  };\n\n  // ✅ commit onDragEnd\n  const handleDragEnd = (event) => {\n    const { over } = event;\n\n    setActiveId(null);\n    setActiveSize(null);\n\n    // if no drop target, revert\n    if (!over) {\n      containersDraftRef.current = null;\n      setSoftTick((t) => t + 1);\n      return;\n    }\n\n    // commit draft if present\n    if (containersDraftRef.current) {\n      setContainers(containersDraftRef.current);\n      containersDraftRef.current = null;\n      setSoftTick((t) => t + 1);\n    }\n  };\n\n  // render list = draft if dragging, else real state\n  const containersRender = getWorkingContainers();\n\n  const ctxValue = useMemo(\n    () => ({\n      activeId,\n      activeSize,\n      setActiveId,\n      setActiveSize,\n\n      containers,\n      containersRender, // ✅\n      setContainers,\n\n      instances,\n      setInstances,\n\n      addContainer,\n      addInstanceToContainer,\n\n      handleDragStart,\n      handleDragOver,   // ✅\n      handleDragEnd,\n      handleDragCancel,\n\n      // include softTick so memo updates while draft mutates\n      softTick,\n    }),\n    [activeId, activeSize, containers, containersRender, instances, softTick]\n  );\n\n  return (\n    <GridDndContext.Provider value={ctxValue}>\n      <div className=\"app-root\">\n        <div className=\"dnd-page\">\n          <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\n            <h2 style={{ margin: 0 }}>Sortable Containers + Instances</h2>\n            <button onClick={addContainer}>+ Container</button>\n          </div>\n\n          <Grid />\n\n          {containers.length === 0 && (\n            <div style={{ marginTop: 12, opacity: 0.7, fontSize: 13 }}>\n              Create a container to start.\n            </div>\n          )}\n        </div>\n      </div>\n    </GridDndContext.Provider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}