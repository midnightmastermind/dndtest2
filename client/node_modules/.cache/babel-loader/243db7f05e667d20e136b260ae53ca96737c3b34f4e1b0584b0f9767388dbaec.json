{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/client/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport Textfield from \"@atlaskit/textfield\";\nimport Button from \"@atlaskit/button\";\nimport { Label } from \"@atlaskit/form\";\nimport { socket } from \"./socket\";\nimport { bindSocketToStore } from \"./state/bindSocketToStore\";\nimport { ActionTypes } from \"./state/actions\";\nimport Grid from \"./Grid\";\nimport LoginScreen from \"./LoginScreen\";\nimport { GridDataContext } from \"./GridDataContext\";\nimport { GridActionsContext } from \"./GridActionsContext\";\nimport { useBoardState } from \"./state/useBoardState\";\nimport { useDndReorderCoordinator } from \"./helpers/useDndReorderCoordinator\";\nimport SortableContainer from \"./SortableContainer\";\nimport SortableInstance from \"./SortableInstance\";\nimport Instance from \"./Instance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useRenderCount(label) {\n  _s();\n  const ref = React.useRef(0);\n  ref.current += 1;\n  console.log(`${label} render #${ref.current}`);\n}\n_s(useRenderCount, \"QMBuJFIdzLIeqBcFwhMf246mjOM=\");\nfunction DebugBar({\n  containers,\n  containersDraft,\n  activeId,\n  debugEvent\n}) {\n  var _debugEvent$type;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"none\",\n      position: \"relative\",\n      top: 0,\n      zIndex: 999,\n      background: \"#0e1116\",\n      borderBottom: \"1px solid #222\",\n      padding: \"8px 12px\",\n      fontSize: 12,\n      fontFamily: \"monospace\",\n      color: \"#9aa4b2\",\n      gap: 16,\n      flexWrap: \"wrap\"\n    },\n    className: \"debugbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"activeId:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"#fff\"\n        },\n        children: activeId !== null && activeId !== void 0 ? activeId : \"null\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"debugEvent:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"#fff\"\n        },\n        children: (_debugEvent$type = debugEvent === null || debugEvent === void 0 ? void 0 : debugEvent.type) !== null && _debugEvent$type !== void 0 ? _debugEvent$type : \"null\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"containers (state):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), \" \", containers.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"draftRef:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: containersDraft ? \"#4caf50\" : \"#f44336\"\n        },\n        children: containersDraft ? \"ACTIVE\" : \"null\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n        children: \"event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: \"pre-wrap\",\n          maxWidth: 700\n        },\n        children: JSON.stringify(debugEvent, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n        children: \"state\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: \"pre-wrap\",\n          maxWidth: 700\n        },\n        children: JSON.stringify(containers, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n        children: \"draft\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: \"pre-wrap\",\n          maxWidth: 700\n        },\n        children: JSON.stringify(containersDraft, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n_c = DebugBar;\nfunction ToolbarBar({\n  show,\n  onClose,\n  gridId,\n  availableGrids,\n  gridName,\n  setGridName,\n  rowInput,\n  setRowInput,\n  colInput,\n  setColInput,\n  onGridChange,\n  onCreateNewGrid,\n  onCommitGridName,\n  onUpdateRows,\n  onUpdateCols,\n  onAddPanel\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\",\n      top: 0,\n      zIndex: 998,\n      background: \"#0e1116\",\n      borderBottom: \"1px solid #222\",\n      padding: \"8px 12px\",\n      fontSize: 12,\n      fontFamily: \"monospace\",\n      color: \"#9aa4b2\",\n      display: show ? \"flex\" : \"none\",\n      gap: 16,\n      flexWrap: \"wrap\",\n      alignItems: \"center\"\n    },\n    className: \"toolbarbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        style: {\n          color: \"#fff\"\n        },\n        children: \"Grid\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: gridId || \"\",\n        onChange: onGridChange,\n        style: {\n          background: \"#0b0f14\",\n          color: \"white\",\n          border: \"1px solid #222\",\n          borderRadius: 4,\n          padding: \"4px 8px\",\n          fontSize: 12,\n          fontFamily: \"monospace\"\n        },\n        children: (availableGrids || []).map(g => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: g.id,\n          children: g.name || `Grid ${String(g.id).slice(-4)}`\n        }, g.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        appearance: \"default\",\n        onClick: onCreateNewGrid,\n        children: \"New Grid\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"end\",\n        gap: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"grid_name\",\n          style: {\n            color: \"#9aa4b2\",\n            fontSize: 11\n          },\n          children: \"Grid Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Textfield, {\n          id: \"grid_name\",\n          value: gridName !== null && gridName !== void 0 ? gridName : \"\",\n          onChange: e => setGridName(e.target.value),\n          onKeyDown: e => {\n            if (e.key === \"Enter\") {\n              e.preventDefault();\n              onCommitGridName === null || onCommitGridName === void 0 ? void 0 : onCommitGridName();\n              e.currentTarget.blur();\n            }\n          },\n          style: {\n            background: \"#0b0f14\",\n            color: \"white\",\n            border: \"1px solid #222\",\n            minWidth: 220,\n            fontFamily: \"monospace\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          width: 72\n        },\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"grid_row\",\n          style: {\n            color: \"#9aa4b2\",\n            fontSize: 11\n          },\n          children: \"Rows\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Textfield, {\n          id: \"grid_row\",\n          type: \"number\",\n          value: rowInput,\n          onChange: e => {\n            const val = e.target.value;\n            setRowInput(val);\n            if (val === \"\") return;\n            onUpdateRows === null || onUpdateRows === void 0 ? void 0 : onUpdateRows(val);\n          },\n          onBlur: () => {\n            if (rowInput === \"\") {\n              setRowInput(\"1\");\n              onUpdateRows === null || onUpdateRows === void 0 ? void 0 : onUpdateRows(\"1\");\n            }\n          },\n          style: {\n            background: \"#0b0f14\",\n            color: \"white\",\n            border: \"1px solid #222\",\n            fontFamily: \"monospace\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          width: 72\n        },\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"grid_col\",\n          style: {\n            color: \"#9aa4b2\",\n            fontSize: 11\n          },\n          children: \"Cols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Textfield, {\n          id: \"grid_col\",\n          type: \"number\",\n          value: colInput,\n          onChange: e => {\n            const val = e.target.value;\n            setColInput(val);\n            if (val === \"\") return;\n            onUpdateCols === null || onUpdateCols === void 0 ? void 0 : onUpdateCols(val);\n          },\n          onBlur: () => {\n            if (colInput === \"\") {\n              setColInput(\"1\");\n              onUpdateCols === null || onUpdateCols === void 0 ? void 0 : onUpdateCols(\"1\");\n            }\n          },\n          style: {\n            background: \"#0b0f14\",\n            color: \"white\",\n            border: \"1px solid #222\",\n            fontFamily: \"monospace\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        appearance: \"primary\",\n        onClick: onAddPanel,\n        children: \"Add Panel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        appearance: \"warning\",\n        onClick: onClose,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n_c2 = ToolbarBar;\nfunction findNextOpenPosition(panels = [], rows = 1, cols = 1) {\n  const taken = new Set(panels.map(p => `${p.row}-${p.col}`));\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < cols; c++) {\n      const key = `${r}-${c}`;\n      if (!taken.has(key)) return {\n        row: r,\n        col: c\n      };\n    }\n  }\n  return {\n    row: 0,\n    col: 0\n  };\n}\nexport default function App() {\n  _s2();\n  var _state$grid, _state$grid2, _state$grid3;\n  const {\n    state,\n    dispatch\n  } = useBoardState();\n  const {\n    addContainer,\n    addInstanceToContainer,\n    handleDragStart,\n    handleDragOver,\n    handleDragEnd,\n    handleDragCancel,\n    containersDraftRef,\n    getWorkingContainers\n  } = useDndReorderCoordinator({\n    state,\n    dispatch,\n    socket\n  });\n  const containersRender = getWorkingContainers();\n\n  // -----------------------------\n  // TOOLBAR LOCAL UI STATE\n  // -----------------------------\n  const [gridName, setGridName] = useState(\"\");\n  const [rowInput, setRowInput] = useState(\"1\");\n  const [colInput, setColInput] = useState(\"1\");\n\n  // Sync toolbar fields from hydrated grid\n  useEffect(() => {\n    if (state !== null && state !== void 0 && state.grid) {\n      var _state$grid$rows, _state$grid$cols;\n      setGridName(state.grid.name || \"\");\n      setRowInput(String((_state$grid$rows = state.grid.rows) !== null && _state$grid$rows !== void 0 ? _state$grid$rows : 1));\n      setColInput(String((_state$grid$cols = state.grid.cols) !== null && _state$grid$cols !== void 0 ? _state$grid$cols : 1));\n    } else {\n      setGridName(\"\");\n      setRowInput(\"1\");\n      setColInput(\"1\");\n    }\n  }, [state === null || state === void 0 ? void 0 : (_state$grid = state.grid) === null || _state$grid === void 0 ? void 0 : _state$grid._id, state === null || state === void 0 ? void 0 : (_state$grid2 = state.grid) === null || _state$grid2 === void 0 ? void 0 : _state$grid2.rows, state === null || state === void 0 ? void 0 : (_state$grid3 = state.grid) === null || _state$grid3 === void 0 ? void 0 : _state$grid3.cols]);\n\n  // -----------------------------\n  // SOCKET BIND + HYDRATE\n  // -----------------------------\n  useEffect(() => {\n    const unbind = bindSocketToStore(socket, dispatch);\n    const savedUserId = localStorage.getItem(\"moduli-userId\");\n    const savedGridId = localStorage.getItem(\"moduli-gridId\");\n    if (savedUserId) {\n      if (savedGridId) socket.emit(\"request_full_state\", {\n        gridId: savedGridId\n      });else socket.emit(\"request_full_state\");\n    }\n    return () => unbind === null || unbind === void 0 ? void 0 : unbind();\n  }, [dispatch]);\n\n  // -----------------------------\n  // TOOLBAR HANDLERS (REAL EMITS)\n  // -----------------------------\n  const handleGridChange = e => {\n    const newGridId = e.target.value;\n    if (!newGridId || newGridId === state.gridId) return;\n    localStorage.setItem(\"moduli-gridId\", newGridId);\n    socket.emit(\"request_full_state\", {\n      gridId: newGridId\n    });\n  };\n  const handleCreateNewGrid = () => {\n    localStorage.removeItem(\"moduli-gridId\");\n    socket.emit(\"request_full_state\"); // server creates new grid\n  };\n  const commitGridName = () => {\n    if (!state.gridId) return;\n    const trimmed = (gridName || \"\").trim();\n    if (!trimmed) return;\n\n    // optimistic local patch (keeps UI snappy)\n    dispatch({\n      type: ActionTypes.PATCH_GRID,\n      payload: {\n        grid: {\n          name: trimmed\n        }\n      }\n    });\n\n    // server patch\n    socket.emit(\"update_grid\", {\n      gridId: state.gridId,\n      name: trimmed\n    });\n  };\n  const updateRows = val => {\n    if (!state.gridId) return;\n    const num = Math.max(1, Number(val) || 1);\n    dispatch({\n      type: ActionTypes.PATCH_GRID,\n      payload: {\n        grid: {\n          rows: num\n        }\n      }\n    });\n    socket.emit(\"update_grid\", {\n      gridId: state.gridId,\n      rows: num\n    });\n  };\n  const updateCols = val => {\n    if (!state.gridId) return;\n    const num = Math.max(1, Number(val) || 1);\n    dispatch({\n      type: ActionTypes.PATCH_GRID,\n      payload: {\n        grid: {\n          cols: num\n        }\n      }\n    });\n    socket.emit(\"update_grid\", {\n      gridId: state.gridId,\n      cols: num\n    });\n  };\n  const addNewPanel = () => {\n    var _state$grid$rows2, _state$grid$cols2;\n    if (!state.gridId || !state.grid) return;\n    const panelId = crypto.randomUUID();\n    const containerId = `taskbox-${panelId}`;\n    const {\n      row,\n      col\n    } = findNextOpenPosition(state.panels || [], (_state$grid$rows2 = state.grid.rows) !== null && _state$grid$rows2 !== void 0 ? _state$grid$rows2 : 1, (_state$grid$cols2 = state.grid.cols) !== null && _state$grid$cols2 !== void 0 ? _state$grid$cols2 : 1);\n\n    // NOTE: panels are userId-only on server, but still include gridId in panel object if you want.\n    const panel = {\n      id: panelId,\n      role: \"panel\",\n      type: \"taskbox\",\n      containerId,\n      props: {\n        containerId\n      },\n      row,\n      col,\n      width: 1,\n      height: 1,\n      gridId: state.gridId\n    };\n\n    // optimistic local add\n    dispatch({\n      type: ActionTypes.PATCH_PANEL,\n      payload: {\n        panel\n      }\n    });\n\n    // tell server to upsert + broadcast panel_updated\n    socket.emit(\"add_panel\", {\n      panel\n    });\n\n    // also ensure container exists for that panel (empty list)\n    // optimistic: add container if missing\n    if (!(state.containers || []).some(c => c.id === containerId)) {\n      dispatch({\n        type: ActionTypes.ADD_CONTAINER,\n        payload: {\n          id: containerId,\n          label: \"TaskBox\"\n        }\n      });\n      socket.emit(\"create_container\", {\n        container: {\n          id: containerId,\n          label: \"TaskBox\"\n        }\n      });\n    }\n\n    // ensure items are empty (both local + server)\n    dispatch({\n      type: ActionTypes.PATCH_CONTAINER_ITEMS,\n      payload: {\n        containerId,\n        items: []\n      }\n    });\n    socket.emit(\"update_container_items\", {\n      containerId,\n      items: []\n    });\n  };\n\n  // -----------------------------\n  // CONTEXT VALUES\n  // -----------------------------\n  const dataValue = useMemo(() => ({\n    activeId: state.activeId,\n    activeSize: state.activeSize,\n    debugEvent: state.debugEvent,\n    containers: state.containers,\n    containersRender,\n    instances: state.instances,\n    softTick: state.softTick,\n    userId: state.userId,\n    gridId: state.gridId,\n    grid: state.grid,\n    panels: state.panels,\n    availableGrids: state.availableGrids,\n    hydrated: state.hydrated\n  }), [state.activeId, state.activeSize, state.debugEvent, state.containers, containersRender, state.instances, state.softTick, state.userId, state.gridId, state.grid, state.panels, state.availableGrids, state.hydrated]);\n  const actionsValue = useMemo(() => ({\n    addContainer,\n    addInstanceToContainer,\n    handleDragStart,\n    handleDragOver,\n    handleDragEnd,\n    handleDragCancel,\n    useRenderCount,\n    toggleToolbar: () => setShowToolbar(true),\n    hideToolbar: () => setShowToolbar(false),\n    dispatch\n  }), [addContainer, addInstanceToContainer, handleDragStart, handleDragOver, handleDragEnd, handleDragCancel]);\n  useRenderCount(\"App\");\n\n  // -----------------------------\n  // LOGIN GATE\n  // -----------------------------\n  const savedUserId = localStorage.getItem(\"moduli-userId\");\n  if (!savedUserId) return /*#__PURE__*/_jsxDEV(LoginScreen, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 503,\n    columnNumber: 28\n  }, this);\n  const components = useMemo(() => ({\n    sortableInstance: SortableInstance,\n    instance: Instance,\n    sortableContainer: SortableContainer\n  }), []);\n  return /*#__PURE__*/_jsxDEV(GridActionsContext.Provider, {\n    value: actionsValue,\n    children: /*#__PURE__*/_jsxDEV(GridDataContext.Provider, {\n      value: dataValue,\n      children: [/*#__PURE__*/_jsxDEV(ToolbarBar, {\n        show: showToolbar,\n        onClose: () => setShowToolbar(false),\n        gridId: state.gridId,\n        availableGrids: state.availableGrids || [],\n        gridName: gridName,\n        setGridName: setGridName,\n        rowInput: rowInput,\n        setRowInput: setRowInput,\n        colInput: colInput,\n        setColInput: setColInput,\n        onGridChange: handleGridChange,\n        onCreateNewGrid: handleCreateNewGrid,\n        onCommitGridName: commitGridName,\n        onUpdateRows: updateRows,\n        onUpdateCols: updateCols,\n        onAddPanel: addNewPanel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DebugBar, {\n        containers: state.containers,\n        containersDraft: containersDraftRef.current,\n        activeId: state.activeId,\n        debugEvent: state.debugEvent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-root\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dnd-page\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: 12,\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: 0\n              },\n              children: \"Sortable Containers + Instances\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addContainer,\n              children: \"+ Container\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowToolbar(v => !v),\n              children: showToolbar ? \"Hide Toolbar\" : \"Show Toolbar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            components: components\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), state.containers.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              opacity: 0.7,\n              fontSize: 13\n            },\n            children: \"Create a container to start.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 516,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"AncXPwkREPilVUNmlF0jggMggMY=\", false, function () {\n  return [useBoardState, useDndReorderCoordinator, useRenderCount];\n});\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DebugBar\");\n$RefreshReg$(_c2, \"ToolbarBar\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Textfield","Button","Label","socket","bindSocketToStore","ActionTypes","Grid","LoginScreen","GridDataContext","GridActionsContext","useBoardState","useDndReorderCoordinator","SortableContainer","SortableInstance","Instance","jsxDEV","_jsxDEV","useRenderCount","label","_s","ref","useRef","current","console","log","DebugBar","containers","containersDraft","activeId","debugEvent","_debugEvent$type","style","display","position","top","zIndex","background","borderBottom","padding","fontSize","fontFamily","color","gap","flexWrap","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","length","cursor","whiteSpace","maxWidth","JSON","stringify","_c","ToolbarBar","show","onClose","gridId","availableGrids","gridName","setGridName","rowInput","setRowInput","colInput","setColInput","onGridChange","onCreateNewGrid","onCommitGridName","onUpdateRows","onUpdateCols","onAddPanel","alignItems","value","onChange","border","borderRadius","map","g","id","name","String","slice","appearance","onClick","flexDirection","htmlFor","e","target","onKeyDown","key","preventDefault","currentTarget","blur","minWidth","width","val","onBlur","_c2","findNextOpenPosition","panels","rows","cols","taken","Set","p","row","col","r","c","has","App","_s2","_state$grid","_state$grid2","_state$grid3","state","dispatch","addContainer","addInstanceToContainer","handleDragStart","handleDragOver","handleDragEnd","handleDragCancel","containersDraftRef","getWorkingContainers","containersRender","grid","_state$grid$rows","_state$grid$cols","_id","unbind","savedUserId","localStorage","getItem","savedGridId","emit","handleGridChange","newGridId","setItem","handleCreateNewGrid","removeItem","commitGridName","trimmed","trim","PATCH_GRID","payload","updateRows","num","Math","max","Number","updateCols","addNewPanel","_state$grid$rows2","_state$grid$cols2","panelId","crypto","randomUUID","containerId","panel","role","props","height","PATCH_PANEL","some","ADD_CONTAINER","container","PATCH_CONTAINER_ITEMS","items","dataValue","activeSize","instances","softTick","userId","hydrated","actionsValue","toggleToolbar","setShowToolbar","hideToolbar","components","sortableInstance","instance","sortableContainer","Provider","showToolbar","margin","v","marginTop","opacity","_c3","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/client/src/App.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport Textfield from \"@atlaskit/textfield\";\nimport Button from \"@atlaskit/button\";\nimport { Label } from \"@atlaskit/form\";\n\nimport { socket } from \"./socket\";\nimport { bindSocketToStore } from \"./state/bindSocketToStore\";\nimport { ActionTypes } from \"./state/actions\";\n\nimport Grid from \"./Grid\";\nimport LoginScreen from \"./LoginScreen\";\n\nimport { GridDataContext } from \"./GridDataContext\";\nimport { GridActionsContext } from \"./GridActionsContext\";\n\nimport { useBoardState } from \"./state/useBoardState\";\nimport { useDndReorderCoordinator } from \"./helpers/useDndReorderCoordinator\";\nimport SortableContainer from \"./SortableContainer\";\nimport SortableInstance from \"./SortableInstance\";\nimport Instance from \"./Instance\";\n\nfunction useRenderCount(label) {\n  const ref = React.useRef(0);\n  ref.current += 1;\n  console.log(`${label} render #${ref.current}`);\n}\n\nfunction DebugBar({ containers, containersDraft, activeId, debugEvent }) {\n  return (\n    <div\n      style={{\n        display: \"none\",\n        position: \"relative\",\n        top: 0,\n        zIndex: 999,\n        background: \"#0e1116\",\n        borderBottom: \"1px solid #222\",\n        padding: \"8px 12px\",\n        fontSize: 12,\n        fontFamily: \"monospace\",\n        color: \"#9aa4b2\",\n        gap: 16,\n        flexWrap: \"wrap\",\n      }}\n      className=\"debugbar\"\n    >\n      <div>\n        <strong>activeId:</strong>{\" \"}\n        <span style={{ color: \"#fff\" }}>{activeId ?? \"null\"}</span>\n      </div>\n\n      <div>\n        <strong>debugEvent:</strong>{\" \"}\n        <span style={{ color: \"#fff\" }}>{debugEvent?.type ?? \"null\"}</span>\n      </div>\n\n      <div>\n        <strong>containers (state):</strong> {containers.length}\n      </div>\n\n      <div>\n        <strong>draftRef:</strong>{\" \"}\n        <span style={{ color: containersDraft ? \"#4caf50\" : \"#f44336\" }}>\n          {containersDraft ? \"ACTIVE\" : \"null\"}\n        </span>\n      </div>\n\n      <details style={{ cursor: \"pointer\" }}>\n        <summary>event</summary>\n        <pre style={{ whiteSpace: \"pre-wrap\", maxWidth: 700 }}>\n          {JSON.stringify(debugEvent, null, 2)}\n        </pre>\n      </details>\n\n      <details style={{ cursor: \"pointer\" }}>\n        <summary>state</summary>\n        <pre style={{ whiteSpace: \"pre-wrap\", maxWidth: 700 }}>\n          {JSON.stringify(containers, null, 2)}\n        </pre>\n      </details>\n\n      <details style={{ cursor: \"pointer\" }}>\n        <summary>draft</summary>\n        <pre style={{ whiteSpace: \"pre-wrap\", maxWidth: 700 }}>\n          {JSON.stringify(containersDraft, null, 2)}\n        </pre>\n      </details>\n    </div>\n  );\n}\n\nfunction ToolbarBar({\n  show,\n  onClose,\n\n  gridId,\n  availableGrids,\n\n  gridName,\n  setGridName,\n  rowInput,\n  setRowInput,\n  colInput,\n  setColInput,\n\n  onGridChange,\n  onCreateNewGrid,\n  onCommitGridName,\n  onUpdateRows,\n  onUpdateCols,\n  onAddPanel,\n}) {\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        top: 0,\n        zIndex: 998,\n        background: \"#0e1116\",\n        borderBottom: \"1px solid #222\",\n        padding: \"8px 12px\",\n        fontSize: 12,\n        fontFamily: \"monospace\",\n        color: \"#9aa4b2\",\n        display: show ? \"flex\" : \"none\",\n        gap: 16,\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n      }}\n      className=\"toolbarbar\"\n    >\n      {/* Grid select + New Grid */}\n      <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n        <strong style={{ color: \"#fff\" }}>Grid</strong>\n\n        <select\n          value={gridId || \"\"}\n          onChange={onGridChange}\n          style={{\n            background: \"#0b0f14\",\n            color: \"white\",\n            border: \"1px solid #222\",\n            borderRadius: 4,\n            padding: \"4px 8px\",\n            fontSize: 12,\n            fontFamily: \"monospace\",\n          }}\n        >\n          {(availableGrids || []).map((g) => (\n            <option key={g.id} value={g.id}>\n              {g.name || `Grid ${String(g.id).slice(-4)}`}\n            </option>\n          ))}\n        </select>\n\n        <Button appearance=\"default\" onClick={onCreateNewGrid}>\n          New Grid\n        </Button>\n      </div>\n\n      {/* Grid name + rows/cols */}\n      <div style={{ display: \"flex\", alignItems: \"end\", gap: 10 }}>\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n          <Label htmlFor=\"grid_name\" style={{ color: \"#9aa4b2\", fontSize: 11 }}>\n            Grid Name\n          </Label>\n          <Textfield\n            id=\"grid_name\"\n            value={gridName ?? \"\"}\n            onChange={(e) => setGridName(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                onCommitGridName?.();\n                e.currentTarget.blur();\n              }\n            }}\n            style={{\n              background: \"#0b0f14\",\n              color: \"white\",\n              border: \"1px solid #222\",\n              minWidth: 220,\n              fontFamily: \"monospace\",\n            }}\n          />\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", width: 72 }}>\n          <Label htmlFor=\"grid_row\" style={{ color: \"#9aa4b2\", fontSize: 11 }}>\n            Rows\n          </Label>\n          <Textfield\n            id=\"grid_row\"\n            type=\"number\"\n            value={rowInput}\n            onChange={(e) => {\n              const val = e.target.value;\n              setRowInput(val);\n              if (val === \"\") return;\n              onUpdateRows?.(val);\n            }}\n            onBlur={() => {\n              if (rowInput === \"\") {\n                setRowInput(\"1\");\n                onUpdateRows?.(\"1\");\n              }\n            }}\n            style={{\n              background: \"#0b0f14\",\n              color: \"white\",\n              border: \"1px solid #222\",\n              fontFamily: \"monospace\",\n            }}\n          />\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", width: 72 }}>\n          <Label htmlFor=\"grid_col\" style={{ color: \"#9aa4b2\", fontSize: 11 }}>\n            Cols\n          </Label>\n          <Textfield\n            id=\"grid_col\"\n            type=\"number\"\n            value={colInput}\n            onChange={(e) => {\n              const val = e.target.value;\n              setColInput(val);\n              if (val === \"\") return;\n              onUpdateCols?.(val);\n            }}\n            onBlur={() => {\n              if (colInput === \"\") {\n                setColInput(\"1\");\n                onUpdateCols?.(\"1\");\n              }\n            }}\n            style={{\n              background: \"#0b0f14\",\n              color: \"white\",\n              border: \"1px solid #222\",\n              fontFamily: \"monospace\",\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div style={{ display: \"flex\", alignItems: \"center\", gap: 10 }}>\n        <Button appearance=\"primary\" onClick={onAddPanel}>\n          Add Panel\n        </Button>\n\n        <Button appearance=\"warning\" onClick={onClose}>\n          Close\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction findNextOpenPosition(panels = [], rows = 1, cols = 1) {\n  const taken = new Set(panels.map((p) => `${p.row}-${p.col}`));\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < cols; c++) {\n      const key = `${r}-${c}`;\n      if (!taken.has(key)) return { row: r, col: c };\n    }\n  }\n  return { row: 0, col: 0 };\n}\n\nexport default function App() {\n  const { state, dispatch } = useBoardState();\n\n  const {\n    addContainer,\n    addInstanceToContainer,\n    handleDragStart,\n    handleDragOver,\n    handleDragEnd,\n    handleDragCancel,\n    containersDraftRef,\n    getWorkingContainers,\n  } = useDndReorderCoordinator({ state, dispatch, socket });\n\n  const containersRender = getWorkingContainers();\n\n  // -----------------------------\n  // TOOLBAR LOCAL UI STATE\n  // -----------------------------\n  const [gridName, setGridName] = useState(\"\");\n  const [rowInput, setRowInput] = useState(\"1\");\n  const [colInput, setColInput] = useState(\"1\");\n\n  // Sync toolbar fields from hydrated grid\n  useEffect(() => {\n    if (state?.grid) {\n      setGridName(state.grid.name || \"\");\n      setRowInput(String(state.grid.rows ?? 1));\n      setColInput(String(state.grid.cols ?? 1));\n    } else {\n      setGridName(\"\");\n      setRowInput(\"1\");\n      setColInput(\"1\");\n    }\n  }, [state?.grid?._id, state?.grid?.rows, state?.grid?.cols]);\n\n  // -----------------------------\n  // SOCKET BIND + HYDRATE\n  // -----------------------------\n  useEffect(() => {\n    const unbind = bindSocketToStore(socket, dispatch);\n\n    const savedUserId = localStorage.getItem(\"moduli-userId\");\n    const savedGridId = localStorage.getItem(\"moduli-gridId\");\n\n    if (savedUserId) {\n      if (savedGridId) socket.emit(\"request_full_state\", { gridId: savedGridId });\n      else socket.emit(\"request_full_state\");\n    }\n\n    return () => unbind?.();\n  }, [dispatch]);\n\n  // -----------------------------\n  // TOOLBAR HANDLERS (REAL EMITS)\n  // -----------------------------\n  const handleGridChange = (e) => {\n    const newGridId = e.target.value;\n    if (!newGridId || newGridId === state.gridId) return;\n\n    localStorage.setItem(\"moduli-gridId\", newGridId);\n    socket.emit(\"request_full_state\", { gridId: newGridId });\n  };\n\n  const handleCreateNewGrid = () => {\n    localStorage.removeItem(\"moduli-gridId\");\n    socket.emit(\"request_full_state\"); // server creates new grid\n  };\n\n  const commitGridName = () => {\n    if (!state.gridId) return;\n\n    const trimmed = (gridName || \"\").trim();\n    if (!trimmed) return;\n\n    // optimistic local patch (keeps UI snappy)\n    dispatch({\n      type: ActionTypes.PATCH_GRID,\n      payload: { grid: { name: trimmed } },\n    });\n\n    // server patch\n    socket.emit(\"update_grid\", { gridId: state.gridId, name: trimmed });\n  };\n\n  const updateRows = (val) => {\n    if (!state.gridId) return;\n    const num = Math.max(1, Number(val) || 1);\n\n    dispatch({\n      type: ActionTypes.PATCH_GRID,\n      payload: { grid: { rows: num } },\n    });\n\n    socket.emit(\"update_grid\", { gridId: state.gridId, rows: num });\n  };\n\n  const updateCols = (val) => {\n    if (!state.gridId) return;\n    const num = Math.max(1, Number(val) || 1);\n\n    dispatch({\n      type: ActionTypes.PATCH_GRID,\n      payload: { grid: { cols: num } },\n    });\n\n    socket.emit(\"update_grid\", { gridId: state.gridId, cols: num });\n  };\n\n  const addNewPanel = () => {\n    if (!state.gridId || !state.grid) return;\n\n    const panelId = crypto.randomUUID();\n    const containerId = `taskbox-${panelId}`;\n\n    const { row, col } = findNextOpenPosition(\n      state.panels || [],\n      state.grid.rows ?? 1,\n      state.grid.cols ?? 1\n    );\n\n    // NOTE: panels are userId-only on server, but still include gridId in panel object if you want.\n    const panel = {\n      id: panelId,\n      role: \"panel\",\n      type: \"taskbox\",\n      containerId,\n      props: { containerId },\n      row,\n      col,\n      width: 1,\n      height: 1,\n      gridId: state.gridId,\n    };\n\n    // optimistic local add\n    dispatch({ type: ActionTypes.PATCH_PANEL, payload: { panel } });\n\n    // tell server to upsert + broadcast panel_updated\n    socket.emit(\"add_panel\", { panel });\n\n    // also ensure container exists for that panel (empty list)\n    // optimistic: add container if missing\n    if (!(state.containers || []).some((c) => c.id === containerId)) {\n      dispatch({\n        type: ActionTypes.ADD_CONTAINER,\n        payload: { id: containerId, label: \"TaskBox\", },\n      });\n\n      socket.emit(\"create_container\", {\n        container: { id: containerId, label: \"TaskBox\" },\n      });\n    }\n\n    // ensure items are empty (both local + server)\n    dispatch({\n      type: ActionTypes.PATCH_CONTAINER_ITEMS,\n      payload: { containerId, items: [] },\n    });\n    socket.emit(\"update_container_items\", { containerId, items: [] });\n  };\n\n  // -----------------------------\n  // CONTEXT VALUES\n  // -----------------------------\n  const dataValue = useMemo(\n    () => ({\n      activeId: state.activeId,\n      activeSize: state.activeSize,\n      debugEvent: state.debugEvent,\n\n      containers: state.containers,\n      containersRender,\n      instances: state.instances,\n\n      softTick: state.softTick,\n\n      userId: state.userId,\n      gridId: state.gridId,\n      grid: state.grid,\n      panels: state.panels,\n      availableGrids: state.availableGrids,\n      hydrated: state.hydrated,\n    }),\n    [\n      state.activeId,\n      state.activeSize,\n      state.debugEvent,\n      state.containers,\n      containersRender,\n      state.instances,\n      state.softTick,\n      state.userId,\n      state.gridId,\n      state.grid,\n      state.panels,\n      state.availableGrids,\n      state.hydrated,\n    ]\n  );\n\n  const actionsValue = useMemo(\n    () => ({\n      addContainer,\n      addInstanceToContainer,\n      handleDragStart,\n      handleDragOver,\n      handleDragEnd,\n      handleDragCancel,\n      useRenderCount,\n\n      toggleToolbar: () => setShowToolbar(true),\n      hideToolbar: () => setShowToolbar(false),\n      dispatch\n    }),\n    [\n      addContainer,\n      addInstanceToContainer,\n      handleDragStart,\n      handleDragOver,\n      handleDragEnd,\n      handleDragCancel,\n    ]\n  );\n\n  useRenderCount(\"App\");\n\n  // -----------------------------\n  // LOGIN GATE\n  // -----------------------------\n  const savedUserId = localStorage.getItem(\"moduli-userId\");\n  if (!savedUserId) return <LoginScreen />;\n\n    const components = useMemo(\n      () => ({\n        sortableInstance: SortableInstance,\n        instance: Instance,\n        sortableContainer: SortableContainer\n      }),\n      []\n    );\n  \n\n  return (\n    <GridActionsContext.Provider value={actionsValue}>\n      <GridDataContext.Provider value={dataValue}>\n        <ToolbarBar\n          show={showToolbar}\n          onClose={() => setShowToolbar(false)}\n          gridId={state.gridId}\n          availableGrids={state.availableGrids || []}\n          gridName={gridName}\n          setGridName={setGridName}\n          rowInput={rowInput}\n          setRowInput={setRowInput}\n          colInput={colInput}\n          setColInput={setColInput}\n          onGridChange={handleGridChange}\n          onCreateNewGrid={handleCreateNewGrid}\n          onCommitGridName={commitGridName}\n          onUpdateRows={updateRows}\n          onUpdateCols={updateCols}\n          onAddPanel={addNewPanel}\n        />\n\n        <DebugBar\n          containers={state.containers}\n          containersDraft={containersDraftRef.current}\n          activeId={state.activeId}\n          debugEvent={state.debugEvent}\n        />\n\n        <div className=\"app-root\">\n          <div className=\"dnd-page\">\n            <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\n              <h2 style={{ margin: 0 }}>Sortable Containers + Instances</h2>\n              <button onClick={addContainer}>+ Container</button>\n              <button onClick={() => setShowToolbar((v) => !v)}>\n                {showToolbar ? \"Hide Toolbar\" : \"Show Toolbar\"}\n              </button>\n            </div>\n\n            <Grid components={components} />\n\n            {state.containers.length === 0 && (\n              <div style={{ marginTop: 12, opacity: 0.7, fontSize: 13 }}>\n                Create a container to start.\n              </div>\n            )}\n          </div>\n        </div>\n      </GridDataContext.Provider>\n    </GridActionsContext.Provider>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,MAAM,MAAM,kBAAkB;AACrC,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,iBAAiB,QAAQ,2BAA2B;AAC7D,SAASC,WAAW,QAAQ,iBAAiB;AAE7C,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,WAAW,MAAM,eAAe;AAEvC,SAASC,eAAe,QAAQ,mBAAmB;AACnD,SAASC,kBAAkB,QAAQ,sBAAsB;AAEzD,SAASC,aAAa,QAAQ,uBAAuB;AACrD,SAASC,wBAAwB,QAAQ,oCAAoC;AAC7E,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,QAAQ,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,SAASC,cAAcA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAC7B,MAAMC,GAAG,GAAGxB,KAAK,CAACyB,MAAM,CAAC,CAAC,CAAC;EAC3BD,GAAG,CAACE,OAAO,IAAI,CAAC;EAChBC,OAAO,CAACC,GAAG,CAAC,GAAGN,KAAK,YAAYE,GAAG,CAACE,OAAO,EAAE,CAAC;AAChD;AAACH,EAAA,CAJQF,cAAc;AAMvB,SAASQ,QAAQA,CAAC;EAAEC,UAAU;EAAEC,eAAe;EAAEC,QAAQ;EAAEC;AAAW,CAAC,EAAE;EAAA,IAAAC,gBAAA;EACvE,oBACEd,OAAA;IACEe,KAAK,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,QAAQ,EAAE,UAAU;MACpBC,GAAG,EAAE,CAAC;MACNC,MAAM,EAAE,GAAG;MACXC,UAAU,EAAE,SAAS;MACrBC,YAAY,EAAE,gBAAgB;MAC9BC,OAAO,EAAE,UAAU;MACnBC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,WAAW;MACvBC,KAAK,EAAE,SAAS;MAChBC,GAAG,EAAE,EAAE;MACPC,QAAQ,EAAE;IACZ,CAAE;IACFC,SAAS,EAAC,UAAU;IAAAC,QAAA,gBAEpB7B,OAAA;MAAA6B,QAAA,gBACE7B,OAAA;QAAA6B,QAAA,EAAQ;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAAC,GAAG,eAC9BjC,OAAA;QAAMe,KAAK,EAAE;UAAEU,KAAK,EAAE;QAAO,CAAE;QAAAI,QAAA,EAAEjB,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI;MAAM;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxD,CAAC,eAENjC,OAAA;MAAA6B,QAAA,gBACE7B,OAAA;QAAA6B,QAAA,EAAQ;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAAC,GAAG,eAChCjC,OAAA;QAAMe,KAAK,EAAE;UAAEU,KAAK,EAAE;QAAO,CAAE;QAAAI,QAAA,GAAAf,gBAAA,GAAED,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEqB,IAAI,cAAApB,gBAAA,cAAAA,gBAAA,GAAI;MAAM;QAAAgB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC,eAENjC,OAAA;MAAA6B,QAAA,gBACE7B,OAAA;QAAA6B,QAAA,EAAQ;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,KAAC,EAACvB,UAAU,CAACyB,MAAM;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpD,CAAC,eAENjC,OAAA;MAAA6B,QAAA,gBACE7B,OAAA;QAAA6B,QAAA,EAAQ;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAAC,GAAG,eAC9BjC,OAAA;QAAMe,KAAK,EAAE;UAAEU,KAAK,EAAEd,eAAe,GAAG,SAAS,GAAG;QAAU,CAAE;QAAAkB,QAAA,EAC7DlB,eAAe,GAAG,QAAQ,GAAG;MAAM;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eAENjC,OAAA;MAASe,KAAK,EAAE;QAAEqB,MAAM,EAAE;MAAU,CAAE;MAAAP,QAAA,gBACpC7B,OAAA;QAAA6B,QAAA,EAAS;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,eACxBjC,OAAA;QAAKe,KAAK,EAAE;UAAEsB,UAAU,EAAE,UAAU;UAAEC,QAAQ,EAAE;QAAI,CAAE;QAAAT,QAAA,EACnDU,IAAI,CAACC,SAAS,CAAC3B,UAAU,EAAE,IAAI,EAAE,CAAC;MAAC;QAAAiB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAEVjC,OAAA;MAASe,KAAK,EAAE;QAAEqB,MAAM,EAAE;MAAU,CAAE;MAAAP,QAAA,gBACpC7B,OAAA;QAAA6B,QAAA,EAAS;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,eACxBjC,OAAA;QAAKe,KAAK,EAAE;UAAEsB,UAAU,EAAE,UAAU;UAAEC,QAAQ,EAAE;QAAI,CAAE;QAAAT,QAAA,EACnDU,IAAI,CAACC,SAAS,CAAC9B,UAAU,EAAE,IAAI,EAAE,CAAC;MAAC;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAEVjC,OAAA;MAASe,KAAK,EAAE;QAAEqB,MAAM,EAAE;MAAU,CAAE;MAAAP,QAAA,gBACpC7B,OAAA;QAAA6B,QAAA,EAAS;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,eACxBjC,OAAA;QAAKe,KAAK,EAAE;UAAEsB,UAAU,EAAE,UAAU;UAAEC,QAAQ,EAAE;QAAI,CAAE;QAAAT,QAAA,EACnDU,IAAI,CAACC,SAAS,CAAC7B,eAAe,EAAE,IAAI,EAAE,CAAC;MAAC;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV;AAACQ,EAAA,GA9DQhC,QAAQ;AAgEjB,SAASiC,UAAUA,CAAC;EAClBC,IAAI;EACJC,OAAO;EAEPC,MAAM;EACNC,cAAc;EAEdC,QAAQ;EACRC,WAAW;EACXC,QAAQ;EACRC,WAAW;EACXC,QAAQ;EACRC,WAAW;EAEXC,YAAY;EACZC,eAAe;EACfC,gBAAgB;EAChBC,YAAY;EACZC,YAAY;EACZC;AACF,CAAC,EAAE;EACD,oBACE1D,OAAA;IACEe,KAAK,EAAE;MACLE,QAAQ,EAAE,UAAU;MACpBC,GAAG,EAAE,CAAC;MACNC,MAAM,EAAE,GAAG;MACXC,UAAU,EAAE,SAAS;MACrBC,YAAY,EAAE,gBAAgB;MAC9BC,OAAO,EAAE,UAAU;MACnBC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,WAAW;MACvBC,KAAK,EAAE,SAAS;MAChBT,OAAO,EAAE2B,IAAI,GAAG,MAAM,GAAG,MAAM;MAC/BjB,GAAG,EAAE,EAAE;MACPC,QAAQ,EAAE,MAAM;MAChBgC,UAAU,EAAE;IACd,CAAE;IACF/B,SAAS,EAAC,YAAY;IAAAC,QAAA,gBAGtB7B,OAAA;MAAKe,KAAK,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAE2C,UAAU,EAAE,QAAQ;QAAEjC,GAAG,EAAE;MAAE,CAAE;MAAAG,QAAA,gBAC5D7B,OAAA;QAAQe,KAAK,EAAE;UAAEU,KAAK,EAAE;QAAO,CAAE;QAAAI,QAAA,EAAC;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAE/CjC,OAAA;QACE4D,KAAK,EAAEf,MAAM,IAAI,EAAG;QACpBgB,QAAQ,EAAER,YAAa;QACvBtC,KAAK,EAAE;UACLK,UAAU,EAAE,SAAS;UACrBK,KAAK,EAAE,OAAO;UACdqC,MAAM,EAAE,gBAAgB;UACxBC,YAAY,EAAE,CAAC;UACfzC,OAAO,EAAE,SAAS;UAClBC,QAAQ,EAAE,EAAE;UACZC,UAAU,EAAE;QACd,CAAE;QAAAK,QAAA,EAED,CAACiB,cAAc,IAAI,EAAE,EAAEkB,GAAG,CAAEC,CAAC,iBAC5BjE,OAAA;UAAmB4D,KAAK,EAAEK,CAAC,CAACC,EAAG;UAAArC,QAAA,EAC5BoC,CAAC,CAACE,IAAI,IAAI,QAAQC,MAAM,CAACH,CAAC,CAACC,EAAE,CAAC,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC;QAAE,GADhCJ,CAAC,CAACC,EAAE;UAAApC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAET,CACT;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAETjC,OAAA,CAACf,MAAM;QAACqF,UAAU,EAAC,SAAS;QAACC,OAAO,EAAEjB,eAAgB;QAAAzB,QAAA,EAAC;MAEvD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGNjC,OAAA;MAAKe,KAAK,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAE2C,UAAU,EAAE,KAAK;QAAEjC,GAAG,EAAE;MAAG,CAAE;MAAAG,QAAA,gBAC1D7B,OAAA;QAAKe,KAAK,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEwD,aAAa,EAAE;QAAS,CAAE;QAAA3C,QAAA,gBACvD7B,OAAA,CAACd,KAAK;UAACuF,OAAO,EAAC,WAAW;UAAC1D,KAAK,EAAE;YAAEU,KAAK,EAAE,SAAS;YAAEF,QAAQ,EAAE;UAAG,CAAE;UAAAM,QAAA,EAAC;QAEtE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACRjC,OAAA,CAAChB,SAAS;UACRkF,EAAE,EAAC,WAAW;UACdN,KAAK,EAAEb,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI,EAAG;UACtBc,QAAQ,EAAGa,CAAC,IAAK1B,WAAW,CAAC0B,CAAC,CAACC,MAAM,CAACf,KAAK,CAAE;UAC7CgB,SAAS,EAAGF,CAAC,IAAK;YAChB,IAAIA,CAAC,CAACG,GAAG,KAAK,OAAO,EAAE;cACrBH,CAAC,CAACI,cAAc,CAAC,CAAC;cAClBvB,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAG,CAAC;cACpBmB,CAAC,CAACK,aAAa,CAACC,IAAI,CAAC,CAAC;YACxB;UACF,CAAE;UACFjE,KAAK,EAAE;YACLK,UAAU,EAAE,SAAS;YACrBK,KAAK,EAAE,OAAO;YACdqC,MAAM,EAAE,gBAAgB;YACxBmB,QAAQ,EAAE,GAAG;YACbzD,UAAU,EAAE;UACd;QAAE;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAENjC,OAAA;QAAKe,KAAK,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEwD,aAAa,EAAE,QAAQ;UAAEU,KAAK,EAAE;QAAG,CAAE;QAAArD,QAAA,gBAClE7B,OAAA,CAACd,KAAK;UAACuF,OAAO,EAAC,UAAU;UAAC1D,KAAK,EAAE;YAAEU,KAAK,EAAE,SAAS;YAAEF,QAAQ,EAAE;UAAG,CAAE;UAAAM,QAAA,EAAC;QAErE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACRjC,OAAA,CAAChB,SAAS;UACRkF,EAAE,EAAC,UAAU;UACbhC,IAAI,EAAC,QAAQ;UACb0B,KAAK,EAAEX,QAAS;UAChBY,QAAQ,EAAGa,CAAC,IAAK;YACf,MAAMS,GAAG,GAAGT,CAAC,CAACC,MAAM,CAACf,KAAK;YAC1BV,WAAW,CAACiC,GAAG,CAAC;YAChB,IAAIA,GAAG,KAAK,EAAE,EAAE;YAChB3B,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAG2B,GAAG,CAAC;UACrB,CAAE;UACFC,MAAM,EAAEA,CAAA,KAAM;YACZ,IAAInC,QAAQ,KAAK,EAAE,EAAE;cACnBC,WAAW,CAAC,GAAG,CAAC;cAChBM,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAG,GAAG,CAAC;YACrB;UACF,CAAE;UACFzC,KAAK,EAAE;YACLK,UAAU,EAAE,SAAS;YACrBK,KAAK,EAAE,OAAO;YACdqC,MAAM,EAAE,gBAAgB;YACxBtC,UAAU,EAAE;UACd;QAAE;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAENjC,OAAA;QAAKe,KAAK,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEwD,aAAa,EAAE,QAAQ;UAAEU,KAAK,EAAE;QAAG,CAAE;QAAArD,QAAA,gBAClE7B,OAAA,CAACd,KAAK;UAACuF,OAAO,EAAC,UAAU;UAAC1D,KAAK,EAAE;YAAEU,KAAK,EAAE,SAAS;YAAEF,QAAQ,EAAE;UAAG,CAAE;UAAAM,QAAA,EAAC;QAErE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACRjC,OAAA,CAAChB,SAAS;UACRkF,EAAE,EAAC,UAAU;UACbhC,IAAI,EAAC,QAAQ;UACb0B,KAAK,EAAET,QAAS;UAChBU,QAAQ,EAAGa,CAAC,IAAK;YACf,MAAMS,GAAG,GAAGT,CAAC,CAACC,MAAM,CAACf,KAAK;YAC1BR,WAAW,CAAC+B,GAAG,CAAC;YAChB,IAAIA,GAAG,KAAK,EAAE,EAAE;YAChB1B,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAG0B,GAAG,CAAC;UACrB,CAAE;UACFC,MAAM,EAAEA,CAAA,KAAM;YACZ,IAAIjC,QAAQ,KAAK,EAAE,EAAE;cACnBC,WAAW,CAAC,GAAG,CAAC;cAChBK,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAG,GAAG,CAAC;YACrB;UACF,CAAE;UACF1C,KAAK,EAAE;YACLK,UAAU,EAAE,SAAS;YACrBK,KAAK,EAAE,OAAO;YACdqC,MAAM,EAAE,gBAAgB;YACxBtC,UAAU,EAAE;UACd;QAAE;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNjC,OAAA;MAAKe,KAAK,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAE2C,UAAU,EAAE,QAAQ;QAAEjC,GAAG,EAAE;MAAG,CAAE;MAAAG,QAAA,gBAC7D7B,OAAA,CAACf,MAAM;QAACqF,UAAU,EAAC,SAAS;QAACC,OAAO,EAAEb,UAAW;QAAA7B,QAAA,EAAC;MAElD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETjC,OAAA,CAACf,MAAM;QAACqF,UAAU,EAAC,SAAS;QAACC,OAAO,EAAE3B,OAAQ;QAAAf,QAAA,EAAC;MAE/C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACoD,GAAA,GAvKQ3C,UAAU;AAyKnB,SAAS4C,oBAAoBA,CAACC,MAAM,GAAG,EAAE,EAAEC,IAAI,GAAG,CAAC,EAAEC,IAAI,GAAG,CAAC,EAAE;EAC7D,MAAMC,KAAK,GAAG,IAAIC,GAAG,CAACJ,MAAM,CAACvB,GAAG,CAAE4B,CAAC,IAAK,GAAGA,CAAC,CAACC,GAAG,IAAID,CAAC,CAACE,GAAG,EAAE,CAAC,CAAC;EAC7D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,IAAI,EAAEO,CAAC,EAAE,EAAE;IAC7B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,IAAI,EAAEO,CAAC,EAAE,EAAE;MAC7B,MAAMnB,GAAG,GAAG,GAAGkB,CAAC,IAAIC,CAAC,EAAE;MACvB,IAAI,CAACN,KAAK,CAACO,GAAG,CAACpB,GAAG,CAAC,EAAE,OAAO;QAAEgB,GAAG,EAAEE,CAAC;QAAED,GAAG,EAAEE;MAAE,CAAC;IAChD;EACF;EACA,OAAO;IAAEH,GAAG,EAAE,CAAC;IAAEC,GAAG,EAAE;EAAE,CAAC;AAC3B;AAEA,eAAe,SAASI,GAAGA,CAAA,EAAG;EAAAC,GAAA;EAAA,IAAAC,WAAA,EAAAC,YAAA,EAAAC,YAAA;EAC5B,MAAM;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAG9G,aAAa,CAAC,CAAC;EAE3C,MAAM;IACJ+G,YAAY;IACZC,sBAAsB;IACtBC,eAAe;IACfC,cAAc;IACdC,aAAa;IACbC,gBAAgB;IAChBC,kBAAkB;IAClBC;EACF,CAAC,GAAGrH,wBAAwB,CAAC;IAAE4G,KAAK;IAAEC,QAAQ;IAAErH;EAAO,CAAC,CAAC;EAEzD,MAAM8H,gBAAgB,GAAGD,oBAAoB,CAAC,CAAC;;EAE/C;EACA;EACA;EACA,MAAM,CAACjE,QAAQ,EAAEC,WAAW,CAAC,GAAGjE,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkE,QAAQ,EAAEC,WAAW,CAAC,GAAGnE,QAAQ,CAAC,GAAG,CAAC;EAC7C,MAAM,CAACoE,QAAQ,EAAEC,WAAW,CAAC,GAAGrE,QAAQ,CAAC,GAAG,CAAC;;EAE7C;EACAF,SAAS,CAAC,MAAM;IACd,IAAI0H,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEW,IAAI,EAAE;MAAA,IAAAC,gBAAA,EAAAC,gBAAA;MACfpE,WAAW,CAACuD,KAAK,CAACW,IAAI,CAAC/C,IAAI,IAAI,EAAE,CAAC;MAClCjB,WAAW,CAACkB,MAAM,EAAA+C,gBAAA,GAACZ,KAAK,CAACW,IAAI,CAAC1B,IAAI,cAAA2B,gBAAA,cAAAA,gBAAA,GAAI,CAAC,CAAC,CAAC;MACzC/D,WAAW,CAACgB,MAAM,EAAAgD,gBAAA,GAACb,KAAK,CAACW,IAAI,CAACzB,IAAI,cAAA2B,gBAAA,cAAAA,gBAAA,GAAI,CAAC,CAAC,CAAC;IAC3C,CAAC,MAAM;MACLpE,WAAW,CAAC,EAAE,CAAC;MACfE,WAAW,CAAC,GAAG,CAAC;MAChBE,WAAW,CAAC,GAAG,CAAC;IAClB;EACF,CAAC,EAAE,CAACmD,KAAK,aAALA,KAAK,wBAAAH,WAAA,GAALG,KAAK,CAAEW,IAAI,cAAAd,WAAA,uBAAXA,WAAA,CAAaiB,GAAG,EAAEd,KAAK,aAALA,KAAK,wBAAAF,YAAA,GAALE,KAAK,CAAEW,IAAI,cAAAb,YAAA,uBAAXA,YAAA,CAAab,IAAI,EAAEe,KAAK,aAALA,KAAK,wBAAAD,YAAA,GAALC,KAAK,CAAEW,IAAI,cAAAZ,YAAA,uBAAXA,YAAA,CAAab,IAAI,CAAC,CAAC;;EAE5D;EACA;EACA;EACA5G,SAAS,CAAC,MAAM;IACd,MAAMyI,MAAM,GAAGlI,iBAAiB,CAACD,MAAM,EAAEqH,QAAQ,CAAC;IAElD,MAAMe,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;IACzD,MAAMC,WAAW,GAAGF,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;IAEzD,IAAIF,WAAW,EAAE;MACf,IAAIG,WAAW,EAAEvI,MAAM,CAACwI,IAAI,CAAC,oBAAoB,EAAE;QAAE9E,MAAM,EAAE6E;MAAY,CAAC,CAAC,CAAC,KACvEvI,MAAM,CAACwI,IAAI,CAAC,oBAAoB,CAAC;IACxC;IAEA,OAAO,MAAML,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,CAAC;EACzB,CAAC,EAAE,CAACd,QAAQ,CAAC,CAAC;;EAEd;EACA;EACA;EACA,MAAMoB,gBAAgB,GAAIlD,CAAC,IAAK;IAC9B,MAAMmD,SAAS,GAAGnD,CAAC,CAACC,MAAM,CAACf,KAAK;IAChC,IAAI,CAACiE,SAAS,IAAIA,SAAS,KAAKtB,KAAK,CAAC1D,MAAM,EAAE;IAE9C2E,YAAY,CAACM,OAAO,CAAC,eAAe,EAAED,SAAS,CAAC;IAChD1I,MAAM,CAACwI,IAAI,CAAC,oBAAoB,EAAE;MAAE9E,MAAM,EAAEgF;IAAU,CAAC,CAAC;EAC1D,CAAC;EAED,MAAME,mBAAmB,GAAGA,CAAA,KAAM;IAChCP,YAAY,CAACQ,UAAU,CAAC,eAAe,CAAC;IACxC7I,MAAM,CAACwI,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC;EACrC,CAAC;EAED,MAAMM,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAAC1B,KAAK,CAAC1D,MAAM,EAAE;IAEnB,MAAMqF,OAAO,GAAG,CAACnF,QAAQ,IAAI,EAAE,EAAEoF,IAAI,CAAC,CAAC;IACvC,IAAI,CAACD,OAAO,EAAE;;IAEd;IACA1B,QAAQ,CAAC;MACPtE,IAAI,EAAE7C,WAAW,CAAC+I,UAAU;MAC5BC,OAAO,EAAE;QAAEnB,IAAI,EAAE;UAAE/C,IAAI,EAAE+D;QAAQ;MAAE;IACrC,CAAC,CAAC;;IAEF;IACA/I,MAAM,CAACwI,IAAI,CAAC,aAAa,EAAE;MAAE9E,MAAM,EAAE0D,KAAK,CAAC1D,MAAM;MAAEsB,IAAI,EAAE+D;IAAQ,CAAC,CAAC;EACrE,CAAC;EAED,MAAMI,UAAU,GAAInD,GAAG,IAAK;IAC1B,IAAI,CAACoB,KAAK,CAAC1D,MAAM,EAAE;IACnB,MAAM0F,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,MAAM,CAACvD,GAAG,CAAC,IAAI,CAAC,CAAC;IAEzCqB,QAAQ,CAAC;MACPtE,IAAI,EAAE7C,WAAW,CAAC+I,UAAU;MAC5BC,OAAO,EAAE;QAAEnB,IAAI,EAAE;UAAE1B,IAAI,EAAE+C;QAAI;MAAE;IACjC,CAAC,CAAC;IAEFpJ,MAAM,CAACwI,IAAI,CAAC,aAAa,EAAE;MAAE9E,MAAM,EAAE0D,KAAK,CAAC1D,MAAM;MAAE2C,IAAI,EAAE+C;IAAI,CAAC,CAAC;EACjE,CAAC;EAED,MAAMI,UAAU,GAAIxD,GAAG,IAAK;IAC1B,IAAI,CAACoB,KAAK,CAAC1D,MAAM,EAAE;IACnB,MAAM0F,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,MAAM,CAACvD,GAAG,CAAC,IAAI,CAAC,CAAC;IAEzCqB,QAAQ,CAAC;MACPtE,IAAI,EAAE7C,WAAW,CAAC+I,UAAU;MAC5BC,OAAO,EAAE;QAAEnB,IAAI,EAAE;UAAEzB,IAAI,EAAE8C;QAAI;MAAE;IACjC,CAAC,CAAC;IAEFpJ,MAAM,CAACwI,IAAI,CAAC,aAAa,EAAE;MAAE9E,MAAM,EAAE0D,KAAK,CAAC1D,MAAM;MAAE4C,IAAI,EAAE8C;IAAI,CAAC,CAAC;EACjE,CAAC;EAED,MAAMK,WAAW,GAAGA,CAAA,KAAM;IAAA,IAAAC,iBAAA,EAAAC,iBAAA;IACxB,IAAI,CAACvC,KAAK,CAAC1D,MAAM,IAAI,CAAC0D,KAAK,CAACW,IAAI,EAAE;IAElC,MAAM6B,OAAO,GAAGC,MAAM,CAACC,UAAU,CAAC,CAAC;IACnC,MAAMC,WAAW,GAAG,WAAWH,OAAO,EAAE;IAExC,MAAM;MAAElD,GAAG;MAAEC;IAAI,CAAC,GAAGR,oBAAoB,CACvCiB,KAAK,CAAChB,MAAM,IAAI,EAAE,GAAAsD,iBAAA,GAClBtC,KAAK,CAACW,IAAI,CAAC1B,IAAI,cAAAqD,iBAAA,cAAAA,iBAAA,GAAI,CAAC,GAAAC,iBAAA,GACpBvC,KAAK,CAACW,IAAI,CAACzB,IAAI,cAAAqD,iBAAA,cAAAA,iBAAA,GAAI,CACrB,CAAC;;IAED;IACA,MAAMK,KAAK,GAAG;MACZjF,EAAE,EAAE6E,OAAO;MACXK,IAAI,EAAE,OAAO;MACblH,IAAI,EAAE,SAAS;MACfgH,WAAW;MACXG,KAAK,EAAE;QAAEH;MAAY,CAAC;MACtBrD,GAAG;MACHC,GAAG;MACHZ,KAAK,EAAE,CAAC;MACRoE,MAAM,EAAE,CAAC;MACTzG,MAAM,EAAE0D,KAAK,CAAC1D;IAChB,CAAC;;IAED;IACA2D,QAAQ,CAAC;MAAEtE,IAAI,EAAE7C,WAAW,CAACkK,WAAW;MAAElB,OAAO,EAAE;QAAEc;MAAM;IAAE,CAAC,CAAC;;IAE/D;IACAhK,MAAM,CAACwI,IAAI,CAAC,WAAW,EAAE;MAAEwB;IAAM,CAAC,CAAC;;IAEnC;IACA;IACA,IAAI,CAAC,CAAC5C,KAAK,CAAC7F,UAAU,IAAI,EAAE,EAAE8I,IAAI,CAAExD,CAAC,IAAKA,CAAC,CAAC9B,EAAE,KAAKgF,WAAW,CAAC,EAAE;MAC/D1C,QAAQ,CAAC;QACPtE,IAAI,EAAE7C,WAAW,CAACoK,aAAa;QAC/BpB,OAAO,EAAE;UAAEnE,EAAE,EAAEgF,WAAW;UAAEhJ,KAAK,EAAE;QAAW;MAChD,CAAC,CAAC;MAEFf,MAAM,CAACwI,IAAI,CAAC,kBAAkB,EAAE;QAC9B+B,SAAS,EAAE;UAAExF,EAAE,EAAEgF,WAAW;UAAEhJ,KAAK,EAAE;QAAU;MACjD,CAAC,CAAC;IACJ;;IAEA;IACAsG,QAAQ,CAAC;MACPtE,IAAI,EAAE7C,WAAW,CAACsK,qBAAqB;MACvCtB,OAAO,EAAE;QAAEa,WAAW;QAAEU,KAAK,EAAE;MAAG;IACpC,CAAC,CAAC;IACFzK,MAAM,CAACwI,IAAI,CAAC,wBAAwB,EAAE;MAAEuB,WAAW;MAAEU,KAAK,EAAE;IAAG,CAAC,CAAC;EACnE,CAAC;;EAED;EACA;EACA;EACA,MAAMC,SAAS,GAAG/K,OAAO,CACvB,OAAO;IACL8B,QAAQ,EAAE2F,KAAK,CAAC3F,QAAQ;IACxBkJ,UAAU,EAAEvD,KAAK,CAACuD,UAAU;IAC5BjJ,UAAU,EAAE0F,KAAK,CAAC1F,UAAU;IAE5BH,UAAU,EAAE6F,KAAK,CAAC7F,UAAU;IAC5BuG,gBAAgB;IAChB8C,SAAS,EAAExD,KAAK,CAACwD,SAAS;IAE1BC,QAAQ,EAAEzD,KAAK,CAACyD,QAAQ;IAExBC,MAAM,EAAE1D,KAAK,CAAC0D,MAAM;IACpBpH,MAAM,EAAE0D,KAAK,CAAC1D,MAAM;IACpBqE,IAAI,EAAEX,KAAK,CAACW,IAAI;IAChB3B,MAAM,EAAEgB,KAAK,CAAChB,MAAM;IACpBzC,cAAc,EAAEyD,KAAK,CAACzD,cAAc;IACpCoH,QAAQ,EAAE3D,KAAK,CAAC2D;EAClB,CAAC,CAAC,EACF,CACE3D,KAAK,CAAC3F,QAAQ,EACd2F,KAAK,CAACuD,UAAU,EAChBvD,KAAK,CAAC1F,UAAU,EAChB0F,KAAK,CAAC7F,UAAU,EAChBuG,gBAAgB,EAChBV,KAAK,CAACwD,SAAS,EACfxD,KAAK,CAACyD,QAAQ,EACdzD,KAAK,CAAC0D,MAAM,EACZ1D,KAAK,CAAC1D,MAAM,EACZ0D,KAAK,CAACW,IAAI,EACVX,KAAK,CAAChB,MAAM,EACZgB,KAAK,CAACzD,cAAc,EACpByD,KAAK,CAAC2D,QAAQ,CAElB,CAAC;EAED,MAAMC,YAAY,GAAGrL,OAAO,CAC1B,OAAO;IACL2H,YAAY;IACZC,sBAAsB;IACtBC,eAAe;IACfC,cAAc;IACdC,aAAa;IACbC,gBAAgB;IAChB7G,cAAc;IAEdmK,aAAa,EAAEA,CAAA,KAAMC,cAAc,CAAC,IAAI,CAAC;IACzCC,WAAW,EAAEA,CAAA,KAAMD,cAAc,CAAC,KAAK,CAAC;IACxC7D;EACF,CAAC,CAAC,EACF,CACEC,YAAY,EACZC,sBAAsB,EACtBC,eAAe,EACfC,cAAc,EACdC,aAAa,EACbC,gBAAgB,CAEpB,CAAC;EAED7G,cAAc,CAAC,KAAK,CAAC;;EAErB;EACA;EACA;EACA,MAAMsH,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EACzD,IAAI,CAACF,WAAW,EAAE,oBAAOvH,OAAA,CAACT,WAAW;IAAAuC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EAEtC,MAAMsI,UAAU,GAAGzL,OAAO,CACxB,OAAO;IACL0L,gBAAgB,EAAE3K,gBAAgB;IAClC4K,QAAQ,EAAE3K,QAAQ;IAClB4K,iBAAiB,EAAE9K;EACrB,CAAC,CAAC,EACF,EACF,CAAC;EAGH,oBACEI,OAAA,CAACP,kBAAkB,CAACkL,QAAQ;IAAC/G,KAAK,EAAEuG,YAAa;IAAAtI,QAAA,eAC/C7B,OAAA,CAACR,eAAe,CAACmL,QAAQ;MAAC/G,KAAK,EAAEiG,SAAU;MAAAhI,QAAA,gBACzC7B,OAAA,CAAC0C,UAAU;QACTC,IAAI,EAAEiI,WAAY;QAClBhI,OAAO,EAAEA,CAAA,KAAMyH,cAAc,CAAC,KAAK,CAAE;QACrCxH,MAAM,EAAE0D,KAAK,CAAC1D,MAAO;QACrBC,cAAc,EAAEyD,KAAK,CAACzD,cAAc,IAAI,EAAG;QAC3CC,QAAQ,EAAEA,QAAS;QACnBC,WAAW,EAAEA,WAAY;QACzBC,QAAQ,EAAEA,QAAS;QACnBC,WAAW,EAAEA,WAAY;QACzBC,QAAQ,EAAEA,QAAS;QACnBC,WAAW,EAAEA,WAAY;QACzBC,YAAY,EAAEuE,gBAAiB;QAC/BtE,eAAe,EAAEyE,mBAAoB;QACrCxE,gBAAgB,EAAE0E,cAAe;QACjCzE,YAAY,EAAE8E,UAAW;QACzB7E,YAAY,EAAEkF,UAAW;QACzBjF,UAAU,EAAEkF;MAAY;QAAA9G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CAAC,eAEFjC,OAAA,CAACS,QAAQ;QACPC,UAAU,EAAE6F,KAAK,CAAC7F,UAAW;QAC7BC,eAAe,EAAEoG,kBAAkB,CAACzG,OAAQ;QAC5CM,QAAQ,EAAE2F,KAAK,CAAC3F,QAAS;QACzBC,UAAU,EAAE0F,KAAK,CAAC1F;MAAW;QAAAiB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,eAEFjC,OAAA;QAAK4B,SAAS,EAAC,UAAU;QAAAC,QAAA,eACvB7B,OAAA;UAAK4B,SAAS,EAAC,UAAU;UAAAC,QAAA,gBACvB7B,OAAA;YAAKe,KAAK,EAAE;cAAEC,OAAO,EAAE,MAAM;cAAEU,GAAG,EAAE,EAAE;cAAEiC,UAAU,EAAE;YAAS,CAAE;YAAA9B,QAAA,gBAC7D7B,OAAA;cAAIe,KAAK,EAAE;gBAAE8J,MAAM,EAAE;cAAE,CAAE;cAAAhJ,QAAA,EAAC;YAA+B;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC9DjC,OAAA;cAAQuE,OAAO,EAAEkC,YAAa;cAAA5E,QAAA,EAAC;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACnDjC,OAAA;cAAQuE,OAAO,EAAEA,CAAA,KAAM8F,cAAc,CAAES,CAAC,IAAK,CAACA,CAAC,CAAE;cAAAjJ,QAAA,EAC9C+I,WAAW,GAAG,cAAc,GAAG;YAAc;cAAA9I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENjC,OAAA,CAACV,IAAI;YAACiL,UAAU,EAAEA;UAAW;YAAAzI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAE/BsE,KAAK,CAAC7F,UAAU,CAACyB,MAAM,KAAK,CAAC,iBAC5BnC,OAAA;YAAKe,KAAK,EAAE;cAAEgK,SAAS,EAAE,EAAE;cAAEC,OAAO,EAAE,GAAG;cAAEzJ,QAAQ,EAAE;YAAG,CAAE;YAAAM,QAAA,EAAC;UAE3D;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACkB;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAElC;AAACkE,GAAA,CAtSuBD,GAAG;EAAA,QACGxG,aAAa,EAWrCC,wBAAwB,EAqN5BM,cAAc;AAAA;AAAAgL,GAAA,GAjOQ/E,GAAG;AAAA,IAAAzD,EAAA,EAAA4C,GAAA,EAAA4F,GAAA;AAAAC,YAAA,CAAAzI,EAAA;AAAAyI,YAAA,CAAA7F,GAAA;AAAA6F,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}