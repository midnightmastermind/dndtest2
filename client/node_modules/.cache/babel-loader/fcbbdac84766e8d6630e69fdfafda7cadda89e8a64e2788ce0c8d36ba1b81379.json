{"ast":null,"code":"// client/src/state/bindSocketToStore.js\n// =========================================\n// bindSocketToStore.js — CLEAN + CONSISTENT\n// Goals:\n// - Match server.js event names + payload shapes\n// - Dispatch ActionTypes using the SAME shapes your reducer/action-creators expect\n// - Keep auth + full_state behavior correct (reconnect w/ token, then hydrate)\n// - Provide proper cleanup for HMR\n// =========================================\n\nimport { ActionTypes } from \"./actions\";\nexport function bindSocketToStore(socket, dispatch) {\n  // ======================================================\n  // FULL STATE HYDRATE\n  // ======================================================\n  function onFullState(payload = {}) {\n    console.log(\"[socket] full_state received:\", payload);\n\n    // Persist gridId like old app (if provided)\n    if (payload.gridId) {\n      localStorage.setItem(\"moduli-gridId\", payload.gridId);\n\n      // ✅ FIX: reducer/action-creators expect { gridId }\n      dispatch({\n        type: ActionTypes.SET_GRID_ID,\n        payload: {\n          gridId: payload.gridId\n        }\n      });\n    }\n    dispatch({\n      type: ActionTypes.FULL_STATE,\n      payload\n    });\n  }\n  socket.on(\"full_state\", onFullState);\n\n  // ======================================================\n  // CONTAINERS (CRUD)\n  // ======================================================\n  function onContainerCreated({\n    container\n  } = {}) {\n    if (!(container !== null && container !== void 0 && container.id)) return;\n    dispatch({\n      type: ActionTypes.CREATE_CONTAINER,\n      payload: {\n        container\n      }\n    });\n  }\n  function onContainerItemsUpdated({\n    containerId,\n    items\n  } = {}) {\n    if (!containerId || !Array.isArray(items)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER_ITEMS,\n      payload: {\n        containerId,\n        items\n      }\n    });\n  }\n\n  // forward-compat\n  function onContainerUpdated(payload = {}) {\n    const container = payload.container || payload;\n    const id = (container === null || container === void 0 ? void 0 : container.id) || payload.containerId;\n    if (!id) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: {\n        container: {\n          ...container,\n          id\n        }\n      }\n    });\n  }\n\n  // forward-compat\n  function onContainerDeleted(payload = {}) {\n    const containerId = payload.containerId || payload.id;\n    if (!containerId) return;\n    dispatch({\n      type: ActionTypes.DELETE_CONTAINER,\n      payload: {\n        containerId\n      }\n    });\n  }\n  socket.on(\"container_created\", onContainerCreated);\n  socket.on(\"container_items_updated\", onContainerItemsUpdated);\n  socket.on(\"container_updated\", onContainerUpdated);\n  socket.on(\"container_deleted\", onContainerDeleted);\n\n  // ======================================================\n  // INSTANCES (CRUD)\n  // ======================================================\n  function onInstanceCreatedInContainer({\n    containerId,\n    instance\n  } = {}) {\n    if (!containerId || !(instance !== null && instance !== void 0 && instance.id)) return;\n    dispatch({\n      type: ActionTypes.CREATE_INSTANCE_IN_CONTAINER,\n      payload: {\n        containerId,\n        instance\n      }\n    });\n  }\n  function onInstanceUpdated({\n    instance\n  } = {}) {\n    if (!(instance !== null && instance !== void 0 && instance.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_INSTANCE,\n      payload: {\n        instance\n      }\n    });\n  }\n\n  // forward-compat\n  function onInstanceDeleted(payload = {}) {\n    const instanceId = payload.instanceId || payload.id;\n    if (!instanceId) return;\n    dispatch({\n      type: ActionTypes.DELETE_INSTANCE,\n      payload: {\n        instanceId\n      }\n    });\n  }\n  socket.on(\"instance_created_in_container\", onInstanceCreatedInContainer);\n  socket.on(\"instance_updated\", onInstanceUpdated);\n  socket.on(\"instance_deleted\", onInstanceDeleted);\n\n  // ======================================================\n  // PANELS (CRUD)\n  // ======================================================\n  function onPanelUpdated(panel) {\n    if (!(panel !== null && panel !== void 0 && panel.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: {\n        panel\n      }\n    });\n  }\n\n  // forward-compat\n  function onPanelDeleted(payload = {}) {\n    const panelId = payload.panelId || payload.id;\n    if (!panelId) return;\n    dispatch({\n      type: ActionTypes.DELETE_PANEL,\n      payload: {\n        panelId\n      }\n    });\n  }\n\n  // optional alias\n  function onPanelCreated(panel) {\n    if (!(panel !== null && panel !== void 0 && panel.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: {\n        panel\n      }\n    });\n  }\n  socket.on(\"panel_updated\", onPanelUpdated);\n  socket.on(\"panel_deleted\", onPanelDeleted);\n  socket.on(\"panel_created\", onPanelCreated);\n\n  // ======================================================\n  // GRIDS (CRUD)\n  // ======================================================\n  function onGridUpdated(gridPatch = {}) {\n    dispatch({\n      type: ActionTypes.UPDATE_GRID,\n      payload: {\n        grid: gridPatch\n      }\n    });\n  }\n\n  // forward-compat\n  function onGridDeleted(payload = {}) {\n    const gridId = payload.gridId || payload.id;\n    if (!gridId) return;\n    dispatch({\n      type: ActionTypes.DELETE_GRID,\n      payload: {\n        gridId\n      }\n    });\n    const saved = localStorage.getItem(\"moduli-gridId\");\n    if (saved && saved === gridId) localStorage.removeItem(\"moduli-gridId\");\n  }\n\n  // optional alias\n  function onGridCreated(payload = {}) {\n    const grid = payload.grid || payload;\n    dispatch({\n      type: ActionTypes.CREATE_GRID,\n      payload: {\n        grid\n      }\n    });\n  }\n  socket.on(\"grid_updated\", onGridUpdated);\n  socket.on(\"grid_deleted\", onGridDeleted);\n  socket.on(\"grid_created\", onGridCreated);\n\n  // ======================================================\n  // AUTH\n  // ======================================================\n  function onAuthSuccess({\n    token,\n    userId\n  } = {}) {\n    console.log(\"[socket] auth_success\", {\n      userId\n    });\n    if (token) localStorage.setItem(\"moduli-token\", token);\n    if (userId) localStorage.setItem(\"moduli-userId\", userId);\n\n    // IMPORTANT: keep/clear based on your desired UX\n    // You currently clear grid selection on login/register:\n    localStorage.removeItem(\"moduli-gridId\");\n\n    // ✅ FIX: reducer/action-creators expect { userId }\n    dispatch({\n      type: ActionTypes.SET_USER_ID,\n      payload: {\n        userId\n      }\n    });\n\n    // Force a new handshake so io.use(auth) runs with the token\n    try {\n      socket.disconnect();\n    } catch {}\n    socket.auth = {\n      token\n    };\n    socket.connect();\n\n    // Wait for reconnect, THEN hydrate\n    socket.once(\"connect\", () => {\n      const savedGridId = localStorage.getItem(\"moduli-gridId\");\n      socket.emit(\"request_full_state\", savedGridId ? {\n        gridId: savedGridId\n      } : undefined);\n    });\n  }\n  function onAuthError(msg) {\n    console.log(\"[socket] auth_error:\", msg);\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n    dispatch({\n      type: ActionTypes.LOGOUT\n    });\n  }\n  function onConnectError(err) {\n    const msg = err === null || err === void 0 ? void 0 : err.message;\n    console.log(\"[socket] connect_error:\", msg);\n    if (msg === \"INVALID_TOKEN\" || msg === \"USER_NOT_FOUND\") {\n      localStorage.removeItem(\"moduli-token\");\n      localStorage.removeItem(\"moduli-userId\");\n      localStorage.removeItem(\"moduli-gridId\");\n      dispatch({\n        type: ActionTypes.LOGOUT\n      });\n      try {\n        socket.disconnect();\n      } catch {}\n      socket.auth = {}; // guest\n      socket.connect();\n    }\n  }\n  socket.on(\"auth_success\", onAuthSuccess);\n  socket.on(\"auth_error\", onAuthError);\n  socket.on(\"connect_error\", onConnectError);\n\n  // ======================================================\n  // SERVER ERRORS / MISC\n  // ======================================================\n  function onServerError(msg) {\n    console.warn(\"[socket] server_error:\", msg);\n  }\n  socket.on(\"server_error\", onServerError);\n\n  // ======================================================\n  // CLEANUP (important with HMR)\n  // ======================================================\n  return () => {\n    socket.off(\"full_state\", onFullState);\n    socket.off(\"container_created\", onContainerCreated);\n    socket.off(\"container_items_updated\", onContainerItemsUpdated);\n    socket.off(\"container_updated\", onContainerUpdated);\n    socket.off(\"container_deleted\", onContainerDeleted);\n    socket.off(\"instance_created_in_container\", onInstanceCreatedInContainer);\n    socket.off(\"instance_updated\", onInstanceUpdated);\n    socket.off(\"instance_deleted\", onInstanceDeleted);\n    socket.off(\"panel_updated\", onPanelUpdated);\n    socket.off(\"panel_deleted\", onPanelDeleted);\n    socket.off(\"panel_created\", onPanelCreated);\n    socket.off(\"grid_updated\", onGridUpdated);\n    socket.off(\"grid_deleted\", onGridDeleted);\n    socket.off(\"grid_created\", onGridCreated);\n    socket.off(\"auth_success\", onAuthSuccess);\n    socket.off(\"auth_error\", onAuthError);\n    socket.off(\"connect_error\", onConnectError);\n    socket.off(\"server_error\", onServerError);\n  };\n}","map":{"version":3,"names":["ActionTypes","bindSocketToStore","socket","dispatch","onFullState","payload","console","log","gridId","localStorage","setItem","type","SET_GRID_ID","FULL_STATE","on","onContainerCreated","container","id","CREATE_CONTAINER","onContainerItemsUpdated","containerId","items","Array","isArray","UPDATE_CONTAINER_ITEMS","onContainerUpdated","UPDATE_CONTAINER","onContainerDeleted","DELETE_CONTAINER","onInstanceCreatedInContainer","instance","CREATE_INSTANCE_IN_CONTAINER","onInstanceUpdated","UPDATE_INSTANCE","onInstanceDeleted","instanceId","DELETE_INSTANCE","onPanelUpdated","panel","UPDATE_PANEL","onPanelDeleted","panelId","DELETE_PANEL","onPanelCreated","onGridUpdated","gridPatch","UPDATE_GRID","grid","onGridDeleted","DELETE_GRID","saved","getItem","removeItem","onGridCreated","CREATE_GRID","onAuthSuccess","token","userId","SET_USER_ID","disconnect","auth","connect","once","savedGridId","emit","undefined","onAuthError","msg","LOGOUT","onConnectError","err","message","onServerError","warn","off"],"sources":["/data/data/com.termux/files/home/dndkittest2/client/src/state/bindSocketToStore.js"],"sourcesContent":["// client/src/state/bindSocketToStore.js\n// =========================================\n// bindSocketToStore.js — CLEAN + CONSISTENT\n// Goals:\n// - Match server.js event names + payload shapes\n// - Dispatch ActionTypes using the SAME shapes your reducer/action-creators expect\n// - Keep auth + full_state behavior correct (reconnect w/ token, then hydrate)\n// - Provide proper cleanup for HMR\n// =========================================\n\nimport { ActionTypes } from \"./actions\";\n\nexport function bindSocketToStore(socket, dispatch) {\n  // ======================================================\n  // FULL STATE HYDRATE\n  // ======================================================\n  function onFullState(payload = {}) {\n    console.log(\"[socket] full_state received:\", payload);\n\n    // Persist gridId like old app (if provided)\n    if (payload.gridId) {\n      localStorage.setItem(\"moduli-gridId\", payload.gridId);\n\n      // ✅ FIX: reducer/action-creators expect { gridId }\n      dispatch({\n        type: ActionTypes.SET_GRID_ID,\n        payload: { gridId: payload.gridId },\n      });\n    }\n\n    dispatch({ type: ActionTypes.FULL_STATE, payload });\n  }\n\n  socket.on(\"full_state\", onFullState);\n\n  // ======================================================\n  // CONTAINERS (CRUD)\n  // ======================================================\n  function onContainerCreated({ container } = {}) {\n    if (!container?.id) return;\n\n    dispatch({\n      type: ActionTypes.CREATE_CONTAINER,\n      payload: { container },\n    });\n  }\n\n  function onContainerItemsUpdated({ containerId, items } = {}) {\n    if (!containerId || !Array.isArray(items)) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER_ITEMS,\n      payload: { containerId, items },\n    });\n  }\n\n  // forward-compat\n  function onContainerUpdated(payload = {}) {\n    const container = payload.container || payload;\n    const id = container?.id || payload.containerId;\n    if (!id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: { container: { ...container, id } },\n    });\n  }\n\n  // forward-compat\n  function onContainerDeleted(payload = {}) {\n    const containerId = payload.containerId || payload.id;\n    if (!containerId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_CONTAINER,\n      payload: { containerId },\n    });\n  }\n\n  socket.on(\"container_created\", onContainerCreated);\n  socket.on(\"container_items_updated\", onContainerItemsUpdated);\n  socket.on(\"container_updated\", onContainerUpdated);\n  socket.on(\"container_deleted\", onContainerDeleted);\n\n  // ======================================================\n  // INSTANCES (CRUD)\n  // ======================================================\n  function onInstanceCreatedInContainer({ containerId, instance } = {}) {\n    if (!containerId || !instance?.id) return;\n\n    dispatch({\n      type: ActionTypes.CREATE_INSTANCE_IN_CONTAINER,\n      payload: { containerId, instance },\n    });\n  }\n\n  function onInstanceUpdated({ instance } = {}) {\n    if (!instance?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_INSTANCE,\n      payload: { instance },\n    });\n  }\n\n  // forward-compat\n  function onInstanceDeleted(payload = {}) {\n    const instanceId = payload.instanceId || payload.id;\n    if (!instanceId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_INSTANCE,\n      payload: { instanceId },\n    });\n  }\n\n  socket.on(\"instance_created_in_container\", onInstanceCreatedInContainer);\n  socket.on(\"instance_updated\", onInstanceUpdated);\n  socket.on(\"instance_deleted\", onInstanceDeleted);\n\n  // ======================================================\n  // PANELS (CRUD)\n  // ======================================================\n  function onPanelUpdated(panel) {\n    if (!panel?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: { panel },\n    });\n  }\n\n  // forward-compat\n  function onPanelDeleted(payload = {}) {\n    const panelId = payload.panelId || payload.id;\n    if (!panelId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_PANEL,\n      payload: { panelId },\n    });\n  }\n\n  // optional alias\n  function onPanelCreated(panel) {\n    if (!panel?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: { panel },\n    });\n  }\n\n  socket.on(\"panel_updated\", onPanelUpdated);\n  socket.on(\"panel_deleted\", onPanelDeleted);\n  socket.on(\"panel_created\", onPanelCreated);\n\n  // ======================================================\n  // GRIDS (CRUD)\n  // ======================================================\n  function onGridUpdated(gridPatch = {}) {\n    dispatch({\n      type: ActionTypes.UPDATE_GRID,\n      payload: { grid: gridPatch },\n    });\n  }\n\n  // forward-compat\n  function onGridDeleted(payload = {}) {\n    const gridId = payload.gridId || payload.id;\n    if (!gridId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_GRID,\n      payload: { gridId },\n    });\n\n    const saved = localStorage.getItem(\"moduli-gridId\");\n    if (saved && saved === gridId) localStorage.removeItem(\"moduli-gridId\");\n  }\n\n  // optional alias\n  function onGridCreated(payload = {}) {\n    const grid = payload.grid || payload;\n    dispatch({\n      type: ActionTypes.CREATE_GRID,\n      payload: { grid },\n    });\n  }\n\n  socket.on(\"grid_updated\", onGridUpdated);\n  socket.on(\"grid_deleted\", onGridDeleted);\n  socket.on(\"grid_created\", onGridCreated);\n\n  // ======================================================\n  // AUTH\n  // ======================================================\n  function onAuthSuccess({ token, userId } = {}) {\n    console.log(\"[socket] auth_success\", { userId });\n\n    if (token) localStorage.setItem(\"moduli-token\", token);\n    if (userId) localStorage.setItem(\"moduli-userId\", userId);\n\n    // IMPORTANT: keep/clear based on your desired UX\n    // You currently clear grid selection on login/register:\n    localStorage.removeItem(\"moduli-gridId\");\n\n    // ✅ FIX: reducer/action-creators expect { userId }\n    dispatch({\n      type: ActionTypes.SET_USER_ID,\n      payload: { userId },\n    });\n\n    // Force a new handshake so io.use(auth) runs with the token\n    try {\n      socket.disconnect();\n    } catch {}\n\n    socket.auth = { token };\n    socket.connect();\n\n    // Wait for reconnect, THEN hydrate\n    socket.once(\"connect\", () => {\n      const savedGridId = localStorage.getItem(\"moduli-gridId\");\n      socket.emit(\n        \"request_full_state\",\n        savedGridId ? { gridId: savedGridId } : undefined\n      );\n    });\n  }\n\n  function onAuthError(msg) {\n    console.log(\"[socket] auth_error:\", msg);\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n    dispatch({ type: ActionTypes.LOGOUT });\n  }\n\n  function onConnectError(err) {\n    const msg = err?.message;\n    console.log(\"[socket] connect_error:\", msg);\n\n    if (msg === \"INVALID_TOKEN\" || msg === \"USER_NOT_FOUND\") {\n      localStorage.removeItem(\"moduli-token\");\n      localStorage.removeItem(\"moduli-userId\");\n      localStorage.removeItem(\"moduli-gridId\");\n\n      dispatch({ type: ActionTypes.LOGOUT });\n\n      try {\n        socket.disconnect();\n      } catch {}\n\n      socket.auth = {}; // guest\n      socket.connect();\n    }\n  }\n\n  socket.on(\"auth_success\", onAuthSuccess);\n  socket.on(\"auth_error\", onAuthError);\n  socket.on(\"connect_error\", onConnectError);\n\n  // ======================================================\n  // SERVER ERRORS / MISC\n  // ======================================================\n  function onServerError(msg) {\n    console.warn(\"[socket] server_error:\", msg);\n  }\n  socket.on(\"server_error\", onServerError);\n\n  // ======================================================\n  // CLEANUP (important with HMR)\n  // ======================================================\n  return () => {\n    socket.off(\"full_state\", onFullState);\n\n    socket.off(\"container_created\", onContainerCreated);\n    socket.off(\"container_items_updated\", onContainerItemsUpdated);\n    socket.off(\"container_updated\", onContainerUpdated);\n    socket.off(\"container_deleted\", onContainerDeleted);\n\n    socket.off(\"instance_created_in_container\", onInstanceCreatedInContainer);\n    socket.off(\"instance_updated\", onInstanceUpdated);\n    socket.off(\"instance_deleted\", onInstanceDeleted);\n\n    socket.off(\"panel_updated\", onPanelUpdated);\n    socket.off(\"panel_deleted\", onPanelDeleted);\n    socket.off(\"panel_created\", onPanelCreated);\n\n    socket.off(\"grid_updated\", onGridUpdated);\n    socket.off(\"grid_deleted\", onGridDeleted);\n    socket.off(\"grid_created\", onGridCreated);\n\n    socket.off(\"auth_success\", onAuthSuccess);\n    socket.off(\"auth_error\", onAuthError);\n    socket.off(\"connect_error\", onConnectError);\n\n    socket.off(\"server_error\", onServerError);\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}