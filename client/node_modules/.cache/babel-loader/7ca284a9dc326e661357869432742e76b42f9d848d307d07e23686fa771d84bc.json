{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/src/SortableContainer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useMemo, useCallback } from \"react\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport { SortableContext, useSortable, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { GridDataContext } from \"./GridDataContext\";\nimport { GridActionsContext } from \"./GridActionsContext\";\nimport SortableInstance from \"./SortableInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SortableContainerInner({\n  container\n}) {\n  _s();\n  const {\n    instances\n  } = useContext(GridDataContext);\n  const {\n    addInstanceToContainer,\n    useRenderCount\n  } = useContext(GridActionsContext);\n  const onAdd = useCallback(() => addInstanceToContainer(container.id), [addInstanceToContainer, container.id]);\n  const {\n    setNodeRef,\n    attributes,\n    listeners,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({\n    id: container.id,\n    data: {\n      role: \"container\",\n      label: container.label\n    }\n  });\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.6 : 1\n  };\n  const top = useDroppable({\n    id: `top:${container.id}`,\n    data: {\n      role: \"container:top\",\n      containerId: container.id,\n      label: container.label\n    }\n  });\n  const list = useDroppable({\n    id: `list:${container.id}`,\n    data: {\n      role: \"container:list\",\n      containerId: container.id,\n      label: container.label\n    }\n  });\n  const bottom = useDroppable({\n    id: `bottom:${container.id}`,\n    data: {\n      role: \"container:bottom\",\n      containerId: container.id,\n      label: container.label\n    }\n  });\n  const instanceMap = useMemo(() => {\n    const map = {};\n    for (const inst of instances) map[inst.id] = inst;\n    return map;\n  }, [instances]);\n  const items = useMemo(() => {\n    return container.items.map(id => instanceMap[id]).filter(Boolean);\n  }, [container.items, instanceMap]);\n  const itemIds = useMemo(() => items.map(x => x.id), [items]);\n  useRenderCount(`SortableContainer ${container.id}`);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef,\n    style: style,\n    className: \"container-shell\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-header\",\n      ...attributes,\n      ...listeners,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 600\n        },\n        children: container.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onAdd,\n        children: \"+ Instance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: list.setNodeRef,\n      className: \"container-list\" + (list.isOver ? \" over\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(SortableContext, {\n        id: `container-sortable:${container.id}`,\n        items: itemIds,\n        strategy: verticalListSortingStrategy,\n        children: items.map(inst => /*#__PURE__*/_jsxDEV(SortableInstance, {\n          instance: inst,\n          containerId: container.id\n        }, inst.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          opacity: 0.6,\n          fontStyle: \"italic\"\n        },\n        children: \"Drop items here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(SortableContainerInner, \"MFJtw77r1wWfxglEHr3GKfnLuig=\", false, function () {\n  return [useSortable, useDroppable, useDroppable, useDroppable, useRenderCount];\n});\n_c = SortableContainerInner;\nexport default _c2 = /*#__PURE__*/React.memo(SortableContainerInner, (prev, next) => {\n  var _prev$container, _next$container, _prev$container2, _next$container2, _prev$container3, _next$container3;\n  // Rerender container if label changes OR items list changed\n  if (((_prev$container = prev.container) === null || _prev$container === void 0 ? void 0 : _prev$container.id) !== ((_next$container = next.container) === null || _next$container === void 0 ? void 0 : _next$container.id)) return false;\n  if (((_prev$container2 = prev.container) === null || _prev$container2 === void 0 ? void 0 : _prev$container2.label) !== ((_next$container2 = next.container) === null || _next$container2 === void 0 ? void 0 : _next$container2.label)) return false;\n  const a = ((_prev$container3 = prev.container) === null || _prev$container3 === void 0 ? void 0 : _prev$container3.items) || [];\n  const b = ((_next$container3 = next.container) === null || _next$container3 === void 0 ? void 0 : _next$container3.items) || [];\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false;\n  return true;\n});\nvar _c, _c2;\n$RefreshReg$(_c, \"SortableContainerInner\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useContext","useMemo","useCallback","useDroppable","SortableContext","useSortable","verticalListSortingStrategy","CSS","GridDataContext","GridActionsContext","SortableInstance","jsxDEV","_jsxDEV","SortableContainerInner","container","_s","instances","addInstanceToContainer","useRenderCount","onAdd","id","setNodeRef","attributes","listeners","transform","transition","isDragging","data","role","label","style","Transform","toString","opacity","top","containerId","list","bottom","instanceMap","map","inst","items","filter","Boolean","itemIds","x","ref","className","children","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","onClick","isOver","strategy","instance","length","fontSize","fontStyle","_c","_c2","memo","prev","next","_prev$container","_next$container","_prev$container2","_next$container2","_prev$container3","_next$container3","a","b","i","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/src/SortableContainer.jsx"],"sourcesContent":["import React, { useContext, useMemo, useCallback } from \"react\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  useSortable,\n  verticalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\n\nimport { GridDataContext } from \"./GridDataContext\";\nimport { GridActionsContext } from \"./GridActionsContext\";\nimport SortableInstance from \"./SortableInstance\";\n\nfunction SortableContainerInner({ container }) {\n  const { instances } = useContext(GridDataContext);\n  const { addInstanceToContainer, useRenderCount } = useContext(GridActionsContext);\n\n  const onAdd = useCallback(() => addInstanceToContainer(container.id), [\n    addInstanceToContainer,\n    container.id,\n  ]);\n\n  const { setNodeRef, attributes, listeners, transform, transition, isDragging } =\n    useSortable({\n      id: container.id,\n      data: { role: \"container\", label: container.label },\n    });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.6 : 1,\n  };\n\n  const top = useDroppable({\n    id: `top:${container.id}`,\n    data: { role: \"container:top\", containerId: container.id, label: container.label },\n  });\n\n  const list = useDroppable({\n    id: `list:${container.id}`,\n    data: { role: \"container:list\", containerId: container.id, label: container.label },\n  });\n\n  const bottom = useDroppable({\n    id: `bottom:${container.id}`,\n    data: { role: \"container:bottom\", containerId: container.id, label: container.label },\n  });\n\n  const instanceMap = useMemo(() => {\n    const map = {};\n    for (const inst of instances) map[inst.id] = inst;\n    return map;\n  }, [instances]);\n\n  const items = useMemo(() => {\n    return container.items.map((id) => instanceMap[id]).filter(Boolean);\n  }, [container.items, instanceMap]);\n\n  const itemIds = useMemo(() => items.map((x) => x.id), [items]);\n\n  useRenderCount(`SortableContainer ${container.id}`);\n\n  return (\n    <div ref={setNodeRef} style={style} className=\"container-shell\">\n      <div className=\"container-header\" {...attributes} {...listeners}>\n        <div style={{ fontWeight: 600 }}>{container.label}</div>\n        <button onClick={onAdd}>+ Instance</button>\n      </div>\n\n      <div\n        ref={list.setNodeRef}\n        className={\"container-list\" + (list.isOver ? \" over\" : \"\")}\n      >\n        <SortableContext\n          id={`container-sortable:${container.id}`}\n          items={itemIds}\n          strategy={verticalListSortingStrategy}\n        >\n          {items.map((inst) => (\n            <SortableInstance key={inst.id} instance={inst} containerId={container.id} />\n          ))}\n        </SortableContext>\n\n        {items.length === 0 && (\n          <div style={{ fontSize: 12, opacity: 0.6, fontStyle: \"italic\" }}>\n            Drop items here\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(SortableContainerInner, (prev, next) => {\n  // Rerender container if label changes OR items list changed\n  if (prev.container?.id !== next.container?.id) return false;\n  if (prev.container?.label !== next.container?.label) return false;\n\n  const a = prev.container?.items || [];\n  const b = next.container?.items || [];\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false;\n\n  return true;\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}