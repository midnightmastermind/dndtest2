{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { COMMERCIAL, FEDRAMP_FEDEX, FEDRAMP_MODERATE, PRODUCTION, STAGING } from '../../../common/constants/host-based-lookup/constants';\nimport { domainMap, fullDomainOverride, subdomainOverride } from '../../../common/constants/host-based-lookup/constants/domains';\nimport { AllowedDomains } from '../../../common/constants/host-based-lookup/types';\nexport function configure(data) {\n  if (!data || Object.keys(data).length < 1) {\n    throw new Error('Data are not available');\n  }\n\n  // @ts-ignore - This is causing ts errors when this package is being enrolled into jira local consumption so temporarily ts ignoring this line for now\n  globalThis.ATL_CONTEXT_DOMAIN = data;\n}\nfunction isValidDomainKey(domainKey) {\n  if (!AllowedDomains.includes(domainKey)) {\n    return false;\n  }\n  return true;\n}\nexport function getATLContextDomain(domain, environment) {\n  var _domainMap$perimeter$, _domainMap$perimeter, _subdomainOverride$do;\n  // Validate this is a valid domain\n  if (!isValidDomainKey(domain)) {\n    throw new Error(\"Domain \".concat(domain, \" is not supported.\\n      Supported domains: \").concat(AllowedDomains.join(', ')));\n  }\n\n  // First priority, always return the global context if the product has onboarded\n  // @ts-ignore - This is causing ts errors when this package is being enrolled into jira local consumption so temporarily ts ignoring this line for now\n  var data = globalThis.ATL_CONTEXT_DOMAIN;\n  if (data) {\n    return data[domain];\n  }\n  var _ref = environment !== null && environment !== void 0 ? environment : _getEnvironmentFromDomain(),\n    _ref2 = _slicedToArray(_ref, 2),\n    env = _ref2[0],\n    perimeter = _ref2[1];\n\n  // Second priority, return if there is a full domain override\n  var override = fullDomainOverride[domain];\n  if (override) {\n    var _override$perimeter$e, _override$perimeter;\n    return (\n      // Exact match preferred\n      (_override$perimeter$e = (_override$perimeter = override[perimeter]) === null || _override$perimeter === void 0 ? void 0 : _override$perimeter[env]) !== null && _override$perimeter$e !== void 0 ? _override$perimeter$e : override[COMMERCIAL][PRODUCTION] // Fallback to mandatory commercial production\n    );\n  }\n\n  // Third priority, join the subdomain\n  var tld = (_domainMap$perimeter$ = (_domainMap$perimeter = domainMap[perimeter]) === null || _domainMap$perimeter === void 0 ? void 0 : _domainMap$perimeter[env]) !== null && _domainMap$perimeter$ !== void 0 ? _domainMap$perimeter$ : domainMap[COMMERCIAL][PRODUCTION];\n  var subdomain = (_subdomainOverride$do = subdomainOverride[domain]) !== null && _subdomainOverride$do !== void 0 ? _subdomainOverride$do : domain;\n  return \"\".concat(subdomain, \".\").concat(tld);\n}\nexport function getATLContextUrl(domain) {\n  return \"\".concat(globalThis.location.protocol, \"//\").concat(getATLContextDomain(domain));\n}\nexport function _getEnvironmentFromDomain() {\n  var _globalThis$location;\n  var hostname = (_globalThis$location = globalThis.location) === null || _globalThis$location === void 0 ? void 0 : _globalThis$location.hostname;\n  if (!hostname) {\n    // default if no location available\n    return [PRODUCTION, COMMERCIAL];\n  }\n\n  // *.atlassian-fex.com\n  if (hostname.match(/atlassian-fex\\.com/)) {\n    return [STAGING, FEDRAMP_FEDEX];\n  }\n\n  // *.stg.atlassian-us-gov-mod.com OR *.stg.atlassian-us-gov-mod.net\n  if (hostname.match(/stg\\.atlassian-us-gov-mod\\.(com|net)/)) {\n    return [STAGING, FEDRAMP_MODERATE];\n  }\n\n  // *.atlassian-stg-fedm.net\n  if (hostname.match(/atlassian-stg-fedm\\.net/)) {\n    return [STAGING, FEDRAMP_MODERATE];\n  }\n\n  // *.atlassian-us-gov-mod.com OR *.atlassian-us-gov-mod.net\n  if (hostname.match(/atlassian-us-gov-mod\\.(com|net)/)) {\n    return [PRODUCTION, FEDRAMP_MODERATE];\n  }\n\n  // *.stg.atlassian.com OR *.stg.internal.atlassian.com\n  if (hostname.match(/stg(\\.internal)?\\.atlassian\\.com/)) {\n    return [STAGING, COMMERCIAL];\n  }\n\n  // *.jira-dev.com\n  if (hostname.match(/jira-dev\\.com/)) {\n    return [STAGING, COMMERCIAL];\n  }\n\n  // default fallthrough\n  return [PRODUCTION, COMMERCIAL];\n}","map":{"version":3,"names":["_slicedToArray","COMMERCIAL","FEDRAMP_FEDEX","FEDRAMP_MODERATE","PRODUCTION","STAGING","domainMap","fullDomainOverride","subdomainOverride","AllowedDomains","configure","data","Object","keys","length","Error","globalThis","ATL_CONTEXT_DOMAIN","isValidDomainKey","domainKey","includes","getATLContextDomain","domain","environment","_domainMap$perimeter$","_domainMap$perimeter","_subdomainOverride$do","concat","join","_ref","_getEnvironmentFromDomain","_ref2","env","perimeter","override","_override$perimeter$e","_override$perimeter","tld","subdomain","getATLContextUrl","location","protocol","_globalThis$location","hostname","match"],"sources":["/data/data/com.termux/files/home/dndkittest2/client/node_modules/@atlaskit/atlassian-context/dist/esm/services/host-based-lookup/domain-lookup/index.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { COMMERCIAL, FEDRAMP_FEDEX, FEDRAMP_MODERATE, PRODUCTION, STAGING } from '../../../common/constants/host-based-lookup/constants';\nimport { domainMap, fullDomainOverride, subdomainOverride } from '../../../common/constants/host-based-lookup/constants/domains';\nimport { AllowedDomains } from '../../../common/constants/host-based-lookup/types';\nexport function configure(data) {\n  if (!data || Object.keys(data).length < 1) {\n    throw new Error('Data are not available');\n  }\n\n  // @ts-ignore - This is causing ts errors when this package is being enrolled into jira local consumption so temporarily ts ignoring this line for now\n  globalThis.ATL_CONTEXT_DOMAIN = data;\n}\nfunction isValidDomainKey(domainKey) {\n  if (!AllowedDomains.includes(domainKey)) {\n    return false;\n  }\n  return true;\n}\nexport function getATLContextDomain(domain, environment) {\n  var _domainMap$perimeter$, _domainMap$perimeter, _subdomainOverride$do;\n  // Validate this is a valid domain\n  if (!isValidDomainKey(domain)) {\n    throw new Error(\"Domain \".concat(domain, \" is not supported.\\n      Supported domains: \").concat(AllowedDomains.join(', ')));\n  }\n\n  // First priority, always return the global context if the product has onboarded\n  // @ts-ignore - This is causing ts errors when this package is being enrolled into jira local consumption so temporarily ts ignoring this line for now\n  var data = globalThis.ATL_CONTEXT_DOMAIN;\n  if (data) {\n    return data[domain];\n  }\n  var _ref = environment !== null && environment !== void 0 ? environment : _getEnvironmentFromDomain(),\n    _ref2 = _slicedToArray(_ref, 2),\n    env = _ref2[0],\n    perimeter = _ref2[1];\n\n  // Second priority, return if there is a full domain override\n  var override = fullDomainOverride[domain];\n  if (override) {\n    var _override$perimeter$e, _override$perimeter;\n    return (// Exact match preferred\n      (_override$perimeter$e = (_override$perimeter = override[perimeter]) === null || _override$perimeter === void 0 ? void 0 : _override$perimeter[env]) !== null && _override$perimeter$e !== void 0 ? _override$perimeter$e : override[COMMERCIAL][PRODUCTION] // Fallback to mandatory commercial production\n    );\n  }\n\n  // Third priority, join the subdomain\n  var tld = (_domainMap$perimeter$ = (_domainMap$perimeter = domainMap[perimeter]) === null || _domainMap$perimeter === void 0 ? void 0 : _domainMap$perimeter[env]) !== null && _domainMap$perimeter$ !== void 0 ? _domainMap$perimeter$ : domainMap[COMMERCIAL][PRODUCTION];\n  var subdomain = (_subdomainOverride$do = subdomainOverride[domain]) !== null && _subdomainOverride$do !== void 0 ? _subdomainOverride$do : domain;\n  return \"\".concat(subdomain, \".\").concat(tld);\n}\nexport function getATLContextUrl(domain) {\n  return \"\".concat(globalThis.location.protocol, \"//\").concat(getATLContextDomain(domain));\n}\nexport function _getEnvironmentFromDomain() {\n  var _globalThis$location;\n  var hostname = (_globalThis$location = globalThis.location) === null || _globalThis$location === void 0 ? void 0 : _globalThis$location.hostname;\n  if (!hostname) {\n    // default if no location available\n    return [PRODUCTION, COMMERCIAL];\n  }\n\n  // *.atlassian-fex.com\n  if (hostname.match(/atlassian-fex\\.com/)) {\n    return [STAGING, FEDRAMP_FEDEX];\n  }\n\n  // *.stg.atlassian-us-gov-mod.com OR *.stg.atlassian-us-gov-mod.net\n  if (hostname.match(/stg\\.atlassian-us-gov-mod\\.(com|net)/)) {\n    return [STAGING, FEDRAMP_MODERATE];\n  }\n\n  // *.atlassian-stg-fedm.net\n  if (hostname.match(/atlassian-stg-fedm\\.net/)) {\n    return [STAGING, FEDRAMP_MODERATE];\n  }\n\n  // *.atlassian-us-gov-mod.com OR *.atlassian-us-gov-mod.net\n  if (hostname.match(/atlassian-us-gov-mod\\.(com|net)/)) {\n    return [PRODUCTION, FEDRAMP_MODERATE];\n  }\n\n  // *.stg.atlassian.com OR *.stg.internal.atlassian.com\n  if (hostname.match(/stg(\\.internal)?\\.atlassian\\.com/)) {\n    return [STAGING, COMMERCIAL];\n  }\n\n  // *.jira-dev.com\n  if (hostname.match(/jira-dev\\.com/)) {\n    return [STAGING, COMMERCIAL];\n  }\n\n  // default fallthrough\n  return [PRODUCTION, COMMERCIAL];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}