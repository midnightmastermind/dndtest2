{"ast":null,"code":"// socket.js â€” optimized client with user auth\nimport { io } from \"socket.io-client\";\nconst URL = \"http://localhost:5000\";\nexport function connectSocket() {\n  const token = localStorage.getItem(\"moduli-token\") || null;\n  return io(URL, {\n    transports: [\"websocket\"],\n    auth: {\n      token\n    },\n    // ðŸ”¥ send token when connecting\n    reconnection: true,\n    reconnectionDelay: 500,\n    reconnectionDelayMax: 3000,\n    reconnectionAttempts: Infinity,\n    autoConnect: true\n  });\n}\nexport const socket = connectSocket();\n\n// BUFFER (unchanged)\nlet buffer = [];\nsocket.on(\"connect\", () => {\n  console.log(\"[socket] connected:\", socket.id);\n  buffer.forEach(({\n    event,\n    payload\n  }) => socket.emit(event, payload));\n  buffer = [];\n});\nexport function emit(event, payload) {\n  if (!socket.connected) buffer.push({\n    event,\n    payload\n  });else socket.emit(event, payload);\n}","map":{"version":3,"names":["io","URL","connectSocket","token","localStorage","getItem","transports","auth","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","Infinity","autoConnect","socket","buffer","on","console","log","id","forEach","event","payload","emit","connected","push"],"sources":["/home/joshpoms/dndtest2/client/src/socket.js"],"sourcesContent":["// socket.js â€” optimized client with user auth\nimport { io } from \"socket.io-client\";\n\nconst URL = \"http://localhost:5000\";\n\nexport function connectSocket() {\n  const token = localStorage.getItem(\"moduli-token\") || null;\n\n  return io(URL, {\n    transports: [\"websocket\"],\n    auth: { token },               // ðŸ”¥ send token when connecting\n    reconnection: true,\n    reconnectionDelay: 500,\n    reconnectionDelayMax: 3000,\n    reconnectionAttempts: Infinity,\n    autoConnect: true\n  });\n}\n\nexport const socket = connectSocket();\n\n// BUFFER (unchanged)\nlet buffer = [];\n\nsocket.on(\"connect\", () => {\n  console.log(\"[socket] connected:\", socket.id);\n\n  buffer.forEach(({ event, payload }) => socket.emit(event, payload));\n  buffer = [];\n});\n\nexport function emit(event, payload) {\n  if (!socket.connected) buffer.push({ event, payload });\n  else socket.emit(event, payload);\n}\n"],"mappings":"AAAA;AACA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,GAAG,GAAG,uBAAuB;AAEnC,OAAO,SAASC,aAAaA,CAAA,EAAG;EAC9B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI;EAE1D,OAAOL,EAAE,CAACC,GAAG,EAAE;IACbK,UAAU,EAAE,CAAC,WAAW,CAAC;IACzBC,IAAI,EAAE;MAAEJ;IAAM,CAAC;IAAgB;IAC/BK,YAAY,EAAE,IAAI;IAClBC,iBAAiB,EAAE,GAAG;IACtBC,oBAAoB,EAAE,IAAI;IAC1BC,oBAAoB,EAAEC,QAAQ;IAC9BC,WAAW,EAAE;EACf,CAAC,CAAC;AACJ;AAEA,OAAO,MAAMC,MAAM,GAAGZ,aAAa,CAAC,CAAC;;AAErC;AACA,IAAIa,MAAM,GAAG,EAAE;AAEfD,MAAM,CAACE,EAAE,CAAC,SAAS,EAAE,MAAM;EACzBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEJ,MAAM,CAACK,EAAE,CAAC;EAE7CJ,MAAM,CAACK,OAAO,CAAC,CAAC;IAAEC,KAAK;IAAEC;EAAQ,CAAC,KAAKR,MAAM,CAACS,IAAI,CAACF,KAAK,EAAEC,OAAO,CAAC,CAAC;EACnEP,MAAM,GAAG,EAAE;AACb,CAAC,CAAC;AAEF,OAAO,SAASQ,IAAIA,CAACF,KAAK,EAAEC,OAAO,EAAE;EACnC,IAAI,CAACR,MAAM,CAACU,SAAS,EAAET,MAAM,CAACU,IAAI,CAAC;IAAEJ,KAAK;IAAEC;EAAQ,CAAC,CAAC,CAAC,KAClDR,MAAM,CAACS,IAAI,CAACF,KAAK,EAAEC,OAAO,CAAC;AAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}