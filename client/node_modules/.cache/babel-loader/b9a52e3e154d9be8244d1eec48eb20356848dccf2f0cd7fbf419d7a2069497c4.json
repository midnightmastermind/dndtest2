{"ast":null,"code":"// state/bindSocketToStore.js\n// =========================================\n// bindSocketToStore.js — UPDATED (Aligned w/ server.js naming)\n// Goals:\n// - Match backend event naming + payload shapes\n// - Support full CRUD (create/update/delete) for:\n//   grid, panel, container, instance\n// - Keep auth + full_state behavior the same\n// - Back-compat: also listen to older event names when possible\n// =========================================\n\nimport { ActionTypes } from \"./actions\";\nexport function bindSocketToStore(socket, dispatch) {\n  // ======================================================\n  // FULL STATE HYDRATE\n  // (DO NOT CHANGE request_full_state behavior on server)\n  // ======================================================\n  socket.on(\"full_state\", (payload = {}) => {\n    console.log(\"[socket] full_state received:\", payload);\n\n    // Persist gridId like old app (if provided)\n    if (payload.gridId) {\n      localStorage.setItem(\"moduli-gridId\", payload.gridId);\n      dispatch({\n        type: ActionTypes.SET_GRID_ID,\n        payload: payload.gridId\n      });\n    }\n    dispatch({\n      type: ActionTypes.FULL_STATE,\n      payload\n    });\n  });\n\n  // ======================================================\n  // CONTAINERS (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // ======================================================\n\n  // ✅ preferred (new): container_updated\n  socket.on(\"container_updated\", (payload = {}) => {\n    // accept either { container } or { containerId, items, label } shapes\n    const container = payload.container || payload;\n    const containerId = container.id || payload.containerId;\n    if (!containerId) return;\n\n    // If your reducer expects full container object, keep it on payload.container\n    // Otherwise you can map to the reducer shape here.\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: {\n        container: {\n          ...container,\n          id: containerId\n        }\n      }\n    });\n  });\n\n  // ✅ preferred (new): container_deleted\n  socket.on(\"container_deleted\", (payload = {}) => {\n    const containerId = payload.containerId || payload.id;\n    if (!containerId) return;\n    dispatch({\n      type: ActionTypes.DELETE_CONTAINER,\n      payload: {\n        containerId\n      }\n    });\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"container_created\", ({\n    container\n  } = {}) => {\n    if (!(container !== null && container !== void 0 && container.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: {\n        container\n      }\n    });\n  });\n  socket.on(\"container_items_updated\", ({\n    containerId,\n    items\n  } = {}) => {\n    if (!containerId || !Array.isArray(items)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: {\n        container: {\n          id: containerId,\n          items\n        }\n      }\n    });\n  });\n\n  // ======================================================\n  // INSTANCES (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // ======================================================\n\n  // ✅ preferred (new): instance_updated\n  socket.on(\"instance_updated\", (payload = {}) => {\n    // accept either { instance } or direct instance object\n    const instance = payload.instance || payload;\n    if (!(instance !== null && instance !== void 0 && instance.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_INSTANCE,\n      payload: {\n        instance\n      }\n    });\n  });\n\n  // ✅ preferred (new): instance_deleted\n  socket.on(\"instance_deleted\", (payload = {}) => {\n    const instanceId = payload.instanceId || payload.id;\n    if (!instanceId) return;\n    dispatch({\n      type: ActionTypes.DELETE_INSTANCE,\n      payload: {\n        instanceId\n      }\n    });\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"instance_created_in_container\", ({\n    containerId,\n    instance\n  } = {}) => {\n    if (!containerId || !(instance !== null && instance !== void 0 && instance.id)) return;\n    dispatch({\n      type: ActionTypes.ADD_INSTANCE_TO_CONTAINER,\n      payload: {\n        containerId,\n        instance\n      }\n    });\n  });\n\n  // ======================================================\n  // PANELS (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // ======================================================\n\n  // ✅ preferred (new): panel_updated\n  socket.on(\"panel_updated\", panel => {\n    if (!(panel !== null && panel !== void 0 && panel.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: {\n        panel\n      }\n    });\n  });\n\n  // ✅ preferred (new): panel_deleted\n  socket.on(\"panel_deleted\", (payload = {}) => {\n    const panelId = payload.panelId || payload.id;\n    if (!panelId) return;\n    dispatch({\n      type: ActionTypes.DELETE_PANEL,\n      payload: {\n        panelId\n      }\n    });\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"panel_created\", panel => {\n    if (!(panel !== null && panel !== void 0 && panel.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: {\n        panel\n      }\n    });\n  });\n\n  // ======================================================\n  // GRIDS (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // NOTE: request_full_state creates grid when gridId missing (unchanged)\n  // ======================================================\n\n  // ✅ preferred (new): grid_updated\n  socket.on(\"grid_updated\", (payload = {}) => {\n    // accept either { gridId, grid } or a patch object\n    const grid = payload.grid || payload;\n    dispatch({\n      type: ActionTypes.UPDATE_GRID,\n      payload: {\n        grid\n      }\n    });\n  });\n\n  // ✅ preferred (new): grid_deleted\n  socket.on(\"grid_deleted\", (payload = {}) => {\n    const gridId = payload.gridId || payload.id;\n    if (!gridId) return;\n    dispatch({\n      type: ActionTypes.DELETE_GRID,\n      payload: {\n        gridId\n      }\n    });\n\n    // if you deleted the active grid, clear persisted selection\n    const saved = localStorage.getItem(\"moduli-gridId\");\n    if (saved && saved === gridId) localStorage.removeItem(\"moduli-gridId\");\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"grid_created\", (payload = {}) => {\n    const grid = payload.grid || payload;\n    dispatch({\n      type: ActionTypes.UPDATE_GRID,\n      payload: {\n        grid\n      }\n    });\n  });\n\n  // ======================================================\n  // AUTH (old behavior)\n  // ======================================================\n  socket.on(\"auth_success\", ({\n    token,\n    userId\n  }) => {\n    console.log(\"[socket] auth_success\", {\n      userId\n    });\n    localStorage.setItem(\"moduli-token\", token);\n    localStorage.setItem(\"moduli-userId\", userId);\n    localStorage.removeItem(\"moduli-gridId\");\n\n    // easiest: reload so socket.js re-auths cleanly\n    window.location.reload();\n  });\n  socket.on(\"auth_error\", msg => {\n    console.log(\"[socket] auth_error:\", msg);\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n  });\n  socket.on(\"connect_error\", err => {\n    console.log(\"[socket] connect_error:\", err === null || err === void 0 ? void 0 : err.message);\n    if ((err === null || err === void 0 ? void 0 : err.message) === \"INVALID_TOKEN\" || (err === null || err === void 0 ? void 0 : err.message) === \"USER_NOT_FOUND\") {\n      localStorage.removeItem(\"moduli-token\");\n      localStorage.removeItem(\"moduli-userId\");\n      localStorage.removeItem(\"moduli-gridId\");\n      window.location.reload();\n    }\n  });\n\n  // ======================================================\n  // SERVER ERRORS / MISC\n  // ======================================================\n  socket.on(\"server_error\", msg => {\n    console.warn(\"[socket] server_error:\", msg);\n  });\n\n  // ======================================================\n  // CLEANUP (important with HMR)\n  // ======================================================\n  return () => {\n    // full_state\n    socket.off(\"full_state\");\n\n    // containers\n    socket.off(\"container_updated\");\n    socket.off(\"container_deleted\");\n    socket.off(\"container_created\");\n    socket.off(\"container_items_updated\");\n\n    // instances\n    socket.off(\"instance_updated\");\n    socket.off(\"instance_deleted\");\n    socket.off(\"instance_created_in_container\");\n\n    // panels\n    socket.off(\"panel_updated\");\n    socket.off(\"panel_deleted\");\n    socket.off(\"panel_created\");\n\n    // grids\n    socket.off(\"grid_updated\");\n    socket.off(\"grid_deleted\");\n    socket.off(\"grid_created\");\n\n    // auth\n    socket.off(\"auth_success\");\n    socket.off(\"auth_error\");\n    socket.off(\"connect_error\");\n\n    // misc\n    socket.off(\"server_error\");\n  };\n}","map":{"version":3,"names":["ActionTypes","bindSocketToStore","socket","dispatch","on","payload","console","log","gridId","localStorage","setItem","type","SET_GRID_ID","FULL_STATE","container","containerId","id","UPDATE_CONTAINER","DELETE_CONTAINER","items","Array","isArray","instance","UPDATE_INSTANCE","instanceId","DELETE_INSTANCE","ADD_INSTANCE_TO_CONTAINER","panel","UPDATE_PANEL","panelId","DELETE_PANEL","grid","UPDATE_GRID","DELETE_GRID","saved","getItem","removeItem","token","userId","window","location","reload","msg","err","message","warn","off"],"sources":["/home/joshpoms/dndtest2/client/src/state/bindSocketToStore.js"],"sourcesContent":["// state/bindSocketToStore.js\n// =========================================\n// bindSocketToStore.js — UPDATED (Aligned w/ server.js naming)\n// Goals:\n// - Match backend event naming + payload shapes\n// - Support full CRUD (create/update/delete) for:\n//   grid, panel, container, instance\n// - Keep auth + full_state behavior the same\n// - Back-compat: also listen to older event names when possible\n// =========================================\n\nimport { ActionTypes } from \"./actions\";\n\nexport function bindSocketToStore(socket, dispatch) {\n  // ======================================================\n  // FULL STATE HYDRATE\n  // (DO NOT CHANGE request_full_state behavior on server)\n  // ======================================================\n  socket.on(\"full_state\", (payload = {}) => {\n    console.log(\"[socket] full_state received:\", payload);\n\n    // Persist gridId like old app (if provided)\n    if (payload.gridId) {\n      localStorage.setItem(\"moduli-gridId\", payload.gridId);\n      dispatch({ type: ActionTypes.SET_GRID_ID, payload: payload.gridId });\n    }\n\n    dispatch({ type: ActionTypes.FULL_STATE, payload });\n  });\n\n  // ======================================================\n  // CONTAINERS (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // ======================================================\n\n  // ✅ preferred (new): container_updated\n  socket.on(\"container_updated\", (payload = {}) => {\n    // accept either { container } or { containerId, items, label } shapes\n    const container = payload.container || payload;\n    const containerId = container.id || payload.containerId;\n    if (!containerId) return;\n\n    // If your reducer expects full container object, keep it on payload.container\n    // Otherwise you can map to the reducer shape here.\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: { container: { ...container, id: containerId } },\n    });\n  });\n\n  // ✅ preferred (new): container_deleted\n  socket.on(\"container_deleted\", (payload = {}) => {\n    const containerId = payload.containerId || payload.id;\n    if (!containerId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_CONTAINER,\n      payload: { containerId },\n    });\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"container_created\", ({ container } = {}) => {\n    if (!container?.id) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: { container },\n    });\n  });\n\n  socket.on(\"container_items_updated\", ({ containerId, items } = {}) => {\n    if (!containerId || !Array.isArray(items)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: { container: { id: containerId, items } },\n    });\n  });\n\n  // ======================================================\n  // INSTANCES (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // ======================================================\n\n  // ✅ preferred (new): instance_updated\n  socket.on(\"instance_updated\", (payload = {}) => {\n    // accept either { instance } or direct instance object\n    const instance = payload.instance || payload;\n    if (!instance?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_INSTANCE,\n      payload: { instance },\n    });\n  });\n\n  // ✅ preferred (new): instance_deleted\n  socket.on(\"instance_deleted\", (payload = {}) => {\n    const instanceId = payload.instanceId || payload.id;\n    if (!instanceId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_INSTANCE,\n      payload: { instanceId },\n    });\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"instance_created_in_container\", ({ containerId, instance } = {}) => {\n    if (!containerId || !instance?.id) return;\n    dispatch({\n      type: ActionTypes.ADD_INSTANCE_TO_CONTAINER,\n      payload: { containerId, instance },\n    });\n  });\n\n  // ======================================================\n  // PANELS (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // ======================================================\n\n  // ✅ preferred (new): panel_updated\n  socket.on(\"panel_updated\", (panel) => {\n    if (!panel?.id) return;\n    dispatch({ type: ActionTypes.UPDATE_PANEL, payload: { panel } });\n  });\n\n  // ✅ preferred (new): panel_deleted\n  socket.on(\"panel_deleted\", (payload = {}) => {\n    const panelId = payload.panelId || payload.id;\n    if (!panelId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_PANEL,\n      payload: { panelId },\n    });\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"panel_created\", (panel) => {\n    if (!panel?.id) return;\n    dispatch({ type: ActionTypes.UPDATE_PANEL, payload: { panel } });\n  });\n\n  // ======================================================\n  // GRIDS (CRUD)\n  // Convention: update_* does upsert (create-or-update)\n  // NOTE: request_full_state creates grid when gridId missing (unchanged)\n  // ======================================================\n\n  // ✅ preferred (new): grid_updated\n  socket.on(\"grid_updated\", (payload = {}) => {\n    // accept either { gridId, grid } or a patch object\n    const grid = payload.grid || payload;\n    dispatch({ type: ActionTypes.UPDATE_GRID, payload: { grid } });\n  });\n\n  // ✅ preferred (new): grid_deleted\n  socket.on(\"grid_deleted\", (payload = {}) => {\n    const gridId = payload.gridId || payload.id;\n    if (!gridId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_GRID,\n      payload: { gridId },\n    });\n\n    // if you deleted the active grid, clear persisted selection\n    const saved = localStorage.getItem(\"moduli-gridId\");\n    if (saved && saved === gridId) localStorage.removeItem(\"moduli-gridId\");\n  });\n\n  // ----------------------------\n  // Back-compat (old events)\n  // ----------------------------\n  socket.on(\"grid_created\", (payload = {}) => {\n    const grid = payload.grid || payload;\n    dispatch({ type: ActionTypes.UPDATE_GRID, payload: { grid } });\n  });\n\n  // ======================================================\n  // AUTH (old behavior)\n  // ======================================================\n  socket.on(\"auth_success\", ({ token, userId }) => {\n    console.log(\"[socket] auth_success\", { userId });\n\n    localStorage.setItem(\"moduli-token\", token);\n    localStorage.setItem(\"moduli-userId\", userId);\n    localStorage.removeItem(\"moduli-gridId\");\n\n    // easiest: reload so socket.js re-auths cleanly\n    window.location.reload();\n  });\n\n  socket.on(\"auth_error\", (msg) => {\n    console.log(\"[socket] auth_error:\", msg);\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n  });\n\n  socket.on(\"connect_error\", (err) => {\n    console.log(\"[socket] connect_error:\", err?.message);\n\n    if (err?.message === \"INVALID_TOKEN\" || err?.message === \"USER_NOT_FOUND\") {\n      localStorage.removeItem(\"moduli-token\");\n      localStorage.removeItem(\"moduli-userId\");\n      localStorage.removeItem(\"moduli-gridId\");\n      window.location.reload();\n    }\n  });\n\n  // ======================================================\n  // SERVER ERRORS / MISC\n  // ======================================================\n  socket.on(\"server_error\", (msg) => {\n    console.warn(\"[socket] server_error:\", msg);\n  });\n\n  // ======================================================\n  // CLEANUP (important with HMR)\n  // ======================================================\n  return () => {\n    // full_state\n    socket.off(\"full_state\");\n\n    // containers\n    socket.off(\"container_updated\");\n    socket.off(\"container_deleted\");\n    socket.off(\"container_created\");\n    socket.off(\"container_items_updated\");\n\n    // instances\n    socket.off(\"instance_updated\");\n    socket.off(\"instance_deleted\");\n    socket.off(\"instance_created_in_container\");\n\n    // panels\n    socket.off(\"panel_updated\");\n    socket.off(\"panel_deleted\");\n    socket.off(\"panel_created\");\n\n    // grids\n    socket.off(\"grid_updated\");\n    socket.off(\"grid_deleted\");\n    socket.off(\"grid_created\");\n\n    // auth\n    socket.off(\"auth_success\");\n    socket.off(\"auth_error\");\n    socket.off(\"connect_error\");\n\n    // misc\n    socket.off(\"server_error\");\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}