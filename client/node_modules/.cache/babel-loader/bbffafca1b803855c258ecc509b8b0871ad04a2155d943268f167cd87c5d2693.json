{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useContext, useEffect, useMemo, useState } from 'react';\nimport { FormContext } from './form';\n\n// Constantized to avoid a new object reference built every call\nvar defaultSubscriptionConfig = {\n  values: true\n};\n\n/**\n * Build a simple hash for a given subscription object for use in a `useMemo` dependencies array.\n * This is because `{ values: true } !== { values: true }`, but `'values:true|' === 'values:true|'`\n *\n * @example { values: true, dirty: false } => 'values:true|dirty:false|'\n */\nvar getSubscriptionHash = function getSubscriptionHash(subscriptionConfig) {\n  var hash = '';\n  for (var key in subscriptionConfig) {\n    if (subscriptionConfig.hasOwnProperty(key)) {\n      hash += \"\".concat(key, \":\").concat(subscriptionConfig[key], \"|\");\n    }\n  }\n  return hash;\n};\n\n/**\n * A hook to return a recent form state for use within the `<Form>` as it requires context access.\n * This is useful for previewing form state, or for building custom fields that need to react to form state.\n *\n * This should not be used as a way to persist form state into another form state, use `onSubmit` for proper form handling.\n *\n * @note On the initial render, this should be `undefined` as our form has not provided any state.\n */\nexport var useFormState = function useFormState() {\n  var subscriptionConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSubscriptionConfig;\n  var _useContext = useContext(FormContext),\n    subscribe = _useContext.subscribe;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    state = _useState2[0],\n    setState = _useState2[1];\n\n  /**\n   * A hash for us to shallow compare the subscriptionConfig object to react to shallow changes, but avoid referential changes.\n   * We avoid computing the hash if the subscription config has referential equality altogether.\n   */\n  var subscriptionConfigHash = useMemo(function () {\n    return getSubscriptionHash(subscriptionConfig);\n  }, [subscriptionConfig]);\n\n  /**\n   * Return a memoized version of the subscription config to only react to shallow changes, not referential changes.\n   * Eg. calling `useFormState({ values: true })` twice will result in two different objects by reference, but not by shallow comparison.\n   * This will ensure we don't re-subscribe to the form state when the subscription config is the same.\n   */\n  var config = useMemo(function () {\n    return subscriptionConfig;\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps -- intentionally controlled with a hash to have an explicit shallow comparison\n  [subscriptionConfigHash]);\n  useEffect(function () {\n    var unsubscribe = subscribe(function (formState) {\n      setState(formState);\n    }, config);\n    return function () {\n      return unsubscribe();\n    };\n  }, [subscribe, config]);\n  return state;\n};","map":{"version":3,"names":["_slicedToArray","useContext","useEffect","useMemo","useState","FormContext","defaultSubscriptionConfig","values","getSubscriptionHash","subscriptionConfig","hash","key","hasOwnProperty","concat","useFormState","arguments","length","undefined","_useContext","subscribe","_useState","_useState2","state","setState","subscriptionConfigHash","config","unsubscribe","formState"],"sources":["/data/data/com.termux/files/home/dndkittest2/client/node_modules/@atlaskit/form/dist/esm/use-form-state.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useContext, useEffect, useMemo, useState } from 'react';\nimport { FormContext } from './form';\n\n// Constantized to avoid a new object reference built every call\nvar defaultSubscriptionConfig = {\n  values: true\n};\n\n/**\n * Build a simple hash for a given subscription object for use in a `useMemo` dependencies array.\n * This is because `{ values: true } !== { values: true }`, but `'values:true|' === 'values:true|'`\n *\n * @example { values: true, dirty: false } => 'values:true|dirty:false|'\n */\nvar getSubscriptionHash = function getSubscriptionHash(subscriptionConfig) {\n  var hash = '';\n  for (var key in subscriptionConfig) {\n    if (subscriptionConfig.hasOwnProperty(key)) {\n      hash += \"\".concat(key, \":\").concat(subscriptionConfig[key], \"|\");\n    }\n  }\n  return hash;\n};\n\n/**\n * A hook to return a recent form state for use within the `<Form>` as it requires context access.\n * This is useful for previewing form state, or for building custom fields that need to react to form state.\n *\n * This should not be used as a way to persist form state into another form state, use `onSubmit` for proper form handling.\n *\n * @note On the initial render, this should be `undefined` as our form has not provided any state.\n */\nexport var useFormState = function useFormState() {\n  var subscriptionConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSubscriptionConfig;\n  var _useContext = useContext(FormContext),\n    subscribe = _useContext.subscribe;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    state = _useState2[0],\n    setState = _useState2[1];\n\n  /**\n   * A hash for us to shallow compare the subscriptionConfig object to react to shallow changes, but avoid referential changes.\n   * We avoid computing the hash if the subscription config has referential equality altogether.\n   */\n  var subscriptionConfigHash = useMemo(function () {\n    return getSubscriptionHash(subscriptionConfig);\n  }, [subscriptionConfig]);\n\n  /**\n   * Return a memoized version of the subscription config to only react to shallow changes, not referential changes.\n   * Eg. calling `useFormState({ values: true })` twice will result in two different objects by reference, but not by shallow comparison.\n   * This will ensure we don't re-subscribe to the form state when the subscription config is the same.\n   */\n  var config = useMemo(function () {\n    return subscriptionConfig;\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps -- intentionally controlled with a hash to have an explicit shallow comparison\n  [subscriptionConfigHash]);\n  useEffect(function () {\n    var unsubscribe = subscribe(function (formState) {\n      setState(formState);\n    }, config);\n    return function () {\n      return unsubscribe();\n    };\n  }, [subscribe, config]);\n  return state;\n};"],"mappings":"AAAA,OAAOA,cAAc,MAAM,sCAAsC;AACjE,SAASC,UAAU,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAChE,SAASC,WAAW,QAAQ,QAAQ;;AAEpC;AACA,IAAIC,yBAAyB,GAAG;EAC9BC,MAAM,EAAE;AACV,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,mBAAmB,GAAG,SAASA,mBAAmBA,CAACC,kBAAkB,EAAE;EACzE,IAAIC,IAAI,GAAG,EAAE;EACb,KAAK,IAAIC,GAAG,IAAIF,kBAAkB,EAAE;IAClC,IAAIA,kBAAkB,CAACG,cAAc,CAACD,GAAG,CAAC,EAAE;MAC1CD,IAAI,IAAI,EAAE,CAACG,MAAM,CAACF,GAAG,EAAE,GAAG,CAAC,CAACE,MAAM,CAACJ,kBAAkB,CAACE,GAAG,CAAC,EAAE,GAAG,CAAC;IAClE;EACF;EACA,OAAOD,IAAI;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAII,YAAY,GAAG,SAASA,YAAYA,CAAA,EAAG;EAChD,IAAIL,kBAAkB,GAAGM,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAGT,yBAAyB;EACtH,IAAIY,WAAW,GAAGjB,UAAU,CAACI,WAAW,CAAC;IACvCc,SAAS,GAAGD,WAAW,CAACC,SAAS;EACnC,IAAIC,SAAS,GAAGhB,QAAQ,CAAC,CAAC;IACxBiB,UAAU,GAAGrB,cAAc,CAACoB,SAAS,EAAE,CAAC,CAAC;IACzCE,KAAK,GAAGD,UAAU,CAAC,CAAC,CAAC;IACrBE,QAAQ,GAAGF,UAAU,CAAC,CAAC,CAAC;;EAE1B;AACF;AACA;AACA;EACE,IAAIG,sBAAsB,GAAGrB,OAAO,CAAC,YAAY;IAC/C,OAAOK,mBAAmB,CAACC,kBAAkB,CAAC;EAChD,CAAC,EAAE,CAACA,kBAAkB,CAAC,CAAC;;EAExB;AACF;AACA;AACA;AACA;EACE,IAAIgB,MAAM,GAAGtB,OAAO,CAAC,YAAY;IAC/B,OAAOM,kBAAkB;EAC3B,CAAC;EACD;EACA,CAACe,sBAAsB,CAAC,CAAC;EACzBtB,SAAS,CAAC,YAAY;IACpB,IAAIwB,WAAW,GAAGP,SAAS,CAAC,UAAUQ,SAAS,EAAE;MAC/CJ,QAAQ,CAACI,SAAS,CAAC;IACrB,CAAC,EAAEF,MAAM,CAAC;IACV,OAAO,YAAY;MACjB,OAAOC,WAAW,CAAC,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,CAACP,SAAS,EAAEM,MAAM,CAAC,CAAC;EACvB,OAAOH,KAAK;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}