{"ast":null,"code":"// state/bindSocketToStore.js\n// =========================================\n// bindSocketToStore.js — UPDATED (Aligned w/ server.js + ActionTypes)\n// Goals:\n// - Match backend event names + payload shapes (CURRENT server.js)\n// - Dispatch ONLY the new unified ActionTypes (no legacy)\n// - Keep auth + full_state behavior the same\n// - Prepare for future CRUD (delete / unified update upserts) without breaking now\n//\n// Current server.js actually emits (today):\n// - full_state\n// - container_created                 { container }\n// - instance_created_in_container     { containerId, instance }\n// - container_items_updated           { containerId, items }\n// - instance_updated                  { instance }\n// - panel_updated                     panelObject\n// - grid_updated                      gridPatchObject\n//\n// “Deleted” / “*_updated” (container_updated, etc.) are included as forward-compat\n// listeners only (safe no-ops until server emits them).\n// =========================================\n\nimport { ActionTypes } from \"./actions\";\nexport function bindSocketToStore(socket, dispatch) {\n  // ======================================================\n  // FULL STATE HYDRATE\n  // (DO NOT CHANGE request_full_state behavior on server)\n  // ======================================================\n  socket.on(\"full_state\", (payload = {}) => {\n    console.log(\"[socket] full_state received:\", payload);\n\n    // Persist gridId like old app (if provided)\n    if (payload.gridId) {\n      localStorage.setItem(\"moduli-gridId\", payload.gridId);\n      dispatch({\n        type: ActionTypes.SET_GRID_ID,\n        payload: payload.gridId\n      });\n    }\n    dispatch({\n      type: ActionTypes.FULL_STATE,\n      payload\n    });\n  });\n\n  // ======================================================\n  // CONTAINERS (CRUD)\n  // NOTE: server.js currently emits container_created + container_items_updated\n  // ======================================================\n\n  // CURRENT server event\n  socket.on(\"container_created\", ({\n    container\n  } = {}) => {\n    if (!(container !== null && container !== void 0 && container.id)) return;\n    dispatch({\n      type: ActionTypes.CREATE_CONTAINER,\n      payload: {\n        container\n      }\n    });\n  });\n\n  // CURRENT server event\n  socket.on(\"container_items_updated\", ({\n    containerId,\n    items\n  } = {}) => {\n    if (!containerId || !Array.isArray(items)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER_ITEMS,\n      payload: {\n        containerId,\n        items\n      }\n    });\n  });\n\n  // FORWARD-COMPAT (if you later make server emit this unified update upsert)\n  socket.on(\"container_updated\", (payload = {}) => {\n    const container = payload.container || payload;\n    const id = (container === null || container === void 0 ? void 0 : container.id) || payload.containerId;\n    if (!id) return;\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: {\n        container: {\n          ...container,\n          id\n        }\n      }\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"container_deleted\", (payload = {}) => {\n    const containerId = payload.containerId || payload.id;\n    if (!containerId) return;\n    dispatch({\n      type: ActionTypes.DELETE_CONTAINER,\n      payload: {\n        containerId\n      }\n    });\n  });\n\n  // ======================================================\n  // INSTANCES (CRUD)\n  // NOTE: server.js currently emits instance_created_in_container + instance_updated\n  // ======================================================\n\n  // CURRENT server event\n  socket.on(\"instance_created_in_container\", ({\n    containerId,\n    instance\n  } = {}) => {\n    if (!containerId || !(instance !== null && instance !== void 0 && instance.id)) return;\n    dispatch({\n      type: ActionTypes.CREATE_INSTANCE_IN_CONTAINER,\n      payload: {\n        containerId,\n        instance\n      }\n    });\n  });\n\n  // CURRENT server event\n  socket.on(\"instance_updated\", ({\n    instance\n  } = {}) => {\n    if (!(instance !== null && instance !== void 0 && instance.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_INSTANCE,\n      payload: {\n        instance\n      }\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"instance_deleted\", (payload = {}) => {\n    const instanceId = payload.instanceId || payload.id;\n    if (!instanceId) return;\n    dispatch({\n      type: ActionTypes.DELETE_INSTANCE,\n      payload: {\n        instanceId\n      }\n    });\n  });\n\n  // ======================================================\n  // PANELS (CRUD)\n  // NOTE: server.js currently emits panel_updated (and uses it for create too)\n  // ======================================================\n\n  // CURRENT server event (used for create + update)\n  socket.on(\"panel_updated\", panel => {\n    if (!(panel !== null && panel !== void 0 && panel.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: {\n        panel\n      }\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"panel_deleted\", (payload = {}) => {\n    const panelId = payload.panelId || payload.id;\n    if (!panelId) return;\n    dispatch({\n      type: ActionTypes.DELETE_PANEL,\n      payload: {\n        panelId\n      }\n    });\n  });\n\n  // (Optional forward-compat alias)\n  socket.on(\"panel_created\", panel => {\n    if (!(panel !== null && panel !== void 0 && panel.id)) return;\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: {\n        panel\n      }\n    });\n  });\n\n  // ======================================================\n  // GRIDS (CRUD)\n  // NOTE: server.js currently emits grid_updated with a PATCH OBJECT (not full grid)\n  // ======================================================\n\n  // CURRENT server event\n  socket.on(\"grid_updated\", (gridPatch = {}) => {\n    // server currently does: io.emit(\"grid_updated\", updatePatch)\n    dispatch({\n      type: ActionTypes.UPDATE_GRID,\n      payload: {\n        grid: gridPatch\n      }\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"grid_deleted\", (payload = {}) => {\n    const gridId = payload.gridId || payload.id;\n    if (!gridId) return;\n    dispatch({\n      type: ActionTypes.DELETE_GRID,\n      payload: {\n        gridId\n      }\n    });\n\n    // If you deleted the active grid, clear persisted selection\n    const saved = localStorage.getItem(\"moduli-gridId\");\n    if (saved && saved === gridId) localStorage.removeItem(\"moduli-gridId\");\n  });\n\n  // (Optional forward-compat alias)\n  socket.on(\"grid_created\", (payload = {}) => {\n    const grid = payload.grid || payload;\n    dispatch({\n      type: ActionTypes.CREATE_GRID,\n      payload: {\n        grid\n      }\n    });\n  });\n\n  // ======================================================\n  // AUTH (old behavior)\n  // ======================================================\n  socket.on(\"auth_success\", ({\n    token,\n    userId\n  }) => {\n    console.log(\"[socket] auth_success\", {\n      userId\n    });\n    localStorage.setItem(\"moduli-token\", token);\n    localStorage.setItem(\"moduli-userId\", userId);\n    localStorage.removeItem(\"moduli-gridId\");\n    dispatch({\n      type: ActionTypes.SET_USER_ID,\n      payload: userId\n    });\n\n    // ✅ force a new handshake so io.use(auth) runs with the token\n    try {\n      socket.disconnect();\n    } catch {}\n    socket.auth = {\n      token\n    };\n    socket.connect();\n\n    // ✅ wait for the reconnect, THEN hydrate\n    socket.once(\"connect\", () => {\n      const savedGridId = localStorage.getItem(\"moduli-gridId\");\n      socket.emit(\"request_full_state\", savedGridId ? {\n        gridId: savedGridId\n      } : undefined);\n    });\n  });\n  socket.on(\"auth_error\", msg => {\n    console.log(\"[socket] auth_error:\", msg);\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n  });\n  socket.on(\"connect_error\", err => {\n    const msg = err === null || err === void 0 ? void 0 : err.message;\n    console.log(\"[socket] connect_error:\", msg);\n    if (msg === \"INVALID_TOKEN\" || msg === \"USER_NOT_FOUND\") {\n      localStorage.removeItem(\"moduli-token\");\n      localStorage.removeItem(\"moduli-userId\");\n      localStorage.removeItem(\"moduli-gridId\");\n      dispatch({\n        type: ActionTypes.LOGOUT\n      });\n      try {\n        socket.disconnect();\n      } catch {}\n    }\n  });\n\n  // ======================================================\n  // SERVER ERRORS / MISC\n  // ======================================================\n  socket.on(\"server_error\", msg => {\n    console.warn(\"[socket] server_error:\", msg);\n  });\n\n  // ======================================================\n  // CLEANUP (important with HMR)\n  // ======================================================\n  return () => {\n    // full_state\n    socket.off(\"full_state\");\n\n    // containers\n    socket.off(\"container_created\");\n    socket.off(\"container_items_updated\");\n    socket.off(\"container_updated\");\n    socket.off(\"container_deleted\");\n\n    // instances\n    socket.off(\"instance_created_in_container\");\n    socket.off(\"instance_updated\");\n    socket.off(\"instance_deleted\");\n\n    // panels\n    socket.off(\"panel_updated\");\n    socket.off(\"panel_deleted\");\n    socket.off(\"panel_created\");\n\n    // grids\n    socket.off(\"grid_updated\");\n    socket.off(\"grid_deleted\");\n    socket.off(\"grid_created\");\n\n    // auth\n    socket.off(\"auth_success\");\n    socket.off(\"auth_error\");\n    socket.off(\"connect_error\");\n\n    // misc\n    socket.off(\"server_error\");\n  };\n}","map":{"version":3,"names":["ActionTypes","bindSocketToStore","socket","dispatch","on","payload","console","log","gridId","localStorage","setItem","type","SET_GRID_ID","FULL_STATE","container","id","CREATE_CONTAINER","containerId","items","Array","isArray","UPDATE_CONTAINER_ITEMS","UPDATE_CONTAINER","DELETE_CONTAINER","instance","CREATE_INSTANCE_IN_CONTAINER","UPDATE_INSTANCE","instanceId","DELETE_INSTANCE","panel","UPDATE_PANEL","panelId","DELETE_PANEL","gridPatch","UPDATE_GRID","grid","DELETE_GRID","saved","getItem","removeItem","CREATE_GRID","token","userId","SET_USER_ID","disconnect","auth","connect","once","savedGridId","emit","undefined","msg","err","message","LOGOUT","warn","off"],"sources":["/data/data/com.termux/files/home/dndkittest2/client/src/state/bindSocketToStore.js"],"sourcesContent":["// state/bindSocketToStore.js\n// =========================================\n// bindSocketToStore.js — UPDATED (Aligned w/ server.js + ActionTypes)\n// Goals:\n// - Match backend event names + payload shapes (CURRENT server.js)\n// - Dispatch ONLY the new unified ActionTypes (no legacy)\n// - Keep auth + full_state behavior the same\n// - Prepare for future CRUD (delete / unified update upserts) without breaking now\n//\n// Current server.js actually emits (today):\n// - full_state\n// - container_created                 { container }\n// - instance_created_in_container     { containerId, instance }\n// - container_items_updated           { containerId, items }\n// - instance_updated                  { instance }\n// - panel_updated                     panelObject\n// - grid_updated                      gridPatchObject\n//\n// “Deleted” / “*_updated” (container_updated, etc.) are included as forward-compat\n// listeners only (safe no-ops until server emits them).\n// =========================================\n\nimport { ActionTypes } from \"./actions\";\n\nexport function bindSocketToStore(socket, dispatch) {\n  // ======================================================\n  // FULL STATE HYDRATE\n  // (DO NOT CHANGE request_full_state behavior on server)\n  // ======================================================\n  socket.on(\"full_state\", (payload = {}) => {\n    console.log(\"[socket] full_state received:\", payload);\n\n    // Persist gridId like old app (if provided)\n    if (payload.gridId) {\n      localStorage.setItem(\"moduli-gridId\", payload.gridId);\n      dispatch({ type: ActionTypes.SET_GRID_ID, payload: payload.gridId });\n    }\n\n    dispatch({ type: ActionTypes.FULL_STATE, payload });\n  });\n\n  // ======================================================\n  // CONTAINERS (CRUD)\n  // NOTE: server.js currently emits container_created + container_items_updated\n  // ======================================================\n\n  // CURRENT server event\n  socket.on(\"container_created\", ({ container } = {}) => {\n    if (!container?.id) return;\n\n    dispatch({\n      type: ActionTypes.CREATE_CONTAINER,\n      payload: { container },\n    });\n  });\n\n  // CURRENT server event\n  socket.on(\"container_items_updated\", ({ containerId, items } = {}) => {\n    if (!containerId || !Array.isArray(items)) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER_ITEMS,\n      payload: { containerId, items },\n    });\n  });\n\n  // FORWARD-COMPAT (if you later make server emit this unified update upsert)\n  socket.on(\"container_updated\", (payload = {}) => {\n    const container = payload.container || payload;\n    const id = container?.id || payload.containerId;\n    if (!id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_CONTAINER,\n      payload: { container: { ...container, id } },\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"container_deleted\", (payload = {}) => {\n    const containerId = payload.containerId || payload.id;\n    if (!containerId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_CONTAINER,\n      payload: { containerId },\n    });\n  });\n\n  // ======================================================\n  // INSTANCES (CRUD)\n  // NOTE: server.js currently emits instance_created_in_container + instance_updated\n  // ======================================================\n\n  // CURRENT server event\n  socket.on(\"instance_created_in_container\", ({ containerId, instance } = {}) => {\n    if (!containerId || !instance?.id) return;\n\n    dispatch({\n      type: ActionTypes.CREATE_INSTANCE_IN_CONTAINER,\n      payload: { containerId, instance },\n    });\n  });\n\n  // CURRENT server event\n  socket.on(\"instance_updated\", ({ instance } = {}) => {\n    if (!instance?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_INSTANCE,\n      payload: { instance },\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"instance_deleted\", (payload = {}) => {\n    const instanceId = payload.instanceId || payload.id;\n    if (!instanceId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_INSTANCE,\n      payload: { instanceId },\n    });\n  });\n\n  // ======================================================\n  // PANELS (CRUD)\n  // NOTE: server.js currently emits panel_updated (and uses it for create too)\n  // ======================================================\n\n  // CURRENT server event (used for create + update)\n  socket.on(\"panel_updated\", (panel) => {\n    if (!panel?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: { panel },\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"panel_deleted\", (payload = {}) => {\n    const panelId = payload.panelId || payload.id;\n    if (!panelId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_PANEL,\n      payload: { panelId },\n    });\n  });\n\n  // (Optional forward-compat alias)\n  socket.on(\"panel_created\", (panel) => {\n    if (!panel?.id) return;\n\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: { panel },\n    });\n  });\n\n  // ======================================================\n  // GRIDS (CRUD)\n  // NOTE: server.js currently emits grid_updated with a PATCH OBJECT (not full grid)\n  // ======================================================\n\n  // CURRENT server event\n  socket.on(\"grid_updated\", (gridPatch = {}) => {\n    // server currently does: io.emit(\"grid_updated\", updatePatch)\n    dispatch({\n      type: ActionTypes.UPDATE_GRID,\n      payload: { grid: gridPatch },\n    });\n  });\n\n  // FORWARD-COMPAT (not emitted by current server.js yet)\n  socket.on(\"grid_deleted\", (payload = {}) => {\n    const gridId = payload.gridId || payload.id;\n    if (!gridId) return;\n\n    dispatch({\n      type: ActionTypes.DELETE_GRID,\n      payload: { gridId },\n    });\n\n    // If you deleted the active grid, clear persisted selection\n    const saved = localStorage.getItem(\"moduli-gridId\");\n    if (saved && saved === gridId) localStorage.removeItem(\"moduli-gridId\");\n  });\n\n  // (Optional forward-compat alias)\n  socket.on(\"grid_created\", (payload = {}) => {\n    const grid = payload.grid || payload;\n    dispatch({\n      type: ActionTypes.CREATE_GRID,\n      payload: { grid },\n    });\n  });\n\n  // ======================================================\n  // AUTH (old behavior)\n  // ======================================================\n  socket.on(\"auth_success\", ({ token, userId }) => {\n  console.log(\"[socket] auth_success\", { userId });\n\n  localStorage.setItem(\"moduli-token\", token);\n  localStorage.setItem(\"moduli-userId\", userId);\n  localStorage.removeItem(\"moduli-gridId\");\n\n  dispatch({ type: ActionTypes.SET_USER_ID, payload: userId });\n\n  // ✅ force a new handshake so io.use(auth) runs with the token\n  try { socket.disconnect(); } catch {}\n  socket.auth = { token };\n  socket.connect();\n\n  // ✅ wait for the reconnect, THEN hydrate\n  socket.once(\"connect\", () => {\n    const savedGridId = localStorage.getItem(\"moduli-gridId\");\n    socket.emit(\"request_full_state\", savedGridId ? { gridId: savedGridId } : undefined);\n  });\n});\n  socket.on(\"auth_error\", (msg) => {\n    console.log(\"[socket] auth_error:\", msg);\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n  });\n\n  socket.on(\"connect_error\", (err) => {\n  const msg = err?.message;\n  console.log(\"[socket] connect_error:\", msg);\n\n  if (msg === \"INVALID_TOKEN\" || msg === \"USER_NOT_FOUND\") {\n    localStorage.removeItem(\"moduli-token\");\n    localStorage.removeItem(\"moduli-userId\");\n    localStorage.removeItem(\"moduli-gridId\");\n\n    dispatch({ type: ActionTypes.LOGOUT });\n\n    try {\n      socket.disconnect();\n    } catch {}\n  }\n});\n\n  // ======================================================\n  // SERVER ERRORS / MISC\n  // ======================================================\n  socket.on(\"server_error\", (msg) => {\n    console.warn(\"[socket] server_error:\", msg);\n  });\n\n  // ======================================================\n  // CLEANUP (important with HMR)\n  // ======================================================\n  return () => {\n    // full_state\n    socket.off(\"full_state\");\n\n    // containers\n    socket.off(\"container_created\");\n    socket.off(\"container_items_updated\");\n    socket.off(\"container_updated\");\n    socket.off(\"container_deleted\");\n\n    // instances\n    socket.off(\"instance_created_in_container\");\n    socket.off(\"instance_updated\");\n    socket.off(\"instance_deleted\");\n\n    // panels\n    socket.off(\"panel_updated\");\n    socket.off(\"panel_deleted\");\n    socket.off(\"panel_created\");\n\n    // grids\n    socket.off(\"grid_updated\");\n    socket.off(\"grid_deleted\");\n    socket.off(\"grid_created\");\n\n    // auth\n    socket.off(\"auth_success\");\n    socket.off(\"auth_error\");\n    socket.off(\"connect_error\");\n\n    // misc\n    socket.off(\"server_error\");\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}