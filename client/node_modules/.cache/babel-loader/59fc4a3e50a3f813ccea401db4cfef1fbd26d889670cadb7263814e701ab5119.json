{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nimport EventEmitter from 'eventemitter3';\nexport var ALL_FEATURE_VALUES = '@all-features';\nvar Subscriptions = /*#__PURE__*/function () {\n  function Subscriptions() {\n    _classCallCheck(this, Subscriptions);\n    _defineProperty(this, \"eventToValue\", new Map());\n    this.emitter = new EventEmitter();\n  }\n  return _createClass(Subscriptions, [{\n    key: \"onGateUpdated\",\n    value: function onGateUpdated(gateName, callback, checkGate, options) {\n      var _this = this;\n      var value = checkGate(gateName, _objectSpread(_objectSpread({}, options), {}, {\n        fireGateExposure: false\n      }));\n      if (this.eventToValue.get(callback) === undefined) {\n        this.eventToValue.set(callback, value);\n      }\n      var wrapCallback = function wrapCallback() {\n        var value = checkGate(gateName, _objectSpread(_objectSpread({}, options), {}, {\n          fireGateExposure: false\n        }));\n        var existingValue = _this.eventToValue.get(callback);\n        if (existingValue !== value) {\n          _this.eventToValue.set(callback, value);\n          callback(value);\n        }\n      };\n      this.emitter.on(gateName, wrapCallback);\n      return function () {\n        _this.emitter.off(gateName, wrapCallback);\n      };\n    }\n  }, {\n    key: \"onExperimentValueUpdated\",\n    value: function onExperimentValueUpdated(experimentName, parameterName, defaultValue, callback, getExperimentValue, options) {\n      var _this2 = this;\n      var experimentEventName = \"\".concat(experimentName, \".\").concat(parameterName);\n      var value = getExperimentValue(experimentName, parameterName, defaultValue, _objectSpread(_objectSpread({}, options), {}, {\n        fireExperimentExposure: false\n      }));\n      if (this.eventToValue.get(callback) === undefined) {\n        this.eventToValue.set(callback, value);\n      }\n      var wrapCallback = function wrapCallback() {\n        var value = getExperimentValue(experimentName, parameterName, defaultValue, _objectSpread(_objectSpread({}, options), {}, {\n          fireExperimentExposure: false\n        }));\n        var existingValue = _this2.eventToValue.get(callback);\n        if (existingValue !== value) {\n          _this2.eventToValue.set(callback, value);\n          callback(value);\n        }\n      };\n      this.emitter.on(experimentEventName, wrapCallback);\n      return function () {\n        _this2.emitter.off(experimentEventName, wrapCallback);\n      };\n    }\n  }, {\n    key: \"onAnyUpdated\",\n    value: function onAnyUpdated(callback) {\n      var _this3 = this;\n      this.emitter.on(ALL_FEATURE_VALUES, callback);\n      return function () {\n        _this3.emitter.off(ALL_FEATURE_VALUES, callback);\n      };\n    }\n  }, {\n    key: \"anyUpdated\",\n    value: function anyUpdated() {\n      var _this4 = this;\n      this.emitter.emit(ALL_FEATURE_VALUES);\n      this.emitter.eventNames().filter(function (name) {\n        return name !== ALL_FEATURE_VALUES;\n      }).forEach(function (event) {\n        _this4.emitter.emit(event);\n      });\n    }\n  }]);\n}();\nexport { Subscriptions as default };","map":{"version":3,"names":["_classCallCheck","_createClass","_defineProperty","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","EventEmitter","ALL_FEATURE_VALUES","Subscriptions","Map","emitter","key","value","onGateUpdated","gateName","callback","checkGate","options","_this","fireGateExposure","eventToValue","get","undefined","set","wrapCallback","existingValue","on","off","onExperimentValueUpdated","experimentName","parameterName","defaultValue","getExperimentValue","_this2","experimentEventName","concat","fireExperimentExposure","onAnyUpdated","_this3","anyUpdated","_this4","emit","eventNames","name","event","default"],"sources":["/home/joshpoms/dndtest2/client/node_modules/@atlaskit/feature-gate-js-client/dist/esm/subscriptions/Subscriptions.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport EventEmitter from 'eventemitter3';\nexport var ALL_FEATURE_VALUES = '@all-features';\nvar Subscriptions = /*#__PURE__*/function () {\n  function Subscriptions() {\n    _classCallCheck(this, Subscriptions);\n    _defineProperty(this, \"eventToValue\", new Map());\n    this.emitter = new EventEmitter();\n  }\n  return _createClass(Subscriptions, [{\n    key: \"onGateUpdated\",\n    value: function onGateUpdated(gateName, callback, checkGate, options) {\n      var _this = this;\n      var value = checkGate(gateName, _objectSpread(_objectSpread({}, options), {}, {\n        fireGateExposure: false\n      }));\n      if (this.eventToValue.get(callback) === undefined) {\n        this.eventToValue.set(callback, value);\n      }\n      var wrapCallback = function wrapCallback() {\n        var value = checkGate(gateName, _objectSpread(_objectSpread({}, options), {}, {\n          fireGateExposure: false\n        }));\n        var existingValue = _this.eventToValue.get(callback);\n        if (existingValue !== value) {\n          _this.eventToValue.set(callback, value);\n          callback(value);\n        }\n      };\n      this.emitter.on(gateName, wrapCallback);\n      return function () {\n        _this.emitter.off(gateName, wrapCallback);\n      };\n    }\n  }, {\n    key: \"onExperimentValueUpdated\",\n    value: function onExperimentValueUpdated(experimentName, parameterName, defaultValue, callback, getExperimentValue, options) {\n      var _this2 = this;\n      var experimentEventName = \"\".concat(experimentName, \".\").concat(parameterName);\n      var value = getExperimentValue(experimentName, parameterName, defaultValue, _objectSpread(_objectSpread({}, options), {}, {\n        fireExperimentExposure: false\n      }));\n      if (this.eventToValue.get(callback) === undefined) {\n        this.eventToValue.set(callback, value);\n      }\n      var wrapCallback = function wrapCallback() {\n        var value = getExperimentValue(experimentName, parameterName, defaultValue, _objectSpread(_objectSpread({}, options), {}, {\n          fireExperimentExposure: false\n        }));\n        var existingValue = _this2.eventToValue.get(callback);\n        if (existingValue !== value) {\n          _this2.eventToValue.set(callback, value);\n          callback(value);\n        }\n      };\n      this.emitter.on(experimentEventName, wrapCallback);\n      return function () {\n        _this2.emitter.off(experimentEventName, wrapCallback);\n      };\n    }\n  }, {\n    key: \"onAnyUpdated\",\n    value: function onAnyUpdated(callback) {\n      var _this3 = this;\n      this.emitter.on(ALL_FEATURE_VALUES, callback);\n      return function () {\n        _this3.emitter.off(ALL_FEATURE_VALUES, callback);\n      };\n    }\n  }, {\n    key: \"anyUpdated\",\n    value: function anyUpdated() {\n      var _this4 = this;\n      this.emitter.emit(ALL_FEATURE_VALUES);\n      this.emitter.eventNames().filter(function (name) {\n        return name !== ALL_FEATURE_VALUES;\n      }).forEach(function (event) {\n        _this4.emitter.emit(event);\n      });\n    }\n  }]);\n}();\nexport { Subscriptions as default };"],"mappings":"AAAA,OAAOA,eAAe,MAAM,uCAAuC;AACnE,OAAOC,YAAY,MAAM,oCAAoC;AAC7D,OAAOC,eAAe,MAAM,uCAAuC;AACnE,SAASC,OAAOA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAAE,IAAIC,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACJ,CAAC,CAAC;EAAE,IAAIG,MAAM,CAACE,qBAAqB,EAAE;IAAE,IAAIC,CAAC,GAAGH,MAAM,CAACE,qBAAqB,CAACL,CAAC,CAAC;IAAEC,CAAC,KAAKK,CAAC,GAAGA,CAAC,CAACC,MAAM,CAAC,UAAUN,CAAC,EAAE;MAAE,OAAOE,MAAM,CAACK,wBAAwB,CAACR,CAAC,EAAEC,CAAC,CAAC,CAACQ,UAAU;IAAE,CAAC,CAAC,CAAC,EAAEP,CAAC,CAACQ,IAAI,CAACC,KAAK,CAACT,CAAC,EAAEI,CAAC,CAAC;EAAE;EAAE,OAAOJ,CAAC;AAAE;AAC9P,SAASU,aAAaA,CAACZ,CAAC,EAAE;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGY,SAAS,CAACC,MAAM,EAAEb,CAAC,EAAE,EAAE;IAAE,IAAIC,CAAC,GAAG,IAAI,IAAIW,SAAS,CAACZ,CAAC,CAAC,GAAGY,SAAS,CAACZ,CAAC,CAAC,GAAG,CAAC,CAAC;IAAEA,CAAC,GAAG,CAAC,GAAGF,OAAO,CAACI,MAAM,CAACD,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACa,OAAO,CAAC,UAAUd,CAAC,EAAE;MAAEH,eAAe,CAACE,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAACD,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,GAAGE,MAAM,CAACa,yBAAyB,GAAGb,MAAM,CAACc,gBAAgB,CAACjB,CAAC,EAAEG,MAAM,CAACa,yBAAyB,CAACd,CAAC,CAAC,CAAC,GAAGH,OAAO,CAACI,MAAM,CAACD,CAAC,CAAC,CAAC,CAACa,OAAO,CAAC,UAAUd,CAAC,EAAE;MAAEE,MAAM,CAACe,cAAc,CAAClB,CAAC,EAAEC,CAAC,EAAEE,MAAM,CAACK,wBAAwB,CAACN,CAAC,EAAED,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;EAAE;EAAE,OAAOD,CAAC;AAAE;AACtb,OAAOmB,YAAY,MAAM,eAAe;AACxC,OAAO,IAAIC,kBAAkB,GAAG,eAAe;AAC/C,IAAIC,aAAa,GAAG,aAAa,YAAY;EAC3C,SAASA,aAAaA,CAAA,EAAG;IACvBzB,eAAe,CAAC,IAAI,EAAEyB,aAAa,CAAC;IACpCvB,eAAe,CAAC,IAAI,EAAE,cAAc,EAAE,IAAIwB,GAAG,CAAC,CAAC,CAAC;IAChD,IAAI,CAACC,OAAO,GAAG,IAAIJ,YAAY,CAAC,CAAC;EACnC;EACA,OAAOtB,YAAY,CAACwB,aAAa,EAAE,CAAC;IAClCG,GAAG,EAAE,eAAe;IACpBC,KAAK,EAAE,SAASC,aAAaA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAE;MACpE,IAAIC,KAAK,GAAG,IAAI;MAChB,IAAIN,KAAK,GAAGI,SAAS,CAACF,QAAQ,EAAEf,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEkB,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;QAC5EE,gBAAgB,EAAE;MACpB,CAAC,CAAC,CAAC;MACH,IAAI,IAAI,CAACC,YAAY,CAACC,GAAG,CAACN,QAAQ,CAAC,KAAKO,SAAS,EAAE;QACjD,IAAI,CAACF,YAAY,CAACG,GAAG,CAACR,QAAQ,EAAEH,KAAK,CAAC;MACxC;MACA,IAAIY,YAAY,GAAG,SAASA,YAAYA,CAAA,EAAG;QACzC,IAAIZ,KAAK,GAAGI,SAAS,CAACF,QAAQ,EAAEf,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEkB,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;UAC5EE,gBAAgB,EAAE;QACpB,CAAC,CAAC,CAAC;QACH,IAAIM,aAAa,GAAGP,KAAK,CAACE,YAAY,CAACC,GAAG,CAACN,QAAQ,CAAC;QACpD,IAAIU,aAAa,KAAKb,KAAK,EAAE;UAC3BM,KAAK,CAACE,YAAY,CAACG,GAAG,CAACR,QAAQ,EAAEH,KAAK,CAAC;UACvCG,QAAQ,CAACH,KAAK,CAAC;QACjB;MACF,CAAC;MACD,IAAI,CAACF,OAAO,CAACgB,EAAE,CAACZ,QAAQ,EAAEU,YAAY,CAAC;MACvC,OAAO,YAAY;QACjBN,KAAK,CAACR,OAAO,CAACiB,GAAG,CAACb,QAAQ,EAAEU,YAAY,CAAC;MAC3C,CAAC;IACH;EACF,CAAC,EAAE;IACDb,GAAG,EAAE,0BAA0B;IAC/BC,KAAK,EAAE,SAASgB,wBAAwBA,CAACC,cAAc,EAAEC,aAAa,EAAEC,YAAY,EAAEhB,QAAQ,EAAEiB,kBAAkB,EAAEf,OAAO,EAAE;MAC3H,IAAIgB,MAAM,GAAG,IAAI;MACjB,IAAIC,mBAAmB,GAAG,EAAE,CAACC,MAAM,CAACN,cAAc,EAAE,GAAG,CAAC,CAACM,MAAM,CAACL,aAAa,CAAC;MAC9E,IAAIlB,KAAK,GAAGoB,kBAAkB,CAACH,cAAc,EAAEC,aAAa,EAAEC,YAAY,EAAEhC,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEkB,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;QACxHmB,sBAAsB,EAAE;MAC1B,CAAC,CAAC,CAAC;MACH,IAAI,IAAI,CAAChB,YAAY,CAACC,GAAG,CAACN,QAAQ,CAAC,KAAKO,SAAS,EAAE;QACjD,IAAI,CAACF,YAAY,CAACG,GAAG,CAACR,QAAQ,EAAEH,KAAK,CAAC;MACxC;MACA,IAAIY,YAAY,GAAG,SAASA,YAAYA,CAAA,EAAG;QACzC,IAAIZ,KAAK,GAAGoB,kBAAkB,CAACH,cAAc,EAAEC,aAAa,EAAEC,YAAY,EAAEhC,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEkB,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;UACxHmB,sBAAsB,EAAE;QAC1B,CAAC,CAAC,CAAC;QACH,IAAIX,aAAa,GAAGQ,MAAM,CAACb,YAAY,CAACC,GAAG,CAACN,QAAQ,CAAC;QACrD,IAAIU,aAAa,KAAKb,KAAK,EAAE;UAC3BqB,MAAM,CAACb,YAAY,CAACG,GAAG,CAACR,QAAQ,EAAEH,KAAK,CAAC;UACxCG,QAAQ,CAACH,KAAK,CAAC;QACjB;MACF,CAAC;MACD,IAAI,CAACF,OAAO,CAACgB,EAAE,CAACQ,mBAAmB,EAAEV,YAAY,CAAC;MAClD,OAAO,YAAY;QACjBS,MAAM,CAACvB,OAAO,CAACiB,GAAG,CAACO,mBAAmB,EAAEV,YAAY,CAAC;MACvD,CAAC;IACH;EACF,CAAC,EAAE;IACDb,GAAG,EAAE,cAAc;IACnBC,KAAK,EAAE,SAASyB,YAAYA,CAACtB,QAAQ,EAAE;MACrC,IAAIuB,MAAM,GAAG,IAAI;MACjB,IAAI,CAAC5B,OAAO,CAACgB,EAAE,CAACnB,kBAAkB,EAAEQ,QAAQ,CAAC;MAC7C,OAAO,YAAY;QACjBuB,MAAM,CAAC5B,OAAO,CAACiB,GAAG,CAACpB,kBAAkB,EAAEQ,QAAQ,CAAC;MAClD,CAAC;IACH;EACF,CAAC,EAAE;IACDJ,GAAG,EAAE,YAAY;IACjBC,KAAK,EAAE,SAAS2B,UAAUA,CAAA,EAAG;MAC3B,IAAIC,MAAM,GAAG,IAAI;MACjB,IAAI,CAAC9B,OAAO,CAAC+B,IAAI,CAAClC,kBAAkB,CAAC;MACrC,IAAI,CAACG,OAAO,CAACgC,UAAU,CAAC,CAAC,CAAChD,MAAM,CAAC,UAAUiD,IAAI,EAAE;QAC/C,OAAOA,IAAI,KAAKpC,kBAAkB;MACpC,CAAC,CAAC,CAACL,OAAO,CAAC,UAAU0C,KAAK,EAAE;QAC1BJ,MAAM,CAAC9B,OAAO,CAAC+B,IAAI,CAACG,KAAK,CAAC;MAC5B,CAAC,CAAC;IACJ;EACF,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AACH,SAASpC,aAAa,IAAIqC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}