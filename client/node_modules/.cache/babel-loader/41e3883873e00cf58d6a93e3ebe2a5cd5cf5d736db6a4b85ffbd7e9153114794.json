{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/client/src/Panel.jsx\",\n  _s = $RefreshSig$();\n// Panel.jsx\nimport React, { useRef, useMemo, useContext } from \"react\";\nimport { useDraggable, useDndContext, DragOverlay } from \"@dnd-kit/core\";\nimport ResizeHandle from \"./ResizeHandle\";\nimport Button from \"@atlaskit/button\";\nimport { token } from \"@atlaskit/tokens\";\nimport MoreVerticalIcon from \"@atlaskit/icon/glyph/more-vertical\";\nimport { ActionTypes } from \"./state/actions\";\nimport { emit } from \"./socket\";\nimport { SortableContext, rectSortingStrategy } from \"@dnd-kit/sortable\";\nimport { GridActionsContext } from \"./GridActionsContext\";\nimport { GridDataContext } from \"./GridDataContext\";\n\n/* -------------------------------------------\n   ✅ Overlay clone for CONTAINER drags\n------------------------------------------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ContainerClone({\n  container\n}) {\n  var _container$label;\n  if (!container) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-shell\",\n    style: {\n      pointerEvents: \"none\",\n      opacity: 0.95\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          touchAction: \"none\",\n          paddingLeft: 6\n        },\n        children: /*#__PURE__*/_jsxDEV(MoreVerticalIcon, {\n          size: \"small\",\n          primaryColor: \"#9AA0A6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 600,\n          padding: \"0px 10px\"\n        },\n        children: (_container$label = container.label) !== null && _container$label !== void 0 ? _container$label : \"Container\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-list\",\n      style: {\n        minHeight: 60\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          opacity: 0.6,\n          fontStyle: \"italic\",\n          padding: 8\n        },\n        children: \"Dragging\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n}\n_c = ContainerClone;\nexport default function Panel({\n  panel,\n  components,\n  dispatch,\n  gridRef,\n  cols,\n  rows,\n  activeId,\n  gridActive,\n  fullscreenPanelId,\n  setFullscreenPanelId,\n  activeSize,\n  activeInstance\n}) {\n  _s();\n  var _active$data$current$, _active$data, _active$data$current, _active$id, _active$data$current$2, _active$data2, _active$data2$current, _ref, _resizeTransformRef$c, _resizeTransformRef$c2, _panel$containers, _state$activeSize, _state$activeSize2, _state$activeSize3, _state$activeSize4, _activeInstanceResolv;\n  const resizeTransformRef = useRef({\n    w: null,\n    h: null\n  });\n  const {\n    addContainerToPanel\n  } = useContext(GridActionsContext);\n  const {\n    state,\n    containersRender\n  } = useContext(GridDataContext);\n  const SortableContainer = components[\"SortableContainer\"];\n  const Instance = components[\"Instance\"];\n\n  // ✅ DnD context active/role\n  const {\n    active\n  } = useDndContext();\n  const activeRole = (_active$data$current$ = active === null || active === void 0 ? void 0 : (_active$data = active.data) === null || _active$data === void 0 ? void 0 : (_active$data$current = _active$data.current) === null || _active$data$current === void 0 ? void 0 : _active$data$current.role) !== null && _active$data$current$ !== void 0 ? _active$data$current$ : null;\n  const activeDragId = (_active$id = active === null || active === void 0 ? void 0 : active.id) !== null && _active$id !== void 0 ? _active$id : null;\n  const activePanelId = (_active$data$current$2 = active === null || active === void 0 ? void 0 : (_active$data2 = active.data) === null || _active$data2 === void 0 ? void 0 : (_active$data2$current = _active$data2.current) === null || _active$data2$current === void 0 ? void 0 : _active$data2$current.panelId) !== null && _active$data$current$2 !== void 0 ? _active$data$current$2 : null;\n\n  // ✅ host overlay only for this panel (prevents duplicates)\n  const isOverlayHost = !!activePanelId && activePanelId === panel.id;\n\n  // ✅ lookups for overlay rendering\n  const activeContainer = useMemo(() => {\n    if (activeRole !== \"container\" || !activeDragId) return null;\n    return ((state === null || state === void 0 ? void 0 : state.containers) || []).find(c => c.id === activeDragId) || null;\n  }, [activeRole, activeDragId, state === null || state === void 0 ? void 0 : state.containers]);\n  const activeInstanceResolved = useMemo(() => {\n    if (activeRole !== \"instance\" || !activeDragId) return null;\n    return ((state === null || state === void 0 ? void 0 : state.instances) || []).find(i => i.id === activeDragId) || null;\n  }, [activeRole, activeDragId, state === null || state === void 0 ? void 0 : state.instances]);\n  const data = useMemo(() => ({\n    role: \"panel\",\n    panelId: panel.id,\n    fromCol: panel.col,\n    fromRow: panel.row,\n    width: panel.width,\n    height: panel.height\n  }), [panel]);\n  const {\n    setNodeRef,\n    attributes,\n    listeners,\n    isDragging\n  } = useDraggable({\n    id: panel.id,\n    data\n  });\n\n  // Panel.jsx (inside component)\n  const panelContainerIds = (panel === null || panel === void 0 ? void 0 : panel.containers) || [];\n\n  // use the draft list during drag, otherwise fall back to state\n  const containersSource = (_ref = containersRender !== null && containersRender !== void 0 ? containersRender : state === null || state === void 0 ? void 0 : state.containers) !== null && _ref !== void 0 ? _ref : [];\n  const panelContainers = panelContainerIds.map(id => containersSource.find(c => c.id === id)).filter(Boolean);\n  const updatePanelFinal = updated => {\n    dispatch({\n      type: ActionTypes.UPDATE_PANEL,\n      payload: updated\n    });\n    emit(\"update_panel\", {\n      panel: updated,\n      gridId: panel.gridId\n    });\n  };\n  const prev = useRef(null);\n  const toggleFullscreen = () => {\n    if (!fullscreenPanelId) {\n      prev.current = {\n        ...panel\n      };\n      updatePanelFinal({\n        ...panel,\n        row: 0,\n        col: 0,\n        width: cols,\n        height: rows\n      });\n      setFullscreenPanelId(panel.id);\n    } else {\n      updatePanelFinal({\n        ...panel,\n        ...prev.current\n      });\n      setFullscreenPanelId(null);\n    }\n  };\n  const getTrackInfo = () => {\n    var _gridRef$current;\n    const data = (_gridRef$current = gridRef.current) === null || _gridRef$current === void 0 ? void 0 : _gridRef$current.dataset.sizes;\n    return data ? JSON.parse(data) : null;\n  };\n  const colFromPx = px => {\n    const track = getTrackInfo();\n    if (!track) return 0;\n    const {\n      colSizes\n    } = track;\n    const rect = gridRef.current.getBoundingClientRect();\n    const rel = (px - rect.left) / rect.width;\n    const total = colSizes.reduce((a, b) => a + b, 0);\n    let acc = 0;\n    for (let i = 0; i < colSizes.length; i++) {\n      acc += colSizes[i];\n      if (rel < acc / total) return i;\n    }\n    return colSizes.length - 1;\n  };\n  const rowFromPx = py => {\n    const track = getTrackInfo();\n    if (!track) return 0;\n    const {\n      rowSizes\n    } = track;\n    const rect = gridRef.current.getBoundingClientRect();\n    const rel = (py - rect.top) / rect.height;\n    const total = rowSizes.reduce((a, b) => a + b, 0);\n    let acc = 0;\n    for (let i = 0; i < rowSizes.length; i++) {\n      acc += rowSizes[i];\n      if (rel < acc / total) return i;\n    }\n    return rowSizes.length - 1;\n  };\n  const beginResize = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    const getX = ev => {\n      var _ev$clientX, _ev$touches, _ev$touches$;\n      return (_ev$clientX = ev.clientX) !== null && _ev$clientX !== void 0 ? _ev$clientX : (_ev$touches = ev.touches) === null || _ev$touches === void 0 ? void 0 : (_ev$touches$ = _ev$touches[0]) === null || _ev$touches$ === void 0 ? void 0 : _ev$touches$.clientX;\n    };\n    const getY = ev => {\n      var _ev$clientY, _ev$touches2, _ev$touches2$;\n      return (_ev$clientY = ev.clientY) !== null && _ev$clientY !== void 0 ? _ev$clientY : (_ev$touches2 = ev.touches) === null || _ev$touches2 === void 0 ? void 0 : (_ev$touches2$ = _ev$touches2[0]) === null || _ev$touches2$ === void 0 ? void 0 : _ev$touches2$.clientY;\n    };\n    const move = ev => {\n      ev.preventDefault();\n      const x = getX(ev);\n      const y = getY(ev);\n      const col = colFromPx(x);\n      const row = rowFromPx(y);\n      const newW = Math.max(1, col - panel.col + 1);\n      const newH = Math.max(1, row - panel.row + 1);\n      resizeTransformRef.current = {\n        w: Math.min(newW, cols - panel.col),\n        h: Math.min(newH, rows - panel.row)\n      };\n    };\n    const stop = () => {\n      window.removeEventListener(\"mousemove\", move);\n      window.removeEventListener(\"mouseup\", stop);\n      window.removeEventListener(\"touchmove\", move);\n      window.removeEventListener(\"touchend\", stop);\n      const {\n        w,\n        h\n      } = resizeTransformRef.current;\n      resizeTransformRef.current = {\n        w: null,\n        h: null\n      };\n      updatePanelFinal({\n        ...panel,\n        width: w !== null && w !== void 0 ? w : panel.width,\n        height: h !== null && h !== void 0 ? h : panel.height\n      });\n    };\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"mouseup\", stop);\n    window.addEventListener(\"touchmove\", move, {\n      passive: false\n    });\n    window.addEventListener(\"touchend\", stop);\n  };\n  const liveW = (_resizeTransformRef$c = resizeTransformRef.current.w) !== null && _resizeTransformRef$c !== void 0 ? _resizeTransformRef$c : panel.width;\n  const liveH = (_resizeTransformRef$c2 = resizeTransformRef.current.h) !== null && _resizeTransformRef$c2 !== void 0 ? _resizeTransformRef$c2 : panel.height;\n  const gridArea = `${panel.row + 1} / ${panel.col + 1} /\n                    ${panel.row + liveH + 1} /\n                    ${panel.col + liveW + 1}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-panel-id\": panel.id,\n    ref: el => setNodeRef(el),\n    style: {\n      gridArea,\n      background: token(\"elevation.surface\", \"rgba(17,17,17,0.95)\"),\n      borderRadius: 8,\n      border: \"1px solid #AAA\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      margin: \"3px\",\n      // ✅ DO NOT transform the real panel; overlay moves instead.\n      transform: undefined,\n      transition: \"none\",\n      opacity: isDragging ? 0 : 1,\n      pointerEvents: isDragging ? \"none\" : \"auto\",\n      zIndex: 50\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        overflow: \"hidden\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"#2F343A\",\n          borderTopLeftRadius: 8,\n          borderTopRightRadius: 8,\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          fontWeight: 600,\n          color: \"white\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingLeft: 6,\n            touchAction: \"none\"\n          },\n          ...attributes,\n          ...listeners,\n          children: /*#__PURE__*/_jsxDEV(MoreVerticalIcon, {\n            size: \"small\",\n            primaryColor: \"#9AA0A6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            spacing: \"compact\",\n            onClick: toggleFullscreen,\n            children: fullscreenPanelId === panel.id ? \"R\" : \"F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          minHeight: 0,\n          color: \"white\",\n          margin: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addContainerToPanel(panel.id),\n          children: \"+ Container\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"containers-col\",\n          children: [/*#__PURE__*/_jsxDEV(SortableContext, {\n            items: panelContainerIds,\n            strategy: rectSortingStrategy,\n            children: panelContainers.map(c => /*#__PURE__*/_jsxDEV(SortableContainer, {\n              container: c,\n              panelId: panel.id\n            }, c.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), (panel === null || panel === void 0 ? void 0 : (_panel$containers = panel.containers) === null || _panel$containers === void 0 ? void 0 : _panel$containers.length) === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              opacity: 0.7,\n              fontSize: 13\n            },\n            children: \"Create a container to start.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ResizeHandle, {\n        onMouseDown: beginResize,\n        onTouchStart: beginResize\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), isOverlayHost && /*#__PURE__*/_jsxDEV(DragOverlay, {\n      adjustScale: false,\n      children: [activeDragId && activeRole === \"container\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: state === null || state === void 0 ? void 0 : (_state$activeSize = state.activeSize) === null || _state$activeSize === void 0 ? void 0 : _state$activeSize.width,\n          height: state === null || state === void 0 ? void 0 : (_state$activeSize2 = state.activeSize) === null || _state$activeSize2 === void 0 ? void 0 : _state$activeSize2.height\n        },\n        children: /*#__PURE__*/_jsxDEV(ContainerClone, {\n          container: activeContainer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }, this) : null, activeDragId && activeRole === \"instance\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: state === null || state === void 0 ? void 0 : (_state$activeSize3 = state.activeSize) === null || _state$activeSize3 === void 0 ? void 0 : _state$activeSize3.width,\n          height: state === null || state === void 0 ? void 0 : (_state$activeSize4 = state.activeSize) === null || _state$activeSize4 === void 0 ? void 0 : _state$activeSize4.height\n        },\n        children: /*#__PURE__*/_jsxDEV(Instance, {\n          id: `overlay-${activeDragId}`,\n          label: (_activeInstanceResolv = activeInstanceResolved === null || activeInstanceResolved === void 0 ? void 0 : activeInstanceResolved.label) !== null && _activeInstanceResolv !== void 0 ? _activeInstanceResolv : \"Dragging\",\n          overlay: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 13\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, this);\n}\n_s(Panel, \"jqZe/C0NI0wm0pLd/AaojLVdCjM=\", false, function () {\n  return [useDndContext, useDraggable];\n});\n_c2 = Panel;\nvar _c, _c2;\n$RefreshReg$(_c, \"ContainerClone\");\n$RefreshReg$(_c2, \"Panel\");","map":{"version":3,"names":["React","useRef","useMemo","useContext","useDraggable","useDndContext","DragOverlay","ResizeHandle","Button","token","MoreVerticalIcon","ActionTypes","emit","SortableContext","rectSortingStrategy","GridActionsContext","GridDataContext","jsxDEV","_jsxDEV","ContainerClone","container","_container$label","className","style","pointerEvents","opacity","children","touchAction","paddingLeft","size","primaryColor","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","padding","label","minHeight","fontSize","fontStyle","_c","Panel","panel","components","dispatch","gridRef","cols","rows","activeId","gridActive","fullscreenPanelId","setFullscreenPanelId","activeSize","activeInstance","_s","_active$data$current$","_active$data","_active$data$current","_active$id","_active$data$current$2","_active$data2","_active$data2$current","_ref","_resizeTransformRef$c","_resizeTransformRef$c2","_panel$containers","_state$activeSize","_state$activeSize2","_state$activeSize3","_state$activeSize4","_activeInstanceResolv","resizeTransformRef","w","h","addContainerToPanel","state","containersRender","SortableContainer","Instance","active","activeRole","data","current","role","activeDragId","id","activePanelId","panelId","isOverlayHost","activeContainer","containers","find","c","activeInstanceResolved","instances","i","fromCol","col","fromRow","row","width","height","setNodeRef","attributes","listeners","isDragging","panelContainerIds","containersSource","panelContainers","map","filter","Boolean","updatePanelFinal","updated","type","UPDATE_PANEL","payload","gridId","prev","toggleFullscreen","getTrackInfo","_gridRef$current","dataset","sizes","JSON","parse","colFromPx","px","track","colSizes","rect","getBoundingClientRect","rel","left","total","reduce","a","b","acc","length","rowFromPx","py","rowSizes","top","beginResize","event","preventDefault","stopPropagation","getX","ev","_ev$clientX","_ev$touches","_ev$touches$","clientX","touches","getY","_ev$clientY","_ev$touches2","_ev$touches2$","clientY","move","x","y","newW","Math","max","newH","min","stop","window","removeEventListener","addEventListener","passive","liveW","liveH","gridArea","ref","el","background","borderRadius","border","overflow","position","margin","transform","undefined","transition","zIndex","display","flexDirection","borderTopLeftRadius","borderTopRightRadius","justifyContent","alignItems","color","spacing","onClick","flex","items","strategy","marginTop","onMouseDown","onTouchStart","adjustScale","overlay","_c2","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/client/src/Panel.jsx"],"sourcesContent":["// Panel.jsx\nimport React, { useRef, useMemo, useContext } from \"react\";\nimport { useDraggable, useDndContext, DragOverlay } from \"@dnd-kit/core\";\nimport ResizeHandle from \"./ResizeHandle\";\nimport Button from \"@atlaskit/button\";\nimport { token } from \"@atlaskit/tokens\";\nimport MoreVerticalIcon from \"@atlaskit/icon/glyph/more-vertical\";\nimport { ActionTypes } from \"./state/actions\";\nimport { emit } from \"./socket\";\nimport { SortableContext, rectSortingStrategy } from \"@dnd-kit/sortable\";\nimport { GridActionsContext } from \"./GridActionsContext\";\nimport { GridDataContext } from \"./GridDataContext\";\n\n/* -------------------------------------------\n   ✅ Overlay clone for CONTAINER drags\n------------------------------------------- */\nfunction ContainerClone({ container }) {\n  if (!container) return null;\n\n  return (\n    <div\n      className=\"container-shell\"\n      style={{ pointerEvents: \"none\", opacity: 0.95 }}\n    >\n      <div className=\"container-header\">\n        <div style={{ touchAction: \"none\", paddingLeft: 6 }}>\n          <MoreVerticalIcon size=\"small\" primaryColor=\"#9AA0A6\" />\n        </div>\n\n        <div style={{ fontWeight: 600, padding: \"0px 10px\" }}>\n          {container.label ?? \"Container\"}\n        </div>\n      </div>\n\n      <div className=\"container-list\" style={{ minHeight: 60 }}>\n        <div\n          style={{\n            fontSize: 12,\n            opacity: 0.6,\n            fontStyle: \"italic\",\n            padding: 8,\n          }}\n        >\n          Dragging…\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function Panel({\n  panel,\n  components,\n  dispatch,\n  gridRef,\n  cols,\n  rows,\n  activeId,\n  gridActive,\n  fullscreenPanelId,\n  setFullscreenPanelId,\n  activeSize,\n  activeInstance,\n}) {\n  const resizeTransformRef = useRef({ w: null, h: null });\n\n  const { addContainerToPanel } = useContext(GridActionsContext);\n  const { state, containersRender } = useContext(GridDataContext);\n\n  const SortableContainer = components[\"SortableContainer\"];\n  const Instance = components[\"Instance\"];\n\n  // ✅ DnD context active/role\n  const { active } = useDndContext();\n  const activeRole = active?.data?.current?.role ?? null;\n  const activeDragId = active?.id ?? null;\n  const activePanelId = active?.data?.current?.panelId ?? null;\n\n  // ✅ host overlay only for this panel (prevents duplicates)\n  const isOverlayHost = !!activePanelId && activePanelId === panel.id;\n\n  // ✅ lookups for overlay rendering\n  const activeContainer = useMemo(() => {\n    if (activeRole !== \"container\" || !activeDragId) return null;\n    return (state?.containers || []).find((c) => c.id === activeDragId) || null;\n  }, [activeRole, activeDragId, state?.containers]);\n\n  const activeInstanceResolved = useMemo(() => {\n    if (activeRole !== \"instance\" || !activeDragId) return null;\n    return (state?.instances || []).find((i) => i.id === activeDragId) || null;\n  }, [activeRole, activeDragId, state?.instances]);\n\n  const data = useMemo(\n    () => ({\n      role: \"panel\",\n      panelId: panel.id,\n      fromCol: panel.col,\n      fromRow: panel.row,\n      width: panel.width,\n      height: panel.height,\n    }),\n    [panel]\n  );\n\n  const { setNodeRef, attributes, listeners, isDragging } = useDraggable({\n    id: panel.id,\n    data,\n  });\n\n  // Panel.jsx (inside component)\n  const panelContainerIds = panel?.containers || [];\n\n  // use the draft list during drag, otherwise fall back to state\n  const containersSource = containersRender ?? state?.containers ?? [];\n\n  const panelContainers = panelContainerIds\n    .map((id) => containersSource.find((c) => c.id === id))\n    .filter(Boolean);\n\n  const updatePanelFinal = (updated) => {\n    dispatch({ type: ActionTypes.UPDATE_PANEL, payload: updated });\n    emit(\"update_panel\", { panel: updated, gridId: panel.gridId });\n  };\n\n  const prev = useRef(null);\n  const toggleFullscreen = () => {\n    if (!fullscreenPanelId) {\n      prev.current = { ...panel };\n      updatePanelFinal({\n        ...panel,\n        row: 0,\n        col: 0,\n        width: cols,\n        height: rows,\n      });\n      setFullscreenPanelId(panel.id);\n    } else {\n      updatePanelFinal({\n        ...panel,\n        ...prev.current,\n      });\n      setFullscreenPanelId(null);\n    }\n  };\n\n  const getTrackInfo = () => {\n    const data = gridRef.current?.dataset.sizes;\n    return data ? JSON.parse(data) : null;\n  };\n\n  const colFromPx = (px) => {\n    const track = getTrackInfo();\n    if (!track) return 0;\n\n    const { colSizes } = track;\n    const rect = gridRef.current.getBoundingClientRect();\n    const rel = (px - rect.left) / rect.width;\n    const total = colSizes.reduce((a, b) => a + b, 0);\n\n    let acc = 0;\n    for (let i = 0; i < colSizes.length; i++) {\n      acc += colSizes[i];\n      if (rel < acc / total) return i;\n    }\n    return colSizes.length - 1;\n  };\n\n  const rowFromPx = (py) => {\n    const track = getTrackInfo();\n    if (!track) return 0;\n\n    const { rowSizes } = track;\n    const rect = gridRef.current.getBoundingClientRect();\n    const rel = (py - rect.top) / rect.height;\n    const total = rowSizes.reduce((a, b) => a + b, 0);\n\n    let acc = 0;\n    for (let i = 0; i < rowSizes.length; i++) {\n      acc += rowSizes[i];\n      if (rel < acc / total) return i;\n    }\n    return rowSizes.length - 1;\n  };\n\n  const beginResize = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const getX = (ev) => ev.clientX ?? ev.touches?.[0]?.clientX;\n    const getY = (ev) => ev.clientY ?? ev.touches?.[0]?.clientY;\n\n    const move = (ev) => {\n      ev.preventDefault();\n      const x = getX(ev);\n      const y = getY(ev);\n\n      const col = colFromPx(x);\n      const row = rowFromPx(y);\n\n      const newW = Math.max(1, col - panel.col + 1);\n      const newH = Math.max(1, row - panel.row + 1);\n\n      resizeTransformRef.current = {\n        w: Math.min(newW, cols - panel.col),\n        h: Math.min(newH, rows - panel.row),\n      };\n    };\n\n    const stop = () => {\n      window.removeEventListener(\"mousemove\", move);\n      window.removeEventListener(\"mouseup\", stop);\n      window.removeEventListener(\"touchmove\", move);\n      window.removeEventListener(\"touchend\", stop);\n\n      const { w, h } = resizeTransformRef.current;\n      resizeTransformRef.current = { w: null, h: null };\n\n      updatePanelFinal({\n        ...panel,\n        width: w ?? panel.width,\n        height: h ?? panel.height,\n      });\n    };\n\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"mouseup\", stop);\n    window.addEventListener(\"touchmove\", move, { passive: false });\n    window.addEventListener(\"touchend\", stop);\n  };\n\n  const liveW = resizeTransformRef.current.w ?? panel.width;\n  const liveH = resizeTransformRef.current.h ?? panel.height;\n\n  const gridArea = `${panel.row + 1} / ${panel.col + 1} /\n                    ${panel.row + liveH + 1} /\n                    ${panel.col + liveW + 1}`;\n\n  return (\n    <div\n      data-panel-id={panel.id}\n      ref={(el) => setNodeRef(el)}\n      style={{\n        gridArea,\n        background: token(\"elevation.surface\", \"rgba(17,17,17,0.95)\"),\n        borderRadius: 8,\n        border: \"1px solid #AAA\",\n        overflow: \"hidden\",\n        position: \"relative\",\n        margin: \"3px\",\n\n        // ✅ DO NOT transform the real panel; overlay moves instead.\n        transform: undefined,\n        transition: \"none\",\n\n        opacity: isDragging ? 0 : 1,\n        pointerEvents: isDragging ? \"none\" : \"auto\",\n        zIndex: 50,\n      }}\n    >\n      <div\n        style={{\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          overflow: \"hidden\",\n        }}\n      >\n        <div\n          style={{\n            background: \"#2F343A\",\n            borderTopLeftRadius: 8,\n            borderTopRightRadius: 8,\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            fontWeight: 600,\n            color: \"white\",\n          }}\n        >\n          <div style={{ paddingLeft: 6, touchAction: \"none\" }} {...attributes} {...listeners}>\n            <MoreVerticalIcon size=\"small\" primaryColor=\"#9AA0A6\" />\n          </div>\n\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\n            <Button spacing=\"compact\" onClick={toggleFullscreen}>\n              {fullscreenPanelId === panel.id ? \"R\" : \"F\"}\n            </Button>\n          </div>\n        </div>\n\n        <div style={{ flex: 1, minHeight: 0, color: \"white\", margin: 5 }}>\n          <button onClick={() => addContainerToPanel(panel.id)}>+ Container</button>\n\n          <div className=\"containers-col\">\n            <SortableContext items={panelContainerIds} strategy={rectSortingStrategy}>\n              {panelContainers.map((c) => (\n                <SortableContainer key={c.id} container={c} panelId={panel.id} />\n              ))}\n            </SortableContext>\n\n            {panel?.containers?.length === 0 && (\n              <div style={{ marginTop: 12, opacity: 0.7, fontSize: 13 }}>\n                Create a container to start.\n              </div>\n            )}\n          </div>\n        </div>\n\n        <ResizeHandle onMouseDown={beginResize} onTouchStart={beginResize} />\n      </div>\n\n      {/* ✅ ONE OVERLAY PER PANEL, ROLE-BASED */}\n      {isOverlayHost && (\n        <DragOverlay adjustScale={false}>\n          {activeDragId && activeRole === \"container\" ? (\n            <div style={{ width: state?.activeSize?.width, height: state?.activeSize?.height }}>\n              <ContainerClone container={activeContainer} />\n            </div>\n          ) : null}\n\n          {activeDragId && activeRole === \"instance\" ? (\n            <div style={{ width: state?.activeSize?.width, height: state?.activeSize?.height }}>\n              <Instance\n                id={`overlay-${activeDragId}`}\n                label={activeInstanceResolved?.label ?? \"Dragging\"}\n                overlay\n              />\n            </div>\n          ) : null}\n        </DragOverlay>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}