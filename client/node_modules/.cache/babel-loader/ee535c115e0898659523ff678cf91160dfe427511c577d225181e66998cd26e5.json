{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/src/Grid.jsx\",\n  _s = $RefreshSig$();\n// Grid.jsx\nimport React, { useContext } from \"react\";\nimport { DndContext, DragOverlay, PointerSensor, useSensor, useSensors } from \"@dnd-kit/core\";\nimport { GridDndContext } from \"./GridDndContext\";\nimport Instance from \"./Instance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Grid({\n  children,\n  onDropContainer\n}) {\n  _s();\n  const {\n    activeId,\n    activeSize,\n    setActiveId,\n    setActiveSize\n  } = useContext(GridDndContext);\n  const sensors = useSensors(useSensor(PointerSensor, {\n    activationConstraint: {\n      distance: 5\n    }\n  }));\n  function handleDragStart(event) {\n    var _event$active$rect, _event$active$rect$cu;\n    setActiveId(event.active.id);\n    const rect = (_event$active$rect = event.active.rect) === null || _event$active$rect === void 0 ? void 0 : (_event$active$rect$cu = _event$active$rect.current) === null || _event$active$rect$cu === void 0 ? void 0 : _event$active$rect$cu.initial;\n    if (rect) setActiveSize({\n      width: rect.width,\n      height: rect.height\n    });\n  }\n  function handleDragEnd(event) {\n    const {\n      over\n    } = event;\n    setActiveId(null);\n    setActiveSize(null);\n    if (!over) return;\n    onDropContainer === null || onDropContainer === void 0 ? void 0 : onDropContainer(over.id);\n  }\n  function handleDragCancel() {\n    setActiveId(null);\n    setActiveSize(null);\n  }\n  return /*#__PURE__*/_jsxDEV(DndContext, {\n    sensors: sensors,\n    onDragStart: handleDragStart,\n    onDragEnd: handleDragEnd,\n    onDragCancel: handleDragCancel,\n    children: [children, /*#__PURE__*/_jsxDEV(DragOverlay, {\n      adjustScale: false,\n      children: activeId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: activeSize === null || activeSize === void 0 ? void 0 : activeSize.width,\n          height: activeSize === null || activeSize === void 0 ? void 0 : activeSize.height\n        },\n        children: /*#__PURE__*/_jsxDEV(Instance, {\n          id: `overlay-${activeId}`,\n          label: \"Drag me\",\n          overlay: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(Grid, \"EOkf4ZBhVToGBfuqY3hqsaRzt3Q=\", false, function () {\n  return [useSensors, useSensor];\n});\n_c = Grid;\nvar _c;\n$RefreshReg$(_c, \"Grid\");","map":{"version":3,"names":["React","useContext","DndContext","DragOverlay","PointerSensor","useSensor","useSensors","GridDndContext","Instance","jsxDEV","_jsxDEV","Grid","children","onDropContainer","_s","activeId","activeSize","setActiveId","setActiveSize","sensors","activationConstraint","distance","handleDragStart","event","_event$active$rect","_event$active$rect$cu","active","id","rect","current","initial","width","height","handleDragEnd","over","handleDragCancel","onDragStart","onDragEnd","onDragCancel","adjustScale","style","label","overlay","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/src/Grid.jsx"],"sourcesContent":["// Grid.jsx\nimport React, { useContext } from \"react\";\nimport {\n  DndContext,\n  DragOverlay,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { GridDndContext } from \"./GridDndContext\";\nimport Instance from \"./Instance\";\n\nexport default function Grid({ children, onDropContainer }) {\n  const {\n    activeId,\n    activeSize,\n    setActiveId,\n    setActiveSize,\n  } = useContext(GridDndContext);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: { distance: 5 },\n    })\n  );\n\n  function handleDragStart(event) {\n    setActiveId(event.active.id);\n\n    const rect = event.active.rect?.current?.initial;\n    if (rect) setActiveSize({ width: rect.width, height: rect.height });\n  }\n\n  function handleDragEnd(event) {\n    const { over } = event;\n\n    setActiveId(null);\n    setActiveSize(null);\n\n    if (!over) return;\n    onDropContainer?.(over.id);\n  }\n\n  function handleDragCancel() {\n    setActiveId(null);\n    setActiveSize(null);\n  }\n\n  return (\n    <DndContext\n      sensors={sensors}\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n      onDragCancel={handleDragCancel}\n    >\n      {children}\n\n      {/* Drag preview */}\n      <DragOverlay adjustScale={false}>\n        {activeId ? (\n          <div\n            style={{\n              width: activeSize?.width,\n              height: activeSize?.height,\n            }}\n          >\n            <Instance\n              id={`overlay-${activeId}`}\n              label=\"Drag me\"\n              overlay\n            />\n          </div>\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}