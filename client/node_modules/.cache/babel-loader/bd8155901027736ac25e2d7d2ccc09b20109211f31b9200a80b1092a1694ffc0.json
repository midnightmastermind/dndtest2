{"ast":null,"code":"// socket.js\nimport { io } from \"socket.io-client\";\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:5000\";\nexport const socket = io(SERVER_URL, {\n  autoConnect: true,\n  transports: [\"websocket\"],\n  auth: {\n    token: localStorage.getItem(\"daytrack-token\") || null\n  }\n});\n\n// optional helper (matches your old style)\nexport function emit(event, payload) {\n  socket.emit(event, payload);\n}\n\n// ✅ helper for after login/register if you *don’t* reload\nexport function reconnectWithAuth() {\n  socket.auth = {\n    token: localStorage.getItem(\"daytrack-token\") || null\n  };\n  if (socket.connected) socket.disconnect();\n  socket.connect();\n}","map":{"version":3,"names":["io","SERVER_URL","process","env","REACT_APP_SERVER_URL","socket","autoConnect","transports","auth","token","localStorage","getItem","emit","event","payload","reconnectWithAuth","connected","disconnect","connect"],"sources":["/home/joshpoms/dndtest2/client/src/socket.js"],"sourcesContent":["// socket.js\nimport { io } from \"socket.io-client\";\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:5000\";\n\nexport const socket = io(SERVER_URL, {\n  autoConnect: true,\n  transports: [\"websocket\"],\n  auth: {\n    token: localStorage.getItem(\"daytrack-token\") || null,\n  },\n});\n\n// optional helper (matches your old style)\nexport function emit(event, payload) {\n  socket.emit(event, payload);\n}\n\n// ✅ helper for after login/register if you *don’t* reload\nexport function reconnectWithAuth() {\n  socket.auth = { token: localStorage.getItem(\"daytrack-token\") || null };\n  if (socket.connected) socket.disconnect();\n  socket.connect();\n}\n"],"mappings":"AAAA;AACA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,IAAI,uBAAuB;AAE9E,OAAO,MAAMC,MAAM,GAAGL,EAAE,CAACC,UAAU,EAAE;EACnCK,WAAW,EAAE,IAAI;EACjBC,UAAU,EAAE,CAAC,WAAW,CAAC;EACzBC,IAAI,EAAE;IACJC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,IAAI;EACnD;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,SAASC,IAAIA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACnCT,MAAM,CAACO,IAAI,CAACC,KAAK,EAAEC,OAAO,CAAC;AAC7B;;AAEA;AACA,OAAO,SAASC,iBAAiBA,CAAA,EAAG;EAClCV,MAAM,CAACG,IAAI,GAAG;IAAEC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,IAAI;EAAK,CAAC;EACvE,IAAIN,MAAM,CAACW,SAAS,EAAEX,MAAM,CAACY,UAAU,CAAC,CAAC;EACzCZ,MAAM,CAACa,OAAO,CAAC,CAAC;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}