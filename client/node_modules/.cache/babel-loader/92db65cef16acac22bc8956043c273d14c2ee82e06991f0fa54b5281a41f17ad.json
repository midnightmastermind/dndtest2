{"ast":null,"code":"// client/src/socket.js\nimport { io } from \"socket.io-client\";\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:5000\";\nexport const socket = io(SERVER_URL, {\n  autoConnect: true,\n  transports: [\"websocket\"],\n  auth: {\n    token: localStorage.getItem(\"moduli-token\") || null // ✅ FIX KEY\n  }\n});\nexport function emit(event, payload) {\n  socket.emit(event, payload);\n}\nexport function reconnectWithAuth() {\n  socket.auth = {\n    token: localStorage.getItem(\"moduli-token\") || null\n  }; // ✅ FIX KEY\n  if (socket.connected) socket.disconnect();\n  socket.connect();\n}","map":{"version":3,"names":["io","SERVER_URL","process","env","REACT_APP_SERVER_URL","socket","autoConnect","transports","auth","token","localStorage","getItem","emit","event","payload","reconnectWithAuth","connected","disconnect","connect"],"sources":["/data/data/com.termux/files/home/dndkittest2/client/src/socket.js"],"sourcesContent":["// client/src/socket.js\nimport { io } from \"socket.io-client\";\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || \"http://localhost:5000\";\n\nexport const socket = io(SERVER_URL, {\n  autoConnect: true,\n  transports: [\"websocket\"],\n  auth: {\n    token: localStorage.getItem(\"moduli-token\") || null, // ✅ FIX KEY\n  },\n});\n\nexport function emit(event, payload) {\n  socket.emit(event, payload);\n}\n\nexport function reconnectWithAuth() {\n  socket.auth = { token: localStorage.getItem(\"moduli-token\") || null }; // ✅ FIX KEY\n  if (socket.connected) socket.disconnect();\n  socket.connect();\n}"],"mappings":"AAAA;AACA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,IAAI,uBAAuB;AAE9E,OAAO,MAAMC,MAAM,GAAGL,EAAE,CAACC,UAAU,EAAE;EACnCK,WAAW,EAAE,IAAI;EACjBC,UAAU,EAAE,CAAC,WAAW,CAAC;EACzBC,IAAI,EAAE;IACJC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI,CAAE;EACvD;AACF,CAAC,CAAC;AAEF,OAAO,SAASC,IAAIA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACnCT,MAAM,CAACO,IAAI,CAACC,KAAK,EAAEC,OAAO,CAAC;AAC7B;AAEA,OAAO,SAASC,iBAAiBA,CAAA,EAAG;EAClCV,MAAM,CAACG,IAAI,GAAG;IAAEC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI;EAAK,CAAC,CAAC,CAAC;EACvE,IAAIN,MAAM,CAACW,SAAS,EAAEX,MAAM,CAACY,UAAU,CAAC,CAAC;EACzCZ,MAAM,CAACa,OAAO,CAAC,CAAC;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}