{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/src/SortableContainer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useMemo } from \"react\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport { SortableContext, useSortable, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { GridDndDataContext } from \"./GridDndDataContext\";\nimport { GridDndActionsContext } from \"./GridDndActionsContext\";\nimport SortableInstance from \"./SortableInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SortableContainer({\n  container\n}) {\n  _s();\n  const {\n    instances\n  } = useContext(GridDndDataContext);\n  const {\n    addInstanceToContainer,\n    useRenderCount\n  } = useContext(GridDndActionsContext);\n  const {\n    setNodeRef,\n    attributes,\n    listeners,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({\n    id: container.id,\n    data: {\n      role: \"container\",\n      label: container.label\n    }\n  });\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.6 : 1\n  };\n\n  // 3 droppables: top, list, bottom\n  const top = useDroppable({\n    id: `top:${container.id}`,\n    data: {\n      role: \"container:top\",\n      containerId: container.id,\n      label: container.label\n    }\n  });\n  const list = useDroppable({\n    id: `list:${container.id}`,\n    data: {\n      role: \"container:list\",\n      containerId: container.id,\n      label: container.label\n    }\n  });\n  const bottom = useDroppable({\n    id: `bottom:${container.id}`,\n    data: {\n      role: \"container:bottom\",\n      containerId: container.id,\n      label: container.label\n    }\n  });\n\n  // ✅ useMemo improvement: O(1) instance lookup\n  const instanceMap = useMemo(() => {\n    const map = {};\n    for (const inst of instances) map[inst.id] = inst;\n    return map;\n  }, [instances]);\n  const items = container.items.map(id => instanceMap[id]).filter(Boolean);\n  const itemIds = items.map(x => x.id);\n  useRenderCount(`SortableContainer ${container.id}`);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef,\n    style: style,\n    className: \"container-shell\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: top.setNodeRef,\n      className: \"container-sentinel\" + (top.isOver ? \" over\" : \"\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-header\",\n      ...attributes,\n      ...listeners,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 600\n        },\n        children: container.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => addInstanceToContainer(container.id),\n        children: \"+ Instance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: list.setNodeRef,\n      className: \"container-list\" + (list.isOver ? \" over\" : \"\"),\n      children: [/*#__PURE__*/_jsxDEV(SortableContext, {\n        id: `container-sortable:${container.id}`,\n        items: itemIds,\n        strategy: verticalListSortingStrategy,\n        children: items.map(inst => /*#__PURE__*/_jsxDEV(SortableInstance, {\n          instance: inst,\n          containerId: container.id\n        }, inst.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          opacity: 0.6,\n          fontStyle: \"italic\"\n        },\n        children: \"Drop items here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: bottom.setNodeRef,\n      className: \"container-sentinel\" + (bottom.isOver ? \" over\" : \"\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(SortableContainer, \"wooCjEYc1em4vnaMbAR/F3BV1Jc=\", true, function () {\n  return [useSortable, useDroppable, useDroppable, useDroppable];\n});\n_c = SortableContainer;\nvar _c;\n$RefreshReg$(_c, \"SortableContainer\");","map":{"version":3,"names":["React","useContext","useMemo","useDroppable","SortableContext","useSortable","verticalListSortingStrategy","CSS","GridDndDataContext","GridDndActionsContext","SortableInstance","jsxDEV","_jsxDEV","SortableContainer","container","_s","instances","addInstanceToContainer","useRenderCount","setNodeRef","attributes","listeners","transform","transition","isDragging","id","data","role","label","style","Transform","toString","opacity","top","containerId","list","bottom","instanceMap","map","inst","items","filter","Boolean","itemIds","x","ref","className","children","isOver","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","onClick","strategy","instance","length","fontSize","fontStyle","_c","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/src/SortableContainer.jsx"],"sourcesContent":["import React, { useContext, useMemo } from \"react\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  useSortable,\n  verticalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\n\nimport { GridDndDataContext } from \"./GridDndDataContext\";\nimport { GridDndActionsContext } from \"./GridDndActionsContext\";\nimport SortableInstance from \"./SortableInstance\";\n\nexport default function SortableContainer({ container }) {\n  const { instances } = useContext(GridDndDataContext);\n  const { addInstanceToContainer, useRenderCount } = useContext(\n    GridDndActionsContext\n  );\n\n  const { setNodeRef, attributes, listeners, transform, transition, isDragging } =\n    useSortable({\n      id: container.id,\n      data: { role: \"container\", label: container.label },\n    });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.6 : 1,\n  };\n\n  // 3 droppables: top, list, bottom\n  const top = useDroppable({\n    id: `top:${container.id}`,\n    data: {\n      role: \"container:top\",\n      containerId: container.id,\n      label: container.label,\n    },\n  });\n\n  const list = useDroppable({\n    id: `list:${container.id}`,\n    data: {\n      role: \"container:list\",\n      containerId: container.id,\n      label: container.label,\n    },\n  });\n\n  const bottom = useDroppable({\n    id: `bottom:${container.id}`,\n    data: {\n      role: \"container:bottom\",\n      containerId: container.id,\n      label: container.label,\n    },\n  });\n\n  // ✅ useMemo improvement: O(1) instance lookup\n  const instanceMap = useMemo(() => {\n    const map = {};\n    for (const inst of instances) map[inst.id] = inst;\n    return map;\n  }, [instances]);\n\n  const items = container.items.map((id) => instanceMap[id]).filter(Boolean);\n  const itemIds = items.map((x) => x.id);\n\n  useRenderCount(`SortableContainer ${container.id}`);\n\n  return (\n    <div ref={setNodeRef} style={style} className=\"container-shell\">\n      {/* Top drop zone */}\n      <div\n        ref={top.setNodeRef}\n        className={\"container-sentinel\" + (top.isOver ? \" over\" : \"\")}\n      />\n\n      {/* Header (drag handle is the label area) */}\n      <div className=\"container-header\" {...attributes} {...listeners}>\n        <div style={{ fontWeight: 600 }}>{container.label}</div>\n        <button onClick={() => addInstanceToContainer(container.id)}>\n          + Instance\n        </button>\n      </div>\n\n      {/* List drop zone + sortable instances */}\n      <div\n        ref={list.setNodeRef}\n        className={\"container-list\" + (list.isOver ? \" over\" : \"\")}\n      >\n        <SortableContext\n          id={`container-sortable:${container.id}`}\n          items={itemIds}\n          strategy={verticalListSortingStrategy}\n        >\n          {items.map((inst) => (\n            <SortableInstance\n              key={inst.id}\n              instance={inst}\n              containerId={container.id}\n            />\n          ))}\n        </SortableContext>\n\n        {items.length === 0 && (\n          <div style={{ fontSize: 12, opacity: 0.6, fontStyle: \"italic\" }}>\n            Drop items here\n          </div>\n        )}\n      </div>\n\n      {/* Bottom drop zone */}\n      <div\n        ref={bottom.setNodeRef}\n        className={\"container-sentinel\" + (bottom.isOver ? \" over\" : \"\")}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}