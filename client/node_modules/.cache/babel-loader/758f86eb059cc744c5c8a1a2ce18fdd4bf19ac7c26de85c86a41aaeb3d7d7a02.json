{"ast":null,"code":"import { COMMERCIAL, FEDRAMP_MODERATE, ISOLATED_CLOUD_PERIMETERS } from '../../common/constants';\nimport { parseAtlCtxCookies } from '../atl-cookies-lookup';\n\n/**\n * Determines if the current perimeter is an Isolated Cloud L2 perimeter\n *\n * @returns {boolean} True if the current perimeter is an Isolated Cloud perimeter, false otherwise\n */\nexport function isIsolatedCloud() {\n  if (typeof document === 'undefined') {\n    // @ts-ignore\n    return globalThis.ssrContext.isInIC;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  if (!atlCtxCookieValues) {\n    // If the cookies are not set, the current perimeter is non-isolated commercial\n    return false;\n  }\n\n  // The icDomain check is needed for when federal perimeters are eventually added to Isolated Cloud as well\n  return ISOLATED_CLOUD_PERIMETERS.includes(atlCtxCookieValues.perimeter) && atlCtxCookieValues.icDomain !== undefined;\n}\n\n/**\n * Determines if the current perimeter is FedRAMP Moderate.\n * Please note that FedRAMP Moderate is not currently in Isolated Cloud, but when it is, this function will still return true.\n *\n * @returns {boolean} True if the current perimeter is FedRAMP Moderate, false otherwise\n */\nexport function isFedrampModerate() {\n  if (typeof document === 'undefined') {\n    // @ts-ignore\n    return globalThis.ssrContext.isInFedramp;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  if (!atlCtxCookieValues) {\n    // If the cookies are not set, the current perimeter is non-isolated commercial\n    return false;\n  }\n  return atlCtxCookieValues.perimeter === FEDRAMP_MODERATE;\n}\n\n/**\n * Retrieves the customer selected IC domain name.\n *\n *\n * @returns {string | undefined} The Isolated Cloud domain name if applicable, undefined otherwise (ex. if not in Isolated Cloud)\n */\nexport function isolatedCloudDomain() {\n  if (typeof document === 'undefined') {\n    return globalThis.location.hostname;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  return atlCtxCookieValues === null || atlCtxCookieValues === void 0 ? void 0 : atlCtxCookieValues.icDomain;\n}\n\n/**\n * Returns the Isolation Context identifier\n *\n * @returns {string | undefined} The Isolation Context ID if applicable, undefined otherwise (ex. if not in Isolated Cloud)\n */\nexport function isolationContextId() {\n  if (typeof document === 'undefined') {\n    // @ts-ignore\n    return isIsolatedCloud() ? globalThis.ssrContext.icName : undefined;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  return atlCtxCookieValues === null || atlCtxCookieValues === void 0 ? void 0 : atlCtxCookieValues.icId;\n}\n\n/**\n * Returns information about the current environment for internal use\n * @returns {string | undefined} if the current environment is in isolated cloud + what the current perimeter is. Returns undefined when a new cloud environment has been created but not added to this library\n */\nexport function cloudEnvironment() {\n  if (typeof document === 'undefined') {\n    return cloudEnvironmentSsrLookup();\n  }\n  return cloudEnvironmentCookieLookup();\n}\nfunction cloudEnvironmentSsrLookup() {\n  // @ts-ignore\n  if (globalThis.ssrContext.isInIC === true) {\n    return {\n      type: 'isolated-cloud',\n      perimeter: COMMERCIAL\n    };\n  }\n  // @ts-ignore\n  if (globalThis.ssrContext.isInFedramp === true) {\n    return {\n      type: 'non-isolated-cloud',\n      perimeter: FEDRAMP_MODERATE\n    };\n  }\n  return {\n    type: 'non-isolated-cloud',\n    perimeter: COMMERCIAL\n  };\n}\nfunction cloudEnvironmentCookieLookup() {\n  // Avoid calling isFedrampModerate() and isIsolatedCloud() here to avoid repeated cookie parsing\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  if (!atlCtxCookieValues) {\n    // If the cookies are not set, the current perimeter is non-isolated commercial\n    return {\n      type: 'non-isolated-cloud',\n      perimeter: COMMERCIAL\n    };\n  }\n  var isIc = ISOLATED_CLOUD_PERIMETERS.includes(atlCtxCookieValues.perimeter) && atlCtxCookieValues.icDomain !== undefined;\n  if (isIc) {\n    return {\n      type: 'isolated-cloud',\n      perimeter: COMMERCIAL\n    };\n  }\n  if (atlCtxCookieValues.perimeter === FEDRAMP_MODERATE) {\n    return {\n      type: 'non-isolated-cloud',\n      perimeter: FEDRAMP_MODERATE\n    };\n  }\n\n  // If a new cloud environment has been created but not added to this library, return undefined\n  return undefined;\n}","map":{"version":3,"names":["COMMERCIAL","FEDRAMP_MODERATE","ISOLATED_CLOUD_PERIMETERS","parseAtlCtxCookies","isIsolatedCloud","document","globalThis","ssrContext","isInIC","atlCtxCookieValues","includes","perimeter","icDomain","undefined","isFedrampModerate","isInFedramp","isolatedCloudDomain","location","hostname","isolationContextId","icName","icId","cloudEnvironment","cloudEnvironmentSsrLookup","cloudEnvironmentCookieLookup","type","isIc"],"sources":["/data/data/com.termux/files/home/dndkittest2/client/node_modules/@atlaskit/atlassian-context/dist/esm/services/perimeter/index.js"],"sourcesContent":["import { COMMERCIAL, FEDRAMP_MODERATE, ISOLATED_CLOUD_PERIMETERS } from '../../common/constants';\nimport { parseAtlCtxCookies } from '../atl-cookies-lookup';\n\n/**\n * Determines if the current perimeter is an Isolated Cloud L2 perimeter\n *\n * @returns {boolean} True if the current perimeter is an Isolated Cloud perimeter, false otherwise\n */\nexport function isIsolatedCloud() {\n  if (typeof document === 'undefined') {\n    // @ts-ignore\n    return globalThis.ssrContext.isInIC;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  if (!atlCtxCookieValues) {\n    // If the cookies are not set, the current perimeter is non-isolated commercial\n    return false;\n  }\n\n  // The icDomain check is needed for when federal perimeters are eventually added to Isolated Cloud as well\n  return ISOLATED_CLOUD_PERIMETERS.includes(atlCtxCookieValues.perimeter) && atlCtxCookieValues.icDomain !== undefined;\n}\n\n/**\n * Determines if the current perimeter is FedRAMP Moderate.\n * Please note that FedRAMP Moderate is not currently in Isolated Cloud, but when it is, this function will still return true.\n *\n * @returns {boolean} True if the current perimeter is FedRAMP Moderate, false otherwise\n */\nexport function isFedrampModerate() {\n  if (typeof document === 'undefined') {\n    // @ts-ignore\n    return globalThis.ssrContext.isInFedramp;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  if (!atlCtxCookieValues) {\n    // If the cookies are not set, the current perimeter is non-isolated commercial\n    return false;\n  }\n  return atlCtxCookieValues.perimeter === FEDRAMP_MODERATE;\n}\n\n/**\n * Retrieves the customer selected IC domain name.\n *\n *\n * @returns {string | undefined} The Isolated Cloud domain name if applicable, undefined otherwise (ex. if not in Isolated Cloud)\n */\nexport function isolatedCloudDomain() {\n  if (typeof document === 'undefined') {\n    return globalThis.location.hostname;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  return atlCtxCookieValues === null || atlCtxCookieValues === void 0 ? void 0 : atlCtxCookieValues.icDomain;\n}\n\n/**\n * Returns the Isolation Context identifier\n *\n * @returns {string | undefined} The Isolation Context ID if applicable, undefined otherwise (ex. if not in Isolated Cloud)\n */\nexport function isolationContextId() {\n  if (typeof document === 'undefined') {\n    // @ts-ignore\n    return isIsolatedCloud() ? globalThis.ssrContext.icName : undefined;\n  }\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  return atlCtxCookieValues === null || atlCtxCookieValues === void 0 ? void 0 : atlCtxCookieValues.icId;\n}\n\n/**\n * Returns information about the current environment for internal use\n * @returns {string | undefined} if the current environment is in isolated cloud + what the current perimeter is. Returns undefined when a new cloud environment has been created but not added to this library\n */\nexport function cloudEnvironment() {\n  if (typeof document === 'undefined') {\n    return cloudEnvironmentSsrLookup();\n  }\n  return cloudEnvironmentCookieLookup();\n}\nfunction cloudEnvironmentSsrLookup() {\n  // @ts-ignore\n  if (globalThis.ssrContext.isInIC === true) {\n    return {\n      type: 'isolated-cloud',\n      perimeter: COMMERCIAL\n    };\n  }\n  // @ts-ignore\n  if (globalThis.ssrContext.isInFedramp === true) {\n    return {\n      type: 'non-isolated-cloud',\n      perimeter: FEDRAMP_MODERATE\n    };\n  }\n  return {\n    type: 'non-isolated-cloud',\n    perimeter: COMMERCIAL\n  };\n}\nfunction cloudEnvironmentCookieLookup() {\n  // Avoid calling isFedrampModerate() and isIsolatedCloud() here to avoid repeated cookie parsing\n  var atlCtxCookieValues = parseAtlCtxCookies();\n  if (!atlCtxCookieValues) {\n    // If the cookies are not set, the current perimeter is non-isolated commercial\n    return {\n      type: 'non-isolated-cloud',\n      perimeter: COMMERCIAL\n    };\n  }\n  var isIc = ISOLATED_CLOUD_PERIMETERS.includes(atlCtxCookieValues.perimeter) && atlCtxCookieValues.icDomain !== undefined;\n  if (isIc) {\n    return {\n      type: 'isolated-cloud',\n      perimeter: COMMERCIAL\n    };\n  }\n  if (atlCtxCookieValues.perimeter === FEDRAMP_MODERATE) {\n    return {\n      type: 'non-isolated-cloud',\n      perimeter: FEDRAMP_MODERATE\n    };\n  }\n\n  // If a new cloud environment has been created but not added to this library, return undefined\n  return undefined;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}