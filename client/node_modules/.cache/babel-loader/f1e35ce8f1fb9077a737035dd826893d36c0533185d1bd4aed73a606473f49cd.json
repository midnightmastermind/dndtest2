{"ast":null,"code":"var _jsxFileName = \"/home/joshpoms/dndtest2/src/Grid.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext } from \"react\";\nimport { DndContext, DragOverlay, PointerSensor, useSensor, useSensors } from \"@dnd-kit/core\";\nimport { GridDndContext } from \"./GridDndContext\";\nimport Instance from \"./Instance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Grid({\n  children\n}) {\n  _s();\n  var _activeInst$label;\n  const {\n    activeId,\n    activeSize,\n    setActiveId,\n    setActiveSize,\n    instances,\n    moveInstance\n  } = useContext(GridDndContext);\n  const sensors = useSensors(useSensor(PointerSensor, {\n    activationConstraint: {\n      distance: 5\n    }\n  }));\n  function handleDragStart(event) {\n    var _event$active$rect, _event$active$rect$cu;\n    setActiveId(event.active.id);\n    const rect = (_event$active$rect = event.active.rect) === null || _event$active$rect === void 0 ? void 0 : (_event$active$rect$cu = _event$active$rect.current) === null || _event$active$rect$cu === void 0 ? void 0 : _event$active$rect$cu.initial;\n    if (rect) setActiveSize({\n      width: rect.width,\n      height: rect.height\n    });\n  }\n  function handleDragEnd(event) {\n    const {\n      active,\n      over\n    } = event;\n    setActiveId(null);\n    setActiveSize(null);\n    if (!over) return;\n    const instanceId = active.id;\n    const toContainerId = over.id;\n    moveInstance(instanceId, toContainerId);\n  }\n  function handleDragCancel() {\n    setActiveId(null);\n    setActiveSize(null);\n  }\n  const activeInst = activeId ? instances.find(x => x.id === activeId) : null;\n  return /*#__PURE__*/_jsxDEV(DndContext, {\n    sensors: sensors,\n    onDragStart: handleDragStart,\n    onDragEnd: handleDragEnd,\n    onDragCancel: handleDragCancel,\n    children: [children, /*#__PURE__*/_jsxDEV(DragOverlay, {\n      adjustScale: false,\n      children: activeId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: activeSize === null || activeSize === void 0 ? void 0 : activeSize.width,\n          height: activeSize === null || activeSize === void 0 ? void 0 : activeSize.height\n        },\n        children: /*#__PURE__*/_jsxDEV(Instance, {\n          id: `overlay-${activeId}`,\n          label: (_activeInst$label = activeInst === null || activeInst === void 0 ? void 0 : activeInst.label) !== null && _activeInst$label !== void 0 ? _activeInst$label : \"Dragging\",\n          overlay: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(Grid, \"v3Ru/vMeDhlQ/wng3SJ+YIVeiso=\", false, function () {\n  return [useSensors, useSensor];\n});\n_c = Grid;\nvar _c;\n$RefreshReg$(_c, \"Grid\");","map":{"version":3,"names":["React","useContext","DndContext","DragOverlay","PointerSensor","useSensor","useSensors","GridDndContext","Instance","jsxDEV","_jsxDEV","Grid","children","_s","_activeInst$label","activeId","activeSize","setActiveId","setActiveSize","instances","moveInstance","sensors","activationConstraint","distance","handleDragStart","event","_event$active$rect","_event$active$rect$cu","active","id","rect","current","initial","width","height","handleDragEnd","over","instanceId","toContainerId","handleDragCancel","activeInst","find","x","onDragStart","onDragEnd","onDragCancel","adjustScale","style","label","overlay","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/joshpoms/dndtest2/src/Grid.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport {\n  DndContext,\n  DragOverlay,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { GridDndContext } from \"./GridDndContext\";\nimport Instance from \"./Instance\";\n\nexport default function Grid({ children }) {\n  const {\n    activeId,\n    activeSize,\n    setActiveId,\n    setActiveSize,\n    instances,\n    moveInstance,\n  } = useContext(GridDndContext);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: { distance: 5 },\n    })\n  );\n\n  function handleDragStart(event) {\n    setActiveId(event.active.id);\n\n    const rect = event.active.rect?.current?.initial;\n    if (rect) setActiveSize({ width: rect.width, height: rect.height });\n  }\n\n  function handleDragEnd(event) {\n    const { active, over } = event;\n\n    setActiveId(null);\n    setActiveSize(null);\n\n    if (!over) return;\n\n    const instanceId = active.id;\n    const toContainerId = over.id;\n\n    moveInstance(instanceId, toContainerId);\n  }\n\n  function handleDragCancel() {\n    setActiveId(null);\n    setActiveSize(null);\n  }\n\n  const activeInst = activeId\n    ? instances.find((x) => x.id === activeId)\n    : null;\n\n  return (\n    <DndContext\n      sensors={sensors}\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n      onDragCancel={handleDragCancel}\n    >\n      {children}\n\n      {/* Drag preview overlay (prevents “becoming container sized”) */}\n      <DragOverlay adjustScale={false}>\n        {activeId ? (\n          <div style={{ width: activeSize?.width, height: activeSize?.height }}>\n            <Instance\n              id={`overlay-${activeId}`}\n              label={activeInst?.label ?? \"Dragging\"}\n              overlay\n            />\n          </div>\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}