@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Global reset & non-scroll root --- */
html,
body,
#root {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  /* no outer scroll */

  overscroll-behavior-y: contain;
  overscroll-behavior-x: contain;
}

#root {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",
    "Helvetica Neue", sans-serif;
  background: #101318;
  color: #f5f5f5;
}
/*
button {
  background: rgb(22, 27, 34);
  color: white;
  border: 1px solid rgb(34, 34, 34);
  border-radius: 4px;
  font-size: 12px;
  font-family: monospace;
  cursor: pointer;
  z-index: 100;
  touch-action: manipulation;
  
}
  .toolbar label {
  font-size: 11px;
  font-family: monospace;
  margin-block-end: 1px;
  color: white;
}

.toolbar button {
  color: white;
  border: 1px solid #3a4452;
  border-radius: 6px;
}
*/

:root{
  --moduli-mark:#0e2140;
  --moduli-text:#4474c2;
}

.drag-handle {
  z-index: 100;
}

/* --- Layout wrappers --- */
.app-root {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.dnd-page {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 16px;
  box-sizing: border-box;

  /* important for mobile: disables scrolling while dragging */
}

/* row that holds containers */
.containers-row {
  display: flex;
  gap: 12px;
}

/* stack vertically on small screens */
@media (max-width: 600px) {
  .containers-row {
    flex-direction: column;
  }
}

/* --- Container styling --- */
.dnd-container {
  display: block;
  /* explicitly block, not flex */
  flex: 1;
  min-height: 180px;
  border-radius: 8px;
  padding: 12px;
  border: 1px solid #333;
  background: #151a20;
  box-sizing: border-box;
  position: relative;
}

.dnd-container--over {
  background: #1f2833;
}

.dnd-container__label {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 8px;
}

/* --- Draggable instance --- */

/* Make overlay not stretch */


/* the area that holds the container tiles */
.containers-col {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
  /* ✅ key */
  gap: 10px;
  align-content: start;
  grid-auto-flow: row;
  padding-top: 3px;
}

/* top/bottom sentinel drop zones */
.container-sentinel {
  height: 10px;
  background: transparent;
}

.container-sentinel.over {
  background: rgba(80, 140, 255, 0.25);
}

.container-header {
  display: flex;
  justify-content: start;
  align-items: start;
  cursor: grab;
}

.container-list {
  min-height: 50px !important;
  height: 100%;
  flex: 1;
  overflow-y: auto !important;
}
.container-list-wrap {
  height: 100%;
  overflow: hidden;
  flex: 1;
  min-height: 85px;
  position: relative;
  padding: 10px 5px 15px 5px;
}
.container-list.over {
  background: rgba(80, 140, 255, 0.12);
}
.dnd-instance {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  background: #4372ac;
  border: 1px solid #3a4452;
  font-size: 12px;
  box-sizing: border-box;
  cursor: grab;

  width: fit-content;
  max-width: 100%;
  align-self: flex-start;
  width: 100%;
}

.dnd-instance--dragging {
  opacity: 0.6;
}

/* panels scroll naturally */
.panel-scroll {
  touch-action: pan-y;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  overscroll-behavior-x: none;
  padding-left: 5px;
  padding-right: 20px;
  scrollbar-gutter: stable;

}

.dnd-instance.hidden {
  opacity: 0;
  pointer-events: none;
  /* ✅ important */
}

.debugbar>details>pre {
  overflow-y: scroll;
  height: auto;
  max-height: 30vh
}



.panel-scroll * {
  max-width: 100%;
  box-sizing: border-box;
}

.containers-col,
.container-shell,
.container-list,
.dnd-instance {
  min-width: 0;
  /* critical in flex/grid parents */
}

@media (max-width: 600px) {
  .toolbar * {
    font-size: 8px !important;
  }
  .toolbar .grid-select {
    width: 100px;
  } 
  .toolbar input[type="text"] {
    max-width: 50px !important;
  }
  .button-span {
    display: none !important;
  }
  .toolbar input[type="number"] {
    max-width: 10px !important;
  }

  .container-header {
    font-size: 13px;
  }

  button {
    font-size: 9px;
  }

  
  .grid-wrapper {
    height: 90vh !important;
  }
  
  .dnd-instance {
    font-size: 10px;
  }
  
  .panel-header button {
    font-size: 8px !important;
  }
  
  .panel-select button {
    display: flex;
    justify-content: center;
    flex-wrap: nowrap;
    min-width: 70px;
  }
}

.toolbar .no-select {
  -webkit-touch-callout: none;
  /* iOS Safari */
  -webkit-user-select: none;
  /* Chrome, Safari, Opera */
  -khtml-user-select: none;
  /* Konqueror browser */
  -moz-user-select: none;
  /* Firefox */
  -ms-user-select: none;
  /* Internet Explorer/Edge */
  user-select: none;
  /* Standard property */
  cursor: default;
  /* Optional: ensures the cursor doesn't turn into a text selection caret */
}

:root {
  --font-mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
:root {
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --border: 214 32% 91%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --primary: 221 83% 53%;
  --primary-foreground: 210 40% 98%;
  --accent: 210 40% 96%;
  --accent-foreground: 222 47% 11%;
}

.dark {
  /* =========================
     BACKGROUND (app canvas)
     ========================= */
  --background-0: 222 30% 6%;
  --background-1: 222 30% 7%;
  --background-2: 222 30% 9%;

  /* =========================
     SURFACE (panels / cards)
     ========================= */
  --surface-0: 215 18% 10%;
  --surface-1: 215 18% 11%;
  --surface-2: 215 18% 13%;

  /* =========================
     POPOVER / FLOATING UI
     ========================= */
  --popover-0: 220 22% 6%;
  --popover-1: 220 22% 7%;
  --popover-2: 220 22% 9%;

  --popover-foreground: 210 40% 98%;

  /* =========================
     INPUTS
     ========================= */
  --input-0: 215 21% 10%;
  --input-1: 215 21% 11%;
  --input-2: 215 21% 13%;

  /* =========================
     OVERLAY (drag / modal)
     ========================= */
  --overlay-0: 0 20% 1%;
  --overlay-1: 0 20% 2%;
  --overlay-2: 0 20% 4%;

  /* =========================
     BORDERS
     ========================= */
  --border-0: 216 17% 27%;
  --border-1: 0 0% 20%;
  --border-2: 0 0% 26%;

  /* =========================
     TEXT
     ========================= */
  --foreground-0: 210 40% 94%;
  --foreground-1: 210 40% 98%;
  --foreground-2: 216 15% 65%;


    /* ✅ Tailwind token aliases (these are what your tailwind.config reads) */
  --background: var(--background-1);
  --foreground: var(--foreground-1);

  --border: var(--border-1);

  --popover: var(--popover-1);
  --popover-foreground: var(--popover-foreground);

  --primary: 210 40% 98%;
  --primary-foreground: 222 30% 8%;

  --accent: var(--surface-2);
  --accent-foreground: var(--foreground-1);

  /* ✅ keep these names because you already use them in Tailwind */
  --background2: var(--surface-0); /* you wanted “background2 but named different” — use surface */
  --input2: var(--input-1);        /* keep your input vibe */
  --overlay: var(--overlay-0);     /* keep overlay the same */
}

html.dark {
  color-scheme: dark;
}

.grid-frame {
  background: hsl(var(--surface-0)); /* was background2 */
  border-radius: 10px;
  border: 1px solid hsl(var(--border-1));
  overflow: hidden;
  padding: 0px;
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.55),
    inset 0 1px 0 rgba(255, 255, 255, 0.04),
    inset 0 -1px 0 rgba(0, 0, 0, 0.6);
}

/* --- Panel floating card polish --- */
.panel-card {
  box-shadow:
    0 10px 22px rgba(0,0,0,0.55),
    0 1px 0 rgba(255,255,255,0.04) inset;
    
}

/* --- Panel header subtle sheen (doesn't override bg) --- */
.panel-header {
  box-shadow: 0 1px 0 rgba(255,255,255,0.05) inset;
}

/* --- Container recessed well polish --- */
.container-shell {
  min-width: 161px;
  min-height: 92px;
  box-sizing: border-box;
  border-radius: 8px;
  border: 1px solid hsl(var(--border-1));
  background: hsl(var(--surface-1));
  overflow: hidden;
  height: 100%;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.03),
    inset 0 -10px 24px rgba(0,0,0,0.35);
}


.container-body {
  height: 100%;
  min-height: 0;
  flex: 1;
}
/* Optional: make the grid "canvas" feel inset */

.grid-wrapper {
  border-radius: 12px;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.03),
    inset 0 18px 40px rgba(0,0,0,0.35);
}

.panel-card {
  box-shadow:
    0 10px 24px rgba(0,0,0,0.60),
    0 1px 0 rgba(255,255,255,0.04) inset;
}

/* ---------- Pocket dock inside the container ---------- */
.instance-pocket {
  padding: 6px;
  border-radius: 10px;
  overflow-y: auto;
  height: 100%;
  min-height: 0;
  flex: 1;
  background: hsl(var(--input2));              /* your “dock” */
  border: 1px solid hsl(var(--border));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    inset 0 14px 28px rgba(0,0,0,0.35);
}

/* ---------- Instance wrapper spacing ---------- */
.instance-wrap {
  width: 100%;
  z-index: 3;
  position: relative;
  margin-bottom: 5px;
}

/* When the sortable item is being dragged, your original hides (opacity 0).
   Keep pointer events off so it doesn’t block hits. */
.instance-wrap.is-dragging {
  pointer-events: none;
}

/* ---------- Make the Instance card look “raised in a well” ---------- */
/* This assumes Instance renders a root element we can target.
   If Instance has a className prop, even better—use that instead. */
.instance-wrap > * {
  width: 100%;
  border-radius: 8px;
  border: 1px solid hsl(var(--border));
  background:rgba(12, 53, 70, 0.35);         /* “card” surface */

  box-shadow:
    0 2px 10px rgba(0,0,0,0.35),               /* raised */
    0 1px 0 rgba(255,255,255,0.04) inset;      /* sheen */
}

/* Slight “pressed into dock” feel on hover */
.dragging .instance-wrap:hover > * {
  box-shadow: 0 2px 10px rgba(0,0,0,0.35), 0 1px 0 rgba(255,255,255,0.04) inset;
}

.instance-overlay > * {
  border-radius: 10px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--surface-0));
  box-shadow:
    0 18px 40px rgba(0,0,0,0.70),
    0 0 0 1px rgba(255,255,255,0.04) inset;
  transform: translateZ(0); /* crisp */
}
/* ---------- Overlay: general “floating above everything” feel ---------- */
.panel-overlay,
.container-overlay,
.instance-overlay {
  transform: translateZ(0); /* crisp text */
}
.instance-overlay {
  max-width: 200px;
}
/* ---------- Panel overlay (PanelClone root) ---------- */
.panel-overlay > * {
  border-radius: 12px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--surface-0));
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.04) inset,
    0 1px 0 rgba(255,255,255,0.06) inset;
}

/* ---------- Container overlay (ContainerClone root) ---------- */
.container-overlay > * {
  border-radius: 12px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--surface-1));
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.04) inset,
    0 10px 22px rgba(0,0,0,0.55);
}

/* (You already have this, but here’s the consistent version) */
.instance-overlay > * {
  border-radius: 10px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--surface-0));
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.04) inset;
}
.grid-cell{
  min-width:0; min-height:0;
  border:1px solid #3F444A;
  border-radius: 8px;
  transition: background 80ms;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
  padding: 6px;
  box-sizing: border-box;
  background: transparent;
  position: relative;
}
.grid-cell.is-highlight{ background:rgba(50,150,255,0.45); }

.panel-scroll {
  width: 100%;
  height: 100%;

  overflow-y: auto;
  overflow-x: hidden;

  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  touch-action: pan-y;

  min-height: 120px;
  position: relative;
}
.fullscreen-overlay { pointer-events: auto; }
.fullscreen-overlay * { pointer-events: auto; }
.drag-overlay,
.panel-clone-overlay {
  pointer-events: none;
}

.grid-muted {
  pointer-events: none;
  user-select: none;
}


.panel-root {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
}

.panel-card {
  width: calc(100% - 4px)
}